{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/2021/7/update-virtualbox/","result":{"data":{"site":{"siteMetadata":{"title":"magcho's blog","author":"magcho"}},"markdownRemark":{"id":"acd530df-6424-5a92-b742-8c15160bf3f3","excerpt":"昨日したらvirtualboxがアップデートできなかったので対応をメモ。 エラー文 VBoxUSBでエラーなので、類似事例を探すと以下のフォーラムが見つかった。\nhttps://forum.macbidouille.com/index.php?showtopic=42033…","html":"<p>昨日<code class=\"language-text\">brew update &amp;&amp; brew upgrade</code>したらvirtualboxがアップデートできなかったので対応をメモ。</p>\n<h2>エラー文</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ brew upgrade\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Casks with <span class=\"token string\">'auto_updates'</span> or <span class=\"token string\">'version :latest'</span> will not be upgraded<span class=\"token punctuation\">;</span> pass <span class=\"token variable\"><span class=\"token variable\">`</span>--greedy<span class=\"token variable\">`</span></span> to upgrade them.\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Upgrading <span class=\"token number\">1</span> outdated package:\nvirtualbox <span class=\"token number\">6.1</span>.22,144080 -<span class=\"token operator\">></span> <span class=\"token number\">6.1</span>.24,145767\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Upgrading virtualbox\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Caveats\nvirtualbox requires a kernel extension to work.\nIf the installation fails, retry after you <span class=\"token builtin class-name\">enable</span> it in:\n  System Preferences → Security <span class=\"token operator\">&amp;</span> Privacy → General\n\nFor <span class=\"token function\">more</span> information, refer to vendor documentation or this Apple Technical Note:\n  https://developer.apple.com/library/content/technotes/tn2459/_index.html\n\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Downloading https://download.virtualbox.org/virtualbox/6.1.24/VirtualBox-6.1.24-145767-OSX.dmg\nAlready downloaded: /Users/magcho/Library/Caches/Homebrew/downloads/df87b6f6114108c8ca37e767f9f6e0206aa4d1c8c9237a5de5548075abbc45fd--VirtualBox-6.1.24-145767-OSX.dmg\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Running uninstall script VirtualBox_Uninstall.tool\n\nWelcome to the VirtualBox uninstaller script.\n\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxUSB\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxNetFlt\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxNetAdp\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxDrv\nNo variant specified, falling back to release\nAnd the following KEXTs will be unloaded:\n    org.virtualbox.kext.VBoxUSB\n    org.virtualbox.kext.VBoxDrv\n\nAnd the traces of following packages will be removed:\n    org.virtualbox.pkg.vboxkexts\n    org.virtualbox.pkg.virtualbox\n    org.virtualbox.pkg.virtualboxcli\n\nThe uninstallation processes requires administrative privileges\nbecause some of the installed files cannot be removed by a normal\nuser. You may be prompted <span class=\"token keyword\">for</span> your password now<span class=\"token punctuation\">..</span>.\n\nunloading org.virtualbox.kext.VBoxUSB\nExecuting: /usr/bin/kmutil unload -b org.virtualbox.kext.VBoxUSB\nError <span class=\"token assign-left variable\">Domain</span><span class=\"token operator\">=</span>KMErrorDomain <span class=\"token assign-left variable\">Code</span><span class=\"token operator\">=</span><span class=\"token number\">71</span> <span class=\"token string\">\"Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)\"</span> <span class=\"token assign-left variable\">UserInfo</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>NSLocalizedDescription<span class=\"token operator\">=</span>Kernel request failed: <span class=\"token punctuation\">(</span>libkern/kext<span class=\"token punctuation\">)</span> kext is <span class=\"token keyword\">in</span> use or retained <span class=\"token punctuation\">(</span>cannot unload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>-603946984<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\nAn error occurred durning <span class=\"token string\">'sudo /sbin/kextunload -m org.virtualbox.kext.VBoxUSB'</span>, there should be a message above. <span class=\"token punctuation\">(</span>rc<span class=\"token operator\">=</span><span class=\"token number\">71</span><span class=\"token punctuation\">)</span>\nunloading org.virtualbox.kext.VBoxDrv\nExecuting: /usr/bin/kmutil unload -b org.virtualbox.kext.VBoxDrv\nError <span class=\"token assign-left variable\">Domain</span><span class=\"token operator\">=</span>KMErrorDomain <span class=\"token assign-left variable\">Code</span><span class=\"token operator\">=</span><span class=\"token number\">71</span> <span class=\"token string\">\"Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)\"</span> <span class=\"token assign-left variable\">UserInfo</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>NSLocalizedDescription<span class=\"token operator\">=</span>Kernel request failed: <span class=\"token punctuation\">(</span>libkern/kext<span class=\"token punctuation\">)</span> kext is <span class=\"token keyword\">in</span> use or retained <span class=\"token punctuation\">(</span>cannot unload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>-603946984<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\nAn error occurred durning <span class=\"token string\">'sudo /sbin/kextunload -m org.virtualbox.kext.VBoxDrv'</span>, there should be a message above. <span class=\"token punctuation\">(</span>rc<span class=\"token operator\">=</span><span class=\"token number\">71</span><span class=\"token punctuation\">)</span>\nFailed to unload one or <span class=\"token function\">more</span> KEXTs, please <span class=\"token function\">reboot</span> the machine to complete the uninstall.\n<span class=\"token operator\">==</span><span class=\"token operator\">></span> Purging files <span class=\"token keyword\">for</span> version <span class=\"token number\">6.1</span>.24,145767 of Cask virtualbox\n\nError: virtualbox: Failure <span class=\"token keyword\">while</span> executing<span class=\"token punctuation\">;</span> <span class=\"token variable\"><span class=\"token variable\">`</span>/usr/bin/sudo -E -- /usr/local/Caskroom/virtualbox/6.1.22,144080/VirtualBox_Uninstall.tool --unattended<span class=\"token variable\">`</span></span> exited with <span class=\"token number\">1</span>. Here<span class=\"token string\">'s the output:\n\nWelcome to the VirtualBox uninstaller script.\n\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxUSB\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxNetFlt\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxNetAdp\nNo variant specified, falling back to release\nExecuting: /usr/bin/kmutil showloaded --list-only --bundle-identifier org.virtualbox.kext.VBoxDrv\nNo variant specified, falling back to release\nAnd the following KEXTs will be unloaded:\n    org.virtualbox.kext.VBoxUSB\n    org.virtualbox.kext.VBoxDrv\n\nAnd the traces of following packages will be removed:\n    org.virtualbox.pkg.vboxkexts\n    org.virtualbox.pkg.virtualbox\n    org.virtualbox.pkg.virtualboxcli\n\nThe uninstallation processes requires administrative privileges\nbecause some of the installed files cannot be removed by a normal\nuser. You may be prompted for your password now...\n\nunloading org.virtualbox.kext.VBoxUSB\nExecuting: /usr/bin/kmutil unload -b org.virtualbox.kext.VBoxUSB\nError Domain=KMErrorDomain Code=71 \"Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)\" UserInfo={NSLocalizedDescription=Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)}\nAn error occurred durning '</span><span class=\"token function\">sudo</span> /sbin/kextunload -m org.virtualbox.kext.VBoxUSB<span class=\"token string\">', there should be a message above. (rc=71)\nunloading org.virtualbox.kext.VBoxDrv\nExecuting: /usr/bin/kmutil unload -b org.virtualbox.kext.VBoxDrv\nError Domain=KMErrorDomain Code=71 \"Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)\" UserInfo={NSLocalizedDescription=Kernel request failed: (libkern/kext) kext is in use or retained (cannot unload) (-603946984)}\nAn error occurred durning '</span><span class=\"token function\">sudo</span> /sbin/kextunload -m org.virtualbox.kext.VBoxDrv', there should be a message above. <span class=\"token punctuation\">(</span>rc<span class=\"token operator\">=</span><span class=\"token number\">71</span><span class=\"token punctuation\">)</span>\nFailed to unload one or <span class=\"token function\">more</span> KEXTs, please <span class=\"token function\">reboot</span> the machine to complete the uninstall.</code></pre></div>\n<p>VBoxUSBでエラーなので、類似事例を探すと以下のフォーラムが見つかった。\n<a href=\"https://forum.macbidouille.com/index.php?showtopic=420332\">https://forum.macbidouille.com/index.php?showtopic=420332</a></p>\n<p>接続してるBluetoothデバイスを外すといいと書いてある。ほんとかよと思いながらも接続していたトラックパッドとマウスのBluetoothを設定からペアリング解除し接続しているUSBデバイスを全て外したのち、再起動し\n<code class=\"language-text\">brew update &amp;&amp; brew upgrade</code>するとすんなりアップデートできた。</p>\n<p>Bluetoothのペアリングをやり直して今回は対応終了。</p>\n<h2>最後に</h2>\n<p>ザーッと検索したところ類似のエラーが起こっている人が少なかっので、自分が追加でインストールしているExtention Packに要因があるのかもしれないと思った。検証はしてないので予想。</p>","fileAbsolutePath":"/home/runner/work/blog.magcho.com/blog.magcho.com/src/pages/2021/7/update-virtualbox.md","frontmatter":{"title":"virtualBoxをアップデートした","tags":["homebrew"],"category":"プログラミング","fullDate":"2021-07-26"},"fields":{"lastFileUpdatedAt":"2022-09-17","fileRevisionCount":"1"}},"allMarkdownRemark":{"group":[{"fieldValue":"3D_printer"},{"fieldValue":"AWS"},{"fieldValue":"Apple Watch"},{"fieldValue":"Arduino"},{"fieldValue":"Art-Net"},{"fieldValue":"Chrome"},{"fieldValue":"DMX512"},{"fieldValue":"Docker"},{"fieldValue":"GitHub Actions"},{"fieldValue":"Gulp"},{"fieldValue":"Homebrew"},{"fieldValue":"M5Paper"},{"fieldValue":"Netlify"},{"fieldValue":"Nginx"},{"fieldValue":"OLA"},{"fieldValue":"OSS"},{"fieldValue":"SOAP"},{"fieldValue":"TypeScript"},{"fieldValue":"dotz"},{"fieldValue":"emacs"},{"fieldValue":"gatsby.js"},{"fieldValue":"git"},{"fieldValue":"github"},{"fieldValue":"go"},{"fieldValue":"golang"},{"fieldValue":"homebrew"},{"fieldValue":"lily58"},{"fieldValue":"mac"},{"fieldValue":"macOS"},{"fieldValue":"qmk firmware"},{"fieldValue":"tmux"},{"fieldValue":"use-package"},{"fieldValue":"youtube live"},{"fieldValue":"インターンシップ"},{"fieldValue":"ブログ"},{"fieldValue":"ポリッドスクリーン"},{"fieldValue":"参加レポ"},{"fieldValue":"思ったこと"},{"fieldValue":"生産性のない話"},{"fieldValue":"自作キーボード"},{"fieldValue":"読書"}]}},"pageContext":{"slug":"/2021/7/update-virtualbox/","previous":{"excerpt":"本を読んで誰かにおすすめしたくなったのに、いざ人に会うと本の名前を思い出せなくて困るのでここにメモしていきます。 Atomic Design: 堅牢で使いやすいUIを効率良く設計する https://www.amazon.co.jp/dp/477419705X 小さいところから段々と大きく考えていくAtomic Designの概念の説明に加えて、汎用性のあるコンポーネントの書き方などのサンプルコードがたくさん。 発行年が2018年だからかStorybookのサンプルコードがほとんどビルドできないので自力でちょっと直す必要があるかも。 今まではページの共通部分を切り出してコンポーネントにするぐらいにしか考えていなかったので、UI…","fields":{"slug":"/2021/7/book/"},"frontmatter":{"date":"07/18","title":"最近読んだ本","category":"日記","tags":["読書"]}},"next":{"excerpt":"https://github.com/emacs-ng/emacs-ng 先日emacs-ngという通常のEmacsをforkしRustのWebrenderとDenoのランタイムを加えたプロジェクトを見つけました。READMEに記載されているように、完全な別プロジェクトというわけではなく定期的に本家のEmacsのmasterブランチの変更を取り込み、あくまでも現行のEmacsに新しいアイディアを付与するというプロジェクトらしいです。 現在のemacs-ngは本家の2021年8月24日時点のmasterを取り込んでいるためネイティブコンパイルも利用できます。 Ubuntu向けのバイナリであればGitHub Releaseで配布されていますが、MacOS向けのバイナリは配布されていないので自前でビルドする必要があります。ビルド方法はドキュメントページに記載されていますがPATH…","fields":{"slug":"/2021/10/emacs-ng/"},"frontmatter":{"date":"10/11","title":"emacs-ngをnative comp有効化してmacos向けにビルドした","category":"プログラミング","tags":["emacs"]}}}},"staticQueryHashes":["1324386404","4172131656","848935343"]}