{"expireTime":9007200859665841000,"key":"transformer-remark-markdown-html-97060548b71f322d92bb3fbb2b8bad9a-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjs-titlegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-prismjs-","val":"<h2>状況説明</h2>\n<p>かなり前から homebrew cask を使うと。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew cask list\nWarning: The default Caskroom location has moved to /usr/local/Caskroom.\n\nPlease migrate your Casks to the new location and delete /opt/homebrew-cask/Caskroom,\nor if you would like to keep your Caskroom at /opt/homebrew-cask/Caskroom, add the\nfollowing to your HOMEBREW_CASK_OPTS:\n\n  --caskroom=/opt/homebrew-cask/Caskroom\n\nFor more details on each of those options, see https://github.com/caskroom/homebrew-cask/issues/21913.</code></pre></div>\n<p>こんなのが出てきていた。「cask のバージョンアップでアプリが配置されるディレクトリの場所が変わったから前の場所に置いてたアプリ新しいとこに移動してくれ」っていう話だった気がする、筆者は<s>面倒だから</s>移動しなくても使えるからやっていなかったが、docker がうまくインストールできないので今更対応した。\nやることは簡単、コンソールに書いてある<a href=\"https://github.com/caskroom/homebrew-cask/issues/21913\">URL</a>に書いている通りに進めるだけだが、しかし今回 Thunderbird が再インストールに失敗した。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew cask install thunderbird-ja\n==&gt; Downloading https://download.mozilla.org/?product=thunderbird-45.4.0&amp;os=osx&amp;\nAlready downloaded: /Users/{username}/Library/Caches/Homebrew/Cask/thunderbird-ja--45.4.0.0&amp;os=osx&amp;lang=ja-JP-mac\n==&gt; Verifying checksum for Cask thunderbird-ja\nfatal error</code></pre></div>\n<p>エラー吐いてインストールが止まってしまう。</p>\n<h2>対応</h2>\n<p>上のコンソールで<code class=\"language-text\">Already download</code>ってなってるから以前ダウンロードしてあるインストーラを使おうとしているのだが</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd /Users/{username}/Library/Caches/Homebrew/Cask/\nNo such file or directory</code></pre></div>\n<p>となる。ディレクトリ自体が無いので、移動時にどっかいった可能性が高い。そこで新しいファイルをダウンロードすればいいと思い<code class=\"language-text\">$ brew cask install --force thunderbird-ja</code>としたもののやはり<code class=\"language-text\">Already download</code>となりダウンロードしてくれない。そこで最新バージョンではなく Beta を一旦インストールする。そしてキャッシュを消し、最新バージョンへアップグレードする。とうまくいった。\n事前に cask versions がインストールしてある場合は２つ目の$から始めてもらえばいいかと。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew tap caskroom/versions\n==&gt; Tapping caskroom/versions\nCloning into &#39;/usr/local/Homebrew/Library/Taps/caskroom/homebrew-versions&#39;...\nremote: Counting objects: 209, done.\nremote: Compressing objects: 100% (207/207), done.\nremote: Total 209 (delta 22), reused 15 (delta 0), pack-reused 0\nReceiving objects: 100% (209/209), 76.51 KiB | 0 bytes/s, done.\nResolving deltas: 100% (22/22), done.\nChecking connectivity... done.\nTapped 0 formulae (226 files, 276.3K)\n\n$ brew cask install Thunderbird-beta\n==&gt; Downloading https://ftp.mozilla.org/pub/thunderbird/releases/50.0b2/mac/en-U\n==&gt; Verifying checksum for Cask thunderbird-beta\n==&gt; Moving App &#39;Thunderbird.app&#39; to &#39;/Applications/Thunderbird.app&#39;\n🍺  thunderbird-beta was successfully installed!\n\n$ brew cask uninstall thunderbird-beta\n==&gt; Removing App: &#39;/Applications/Thunderbird.app&#39;\n\n$ brew cask cleanup\n==&gt; Removing cached downloads\n/Users/{username}/Library/Caches/Homebrew/Cask/thunderbird-beta--50.0b2.dmg\n==&gt; This operation has freed approximately 77.8M of disk space.\n\n$ brew cask install thunderbird\n==&gt; Downloading https://ftp.mozilla.org/pub/thunderbird/releases/45.5.1/mac/ja-J\n==&gt; Verifying checksum for Cask thunderbird\n==&gt; Moving App &#39;Thunderbird.app&#39; to &#39;/Applications/Thunderbird.app&#39;\n🍺  thunderbird was successfully installed!</code></pre></div>\n<h2>まとめ</h2>\n<p>brew cask のキャッシュ周りのことを理解しないで使っているので本当はもっといい解決策があるかもしれないが、今回はこれで収まったのでよしとする。\nhomebrew はオープンソースプロジェクトなので Github でどんなことやってるかは確認できるが、仕様変更なんかがあった時にエラー吐いてググって変更あったんだーってなることが多いので、もっと自己防衛のためにもアンテナ張ってなきゃな〜って思った。</p>"}