{"expireTime":9007200859665841000,"key":"transformer-remark-markdown-html-74db476e9bba3dd33f4e92410d3b9490-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjs-titlegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-prismjs-","val":"<h2>demo</h2>\n<p><a href=\"https://asciinema.org/a/339422\"><img src=\"https://asciinema.org/a/339422.svg\" alt=\"asciicast\"></a></p>\n<p>gitignoreを言語とに自動生成してくれるサービスはいくつかありますが、わざわざwebサイトを開くのも面倒です。\n幸いなことにgitignore.ioがapiを提供してくれています、これを利用してgitにサブコマンドを追加しましょう。</p>\n<p>ついでに.gitignoreを上書き・追記の確認・gitignore.ioにテンプレートが存在しない場合はエラーを表示などもあると親切ですね。shにするとこんな感じに。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token assign-left variable\">RES</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -Ls http://gitignore.io/api/$1\t-w <span class=\"token string\">'http_code=%{http_code}'</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$1</span> <span class=\"token operator\">=</span> <span class=\"token string\">'list'</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$RES</span>\"</span>\n\t<span class=\"token builtin class-name\">exit</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token number\">200</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"<span class=\"token variable\">${RES<span class=\"token operator\">##</span>*http_code=}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -f .gitignore <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n\t\t<span class=\"token builtin class-name\">echo</span> -n <span class=\"token string\">\".gitignore already exits. Append ? [y/N/o]: \"</span>\n\t\t<span class=\"token builtin class-name\">read</span> ANS\n\t\t<span class=\"token keyword\">case</span> <span class=\"token variable\">$ANS</span> <span class=\"token keyword\">in</span>\n\t\t\t<span class=\"token punctuation\">[</span>Yy<span class=\"token punctuation\">]</span>*<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Append'</span>\n\t\t\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${RES<span class=\"token operator\">%%</span>http_code*}</span>\"</span> <span class=\"token operator\">>></span> .gitignore\n\t\t\t\t<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token string\">\"\"</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">[</span>Nn<span class=\"token punctuation\">]</span>*<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Cancel'</span>\n\t\t\t\t<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">[</span>Oo<span class=\"token punctuation\">]</span>*<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Overwrid'</span>\n\t\t\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${RES<span class=\"token operator\">%%</span>http_code*}</span>\"</span> <span class=\"token operator\">></span> .gitignore\n\t\t\t\t<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\t     <span class=\"token keyword\">esac</span>\n\t<span class=\"token keyword\">else</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'Created .gitignore'</span>\n\t\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">${RES<span class=\"token operator\">%%</span>http_code*}</span>\"</span> <span class=\"token operator\">></span> .gitignore\n\t<span class=\"token keyword\">fi</span>\n<span class=\"token keyword\">else</span>\n\t<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span> is undefined.\"</span> \n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>.gitconfigに書くとときには全体を関数にする・ダブルクォーテーションをエスケープ・<code class=\"language-text\">echo -n</code>が使えないので<code class=\"language-text\">printf</code>に差し替えなどをすると以下になります。</p>\n<p>書いていて気づいたんですが、#はエスケープせずに動きますね。</p>\n\n        <div class=\"gatsby-code-title code-title\">\n          <span>.gitconfig</span>\n        </div>\n       \n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">[</span>alias<span class=\"token punctuation\">]</span>\n  <span class=\"token comment\"># gitignoreの言語別セットを自動生成</span>\n  ignore = \"<span class=\"token tag\">!f()</span><span class=\"token punctuation\">{</span> RES=$(curl <span class=\"token punctuation\">-</span>Ls http<span class=\"token punctuation\">:</span>//gitignore.io/api/$1  <span class=\"token punctuation\">-</span>w 'http_code=%<span class=\"token punctuation\">{</span>http_code<span class=\"token punctuation\">}</span>'); if <span class=\"token punctuation\">[</span> \\\"$1\\\" = 'list' <span class=\"token punctuation\">]</span>; then echo \\\"$RES\\\";exit 0; fi; if <span class=\"token punctuation\">[</span> 200 = \\\"$<span class=\"token punctuation\">{</span>RES<span class=\"token comment\">##*http_code=}\\\" ]; then if [ -f .gitignore ]; then printf  \\\".gitignore already exits. Append ? [y/N/o]: \\\";read ANS;case $ANS in [Yy]*) echo 'Append';echo \\\"${RES%%http_code*}\\\" >> .gitignore;;\\\"\\\" | [Nn]*)echo 'Cancel';;[Oo]*)echo 'Overwride';echo \\\"${RES%%http_code*}\\\" > .gitignore;;esac;else echo \\\"${RES%%http_code*}\\\" > .gitignore;fi;else echo \\\"$1 is undefined.\\\" ;fi;};f \"</span></code></pre></div>\n<h2>使い方</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> ignore <span class=\"token punctuation\">[</span>language<span class=\"token punctuation\">]</span>\n<span class=\"token function\">git</span> ignore java\n<span class=\"token function\">git</span> ignore node,stylus</code></pre></div>"}