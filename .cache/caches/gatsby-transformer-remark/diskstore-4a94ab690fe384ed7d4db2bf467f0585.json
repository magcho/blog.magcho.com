{"expireTime":9007200859665841000,"key":"transformer-remark-markdown-html-ff73bb9041671ec72238f38a248e3baa-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-prismjs-titlegatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-prismjs-","val":"<p><strong>自分用のメモ記事なので、参考程度にどうぞ。</strong></p>\n<h2>環境</h2>\n<ul>\n<li>MacBookAir macOS Sierra 10.12.2</li>\n<li>homebrew 1.1.5</li>\n<li>homebrew-cask 1.1.5</li>\n<li>mas 1.3.1</li>\n<li>mackup 0.8.15</li>\n</ul>\n<h2>準備編</h2>\n<p>１. 必要なファイルを外部のストレージにコピー</p>\n<ul>\n<li>home ディレクトリをそのままコピーしてしまえばある程度は安心</li>\n<li>プッシュしていない Git プロジェクトはプロジェクトごとコピーしておけばブランチ構造ごとコピーできる</li>\n<li>VirtualBox のエクスポートツールでバックアップしてもいいし、面倒ならフォルダごとコピーして*.vbox ファイルをあとでインポートすれば OK</li>\n</ul>\n<p>２. Dropbox をインストールし同期できるように設定しておく</p>\n<ul>\n<li>インストール済みならばそれで OK</li>\n</ul>\n<p>３. アプリの設定ファイルなどをバックアップ</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew install mackup\n$ mackup backup</code></pre></div>\n<ul>\n<li>エクスポートしたファイル群は Dropbox の共有フォルダにあるので、同期しておく</li>\n<li>/Users/{ユーザー名}/Dropbox/Mackup が作られる</li>\n</ul>\n<p>４. homebrwe, homebrew cask でコマンドでインストールしたアプリの一覧を取得する</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd ~/Dropbox/mac_backup\n$ brew list &gt;&gt; brew_list.txt\n$ brew cask list &gt;&gt; brew_cask_list.txt</code></pre></div>\n<ul>\n<li>Docker は別で再インストールしたほうがいい(Docker tool box)</li>\n</ul>\n<p>５. AppStore でからインストールしたアプリの一覧を取得する</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd ~/Dropbox/mac_backup\n$ brew install mas\n$ mas list &gt;&gt; mas_list.txt</code></pre></div>\n<p>６. インストール一覧からシェルスクリプトを作る</p>\n<p>{% gist 5023c8d38d325b6578112807c1fd46b2 %}</p>\n<p><a href=\"https://gist.github.com/5023c8d38d325b6578112807c1fd46b2\">mac を引っ越す時にアプリを一括インストールするスクリプト</a></p>\n<h2>リストア編</h2>\n<p>１. xcode を appstore からインストール</p>\n<p>２. xcode を起動し xcode comand line tool をインストール</p>\n<p>３. Homebrew をインストール</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></pre></div>\n<p>４. 1password をインストールする</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew cask install 1passwrod</code></pre></div>\n<ul>\n<li><strong>cask は[brew cask]とコマンドを打つと気を利かせて homebrew がインストールしてくれるので、自分でやる必要はない</strong></li>\n<li>自分は iPhone とも同期しているので icloud 同期で設定</li>\n</ul>\n<p>５. Dropbox をインストールしファイルを同期する</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew cask install dropbox</code></pre></div>\n<p>６. mackup をインストールし、復元</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ brew install mackup\n$ mackup restore</code></pre></div>\n<p>７. 準備編(上記)で作ったシェルスクリプトを実行して brew と cask 系を一括インストール</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd /Users/{ユーザー名}/Dropbox/mac_backup\n$ sudo sh brew-install-list.sh</code></pre></div>\n<p>８. atom エディタのアドオンと設定を復元</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ apm install atom-settings\n[atom内のコマンドで（cmd+shift+p)] -&gt; [sync-settings:restore]とタイプしEnter</code></pre></div>\n<ul>\n<li>apm コマンドが使えない場合は一度 atom を起動し [Atom] -> [Install Shell Commands]を押し apm が使えるようにする。</li>\n<li>復元中に、gist のリストとパッケージの最新バージョンが違ったりすると警告が出るので、各自判断で手動ならインストールできます。</li>\n<li>Settings > Packages を見ると atom の再起動が必要なパッケージはダウンロードされた時点で一時停止しているので、インストールを押してやれば OK です。</li>\n</ul>\n<p>９. Git 系のセットアップ</p>\n<ul>\n<li>git は sourcetree 内蔵ではなく、自分で入れたものを使っているので brew でインストール後 Sourcetree の設定でシステムの Git に切り替えます</li>\n<li>Github と Bitbucket でログインする。２段階認証にどちらも対応してるのでアクセストークンをあれこれする必要はなく、ID と PW でログインして、携帯などで 6 桁の数字を確認して２段階認証しておきましょう</li>\n<li>Ouath か Basic で認証したり SSH キーを認証したりしておく。</li>\n</ul>\n<h2>後記</h2>\n<p>アプリのインストール管理は brew-file とやらでできるらしいので、もっと早く知りたかった。それと、1password って appstore からだと 7,800 円するけど、cask なら試用版をメール認証なしでインストールできるっていう発見。</p>"}