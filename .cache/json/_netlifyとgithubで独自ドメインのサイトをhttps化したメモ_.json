{"data":{"site":{"siteMetadata":{"title":"magchoの雑記","author":"magcho"}},"markdownRemark":{"id":"050cff8d-d744-577d-b976-795644a3c3a7","excerpt":"情報が古く、執筆時の Netlifty の UI 等が変わっています。ご注意を 事の発端 IOS 11 ｷﾀ ━(ﾟ ∀ ﾟ)━! 　 Safari からカメラの映像が取得できる！　これでアプリではなくブラウザから AR できるようになった！と喜んでいたら、このカメラの api…","html":"<p><strong>情報が古く、執筆時の Netlifty の UI 等が変わっています。ご注意を</strong></p>\n<h2>事の発端</h2>\n<p>IOS 11 ｷﾀ ━(ﾟ ∀ ﾟ)━! 　 Safari からカメラの映像が取得できる！　これでアプリではなくブラウザから AR できるようになった！と喜んでいたら、このカメラの api は https じゃないとセキュリティ的な問題で動かないのである。</p>\n<p>Github pages で独自ドメインでホスティングしているサイトを HTTPS にしたいけどお金はない。</p>\n<p>すでに導入レポは検索すればいくつも見つかるものの、どうも日本語の情報が少ないのでメモすることにした。</p>\n<h2>使ったもの</h2>\n<ul>\n<li>Github</li>\n<li>Netlify</li>\n<li>お名前.com</li>\n</ul>\n<h2>手順</h2>\n<ol>\n<li>お名前.com でドメインを取得します。</li>\n<li>Github に公開するサイトのファイル一式を push しておきます。</li>\n</ol>\n<p>一度 Github pages で公開してみて問題がないことを確認しておきましょう。設定で有効化して、HTTPS にチェックを入れれば<code class=\"language-text\">https://&lt;username&gt;.github.io/&lt;repository name&gt;</code>でアクセスできます。</p>\n<ol start=\"2\">\n<li>Netlify に登録します。\n<a href=\"https://www.netlify.com/\">https://www.netlify.com/</a>\nGithub アカウントでログインし、先ほど push したリポジトリを選択し、デプロイしましょう。</li>\n<li>Netlify の site name を変更しましょう</li>\n</ol>\n<p>デプロイをするとデフォルトでランダムな英単語が割り当てられるので、変更しなくても問題はないが変更しておきましょう。</p>\n<p><code class=\"language-text\">General -&gt; Setting -&gt; Site details -&gt; Change site name</code>から設定します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ec0a8f3600d7654c9c206ef08911ec4/ebf47/20171015014625.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAARlAAAEZQAGA43XUAAACC0lEQVQ4y5VTS28SURSeX2ixiSzKI+GpAmq6ZOUOdyx4/gM2YHk0wcTELmxiXLgymooxBLCWFsTO494Z6DB8nnuZTqZq0nqTL+fcc8797nnkKIlkCg+CQewEAri/u4t7OwF5j0ajd0aEEI/HkU6noSRTaRSLRVSrVVQqFZTLZanX63Wp34ZSqYRarYZ8Po9EIgElm8vhUlVxejaVODu/8PA/5+DgJSKRCJTHmSw0TYOq6ZgvFtB03YVxJ6L12pGy2WwiFAptCQ3DADdNMM5hMCYJdbKp8qMt/HcRcx0r7OK0Wi2Ew2E3Q8pGZyKAw7SWFEzkpiV1TtJwfbrByWfB2QAbgpDXGfoIc2D6AoZ2AW78xMq8/AvA0geLmEwCJzYO50oXhftKzj4B06Y4//EVk/EXTEYn+D7ZytHwM+ETlmzm4cqcw7YWcFa/AFvFekkSTGYoh/Iok4FFJbod3tbi6pwzCcYMaovonyrvpslh2ysK2sBZ217JkjCXzWE8n+Fo/A3HkyHenY7wejjAYDGTgTYRW9RLx3FuTHdDHzvURNu2vSlLwv2nz/BxPsX+8Ss8f/8GLz68Reaoi95o4D0WA7ntdDpd7O1RD1Pph2g0Gui02+h2u+To4JBkz9WF7bDX83xC+tGmd/1+H4VCAbFYDEoimUSQdlfuL6UcodGH/0DoH7YbfpquIBO7/Btax1H7Lru47wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"null\"\n        title=\"null\"\n        src=\"/static/3ec0a8f3600d7654c9c206ef08911ec4/fcda8/20171015014625.png\"\n        srcset=\"/static/3ec0a8f3600d7654c9c206ef08911ec4/12f09/20171015014625.png 148w,\n/static/3ec0a8f3600d7654c9c206ef08911ec4/e4a3f/20171015014625.png 295w,\n/static/3ec0a8f3600d7654c9c206ef08911ec4/fcda8/20171015014625.png 590w,\n/static/3ec0a8f3600d7654c9c206ef08911ec4/ebf47/20171015014625.png 688w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>カスタムドメインを設定しましょう</li>\n</ol>\n<p><code class=\"language-text\">Domain management -&gt; Domains -&gt; Custom domain\\</code> に取得しておいたドメインを設定します。\nここで、Netlify は www 付きのドメインにすることを勧めてきます。DoS 攻撃から守りやすいとか、ロードが早いとか色々恩恵があるらしいのですが、それよりも URL が短くなる方がいいなって思ったので、自分は www なしにしました。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/46e2599a9da03a145bcf95a20b3387d7/d67fd/20171015015607.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAARlAAAEZQAGA43XUAAABd0lEQVQoz6WTS07DMBCGc1EkFhyAJSdCsGNBxYoFZyiCVi2qEH0mdpI2ftvpz9gBhESoKoj0acbW+PeMZ5JZHzCbL/E8nWH0MkPVSGgXII2Dsv4Labt13Bfa/koW2j2mr28YjicYjiZYbAoU1TaRl5E6EdcbXqULD4lmjjKMjg1tQlEm8UCjNGohUe0EahLZCpXE4v5nTB9J0DiPsqrAy46Cc1hr8Zcv03RbFGVUzorKXecMi9UGSv9T0BkBo7Ywegsta+yDBloDJHs8SdB7g6ZegPM1GFsiz+dQsgL25jB9gvH9vHeAqeBlCSc4gup8Izk0raO1qoRqWPKVYGkfQfwgc6FrypjlGK4XGBVrPG5WeMpX1DVDlwVossbQJLj4PB6O4qPtfcNAo7KjA+f3Nzi5vcTFwwCngyuc3V0jl00KYmWJgvHjmhIbEueKS4m8aYhdskxQkygjm7IJiehbysxTVbEy30OWhpqC+76W/qKQaD/47vfzDusooevZevQHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"null\"\n        title=\"null\"\n        src=\"/static/46e2599a9da03a145bcf95a20b3387d7/fcda8/20171015015607.png\"\n        srcset=\"/static/46e2599a9da03a145bcf95a20b3387d7/12f09/20171015015607.png 148w,\n/static/46e2599a9da03a145bcf95a20b3387d7/e4a3f/20171015015607.png 295w,\n/static/46e2599a9da03a145bcf95a20b3387d7/fcda8/20171015015607.png 590w,\n/static/46e2599a9da03a145bcf95a20b3387d7/d67fd/20171015015607.png 670w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>設定後、Netlify の DNS を利用するので <code class=\"language-text\">Use Netlify DNS</code> を押します。４つ URL が表示されると思います。これは次の作業で使うので覚えときましょう。</p>\n<ol start=\"5\">\n<li>ドメインの設定をしましょう</li>\n</ol>\n<p>今度はお名前.com でドメインの設定をしていきます。</p>\n<p>ログイン後、<code class=\"language-text\">ネームサーバーの設定 -&gt; DNS 関連機能の設定</code> に A レコードと CNAME を追加します。</p>\n<ul>\n<li>A レコードで 104.198.14.52 を追加します。</li>\n<li>CNAME に www をつけて Netlify で設定した URL を追加します。<code class=\"language-text\">&lt;site name&gt;.netlify.com</code>です</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4fc4d77d4544eb9f26887fd2c831177/2bef9/20171015021014.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAARlAAAEZQAGA43XUAAABQElEQVQoz6VRyW7CMBDN/38MV44gLhyjJiUEEgzZF5KSzbGd7dVxRc+VOtJo/MZPbzbN8XLkWYbV5nnGf01LkhjujeBsX5Tr+geujgtKKZZlwTRNGMdR+Z8EvSCSAgR+KIXJA+bJhn114QcxgihBGKc4Xxz196ob9EyA9hwt7VFJXNUt2q5H3XQyUmiPIIFzD5A8XwjTEnH+pTDxf/JelOHTvv2+70Gq4s2LYFhX+efC9WKcLgQO8aHpuo7NZoPj8Sh3uGCWY77HK4oCnAuJJxWbtpWrWLtpVG413lM4KUPLF7miCVpRltjtdthutzAMQxHrukbXdaiqGkEYYr/f43A44OF5WPliGNQB1+K0a0FyhoZNmMYBmhBCES3LAiEEgySvXfQ9A+NcCZimqfz5LFShdYK3IJMdRiUDFRLLA34D9fAQ9D5cKUEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20171015021014\"\n        title=\"20171015021014\"\n        src=\"/static/f4fc4d77d4544eb9f26887fd2c831177/fcda8/20171015021014.png\"\n        srcset=\"/static/f4fc4d77d4544eb9f26887fd2c831177/12f09/20171015021014.png 148w,\n/static/f4fc4d77d4544eb9f26887fd2c831177/e4a3f/20171015021014.png 295w,\n/static/f4fc4d77d4544eb9f26887fd2c831177/fcda8/20171015021014.png 590w,\n/static/f4fc4d77d4544eb9f26887fd2c831177/efc66/20171015021014.png 885w,\n/static/f4fc4d77d4544eb9f26887fd2c831177/2bef9/20171015021014.png 1024w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>次に、DNS を変更します。</p>\n<p><code class=\"language-text\">ネームサーバーの設定 -&gt; ネームサーバーの変更 -&gt; 他社のネームサーバーを利用</code> に 4 で Netlify にドメインを設定した時に出てきた４つの DNS の URL を設定します。人によってこの URL は異なるみたいです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9fc668f2ec7952ad1ad7c0513afc169/d125e/20171015021555.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAARlAAAEZQAGA43XUAAACdklEQVQ4y5WUa2/aMBiF8/9/RzVt2qpV+7pPW/upW6e0BXJzSIhzc26QAgGSwNlrQ+lFrFotHWyS+PHJ8eto80WDCU/gTSLwSMCncRil+Pb9EmefL/Dx/AJnn87x4ctX/PqjQ7ZN26LtupdqO+x2O2h932Gz2aiL+77FW01Oeqtp88UCHnPhWRZcw1TybBueG2NwO4Kh60iCANV0hv9pmvyZ+R7GVz9hXf6AQ+J3t3hIIlRhgJIHWOQZtuS8W69Ia9Vj2/8bWKcJhGMjsi34wwECYwROLhPXRcQcJXZ/D26ZCEwDwmWoswzNaoXlssGaFtlut0/AMRtjaFiIkpQ2KIRh2RgMR7j+fQPDtOFPAtqoGFFMm+dPkKRCjZk7Pv5PSS1tlgLmIgMnUJ7nmM5mCGjsup7SsmnwnqaAzXIJHkbIshwNAYqihDv2kAqB+uEBMTnPiwLz+Vw5EWRAPpOkKRK6t6D5R+Bi1SuILJnpdKoe7qiE3iqbx9J5Pj4C06IG8yijWMD1ORwmneW06gqrQ+gy/L7vKfidCv+U+n67L2xOoJt7C/rQxp3lwTYYTNNFKAqUZUmOBWVbEHx9OBHtCe0PhYRq8qhd60PoAxv6iMEgsEXAOK9QVZXKTvZqgnLSn5SMSTrVAnJosACOH8H2IjheCGvMEWclZrTjZVlRtrODg/3Erutfiq5Ll3JBLUxyAoRwJjFBY9VbBI5Fibqu6chNCVwTsN0DT0hebx8d8jiD6fInh9TLBaK0oNIoVOmoDOWRO0zsTkhmqTLkB4fslcOUMpQrPr5S9/pz9UzynvykqVeWTiRAAUnsABTF/uuye8cpkWXzF7AhDbVnvx6XAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20171015021555\"\n        title=\"20171015021555\"\n        src=\"/static/c9fc668f2ec7952ad1ad7c0513afc169/fcda8/20171015021555.png\"\n        srcset=\"/static/c9fc668f2ec7952ad1ad7c0513afc169/12f09/20171015021555.png 148w,\n/static/c9fc668f2ec7952ad1ad7c0513afc169/e4a3f/20171015021555.png 295w,\n/static/c9fc668f2ec7952ad1ad7c0513afc169/fcda8/20171015021555.png 590w,\n/static/c9fc668f2ec7952ad1ad7c0513afc169/d125e/20171015021555.png 737w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>設定が反映されると、独自ドメインにアクセスすると HP が表示されると思います。このままではまだ HTTP です。いよいよ次で HTTPS になります。</p>\n<ol start=\"6\">\n<li>Netlify で SSL を有効化しましょう</li>\n</ol>\n<p>Netlify で <code class=\"language-text\">Domain management -&gt; Domains -&gt; HTTPS -&gt; SSL/TLS certificate</code>で <code class=\"language-text\">Verify DNS configration</code>をクリックし<code class=\"language-text\">Let&#39;s Encypt certificate</code>をクリックです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc942cf6932ac803c266863c01f719ba/a1dd2/20171015022037.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAARlAAAEZQAGA43XUAAABSklEQVQoz52R646bMBSEef8X3P7oql0lSsAY8B2MnczOMdpLKlWpivQxx9iMz6ULa8a5VzhdFVIuiNuOmHfGh36sm37j46z8H7YvusTXj9ffePn5C2o2GBeLYTItVrOFNu5TBdkXHaYFswvN0H+jy6ViI6IrM9n2Qi2Qiw4ko/ywlnMSy7ltrw90pd5gncf5coUaNd5OZ+hpxv8+nWS05UxT14wFYy1iTAjEB5YVI5z3TfO+PzeM64peKSityYRLP3A9YhhHXAfV4kvfo2e8GIvE83KhqFxSb7c/MmQ/rHXwPhAP7w4sfw7yjbEjMdEoJWYbPjMPIaKU8mW4cxiRJesYMJEx+oasdTh08I6DK//WQzHcaoFdEwxvNOkg7LkhsexlGkr/nvZwZcm1VpZssSymodnHleVVmkycuGHpMig9z5iWBff7/a+G73qCCJfAtvHoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"20171015022037\"\n        title=\"20171015022037\"\n        src=\"/static/fc942cf6932ac803c266863c01f719ba/fcda8/20171015022037.png\"\n        srcset=\"/static/fc942cf6932ac803c266863c01f719ba/12f09/20171015022037.png 148w,\n/static/fc942cf6932ac803c266863c01f719ba/e4a3f/20171015022037.png 295w,\n/static/fc942cf6932ac803c266863c01f719ba/fcda8/20171015022037.png 590w,\n/static/fc942cf6932ac803c266863c01f719ba/a1dd2/20171015022037.png 838w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>お疲れ様でした、試しにhttpsでアクセスしてみましょう、表示されれば成功です。セキュリティーがどーたらと表示されてしまう場合はしばらく待ってれば反映されるっぽいです。</p>\n<p>最後の仕上げとして、http でアクセスがあった時に https にリダイレクトさせたいので<code class=\"language-text\">Force TLS connections</code>を有効化して完了です。そんなの表示されてないよって時はリロードするとたぶん出てきます。</p>\n<h2>コメント</h2>\n<p>ドメイン周りの設定は順番が大切なので、3 回ぐらい失敗してサイトを消してやり直してを繰り返してしまった。勉強不足だ。\nそんなこんなで、準備は整ったので、AR.js とやらに挑戦します。</p>","frontmatter":{"title":"NetlifyとGithubで独自ドメインのサイトをHTTPS化したメモ","tags":["Netlify"],"category":"プログラミング","date":"10/15"}},"allMarkdownRemark":{"group":[{"fieldValue":"AWS"},{"fieldValue":"Apple Watch"},{"fieldValue":"Arduino"},{"fieldValue":"Art-Net"},{"fieldValue":"Chrome"},{"fieldValue":"DMX512"},{"fieldValue":"Docker"},{"fieldValue":"GitHub Actions"},{"fieldValue":"Gulp"},{"fieldValue":"Homebrew"},{"fieldValue":"Netlify"},{"fieldValue":"OLA"},{"fieldValue":"OSS"},{"fieldValue":"dotz"},{"fieldValue":"emacs"},{"fieldValue":"gatsby.js"},{"fieldValue":"git"},{"fieldValue":"go"},{"fieldValue":"golang"},{"fieldValue":"homebrew"},{"fieldValue":"lily58"},{"fieldValue":"mac"},{"fieldValue":"macOS"},{"fieldValue":"qmk firmware"},{"fieldValue":"tmux"},{"fieldValue":"use-package"},{"fieldValue":"youtube live"},{"fieldValue":"ブログ"},{"fieldValue":"ポリッドスクリーン"},{"fieldValue":"思ったこと"},{"fieldValue":"生産性のない話"},{"fieldValue":"自作キーボード"}]}},"pageContext":{"slug":"/netlifyとgithubで独自ドメインのサイトをhttps化したメモ/","previous":{"excerpt":"買ったやつ http://amzn.asia/b5Kk31r インストールしたドライバー http://www.wch.cn/download/CH341SER_MAC_ZIP.html","fields":{"slug":"/arduino互換品のドライバーメモ/"},"frontmatter":{"date":"08/16","title":"Arduino互換品のドライバーメモ","category":"電子工作","tags":["Arduino"]}},"next":{"excerpt":"部品 Arduino UNO 互換品 RS485 モジュール XLR コネクター 配線  スケッチ DmxSimpleをとりあえず書き込んでサンプルを動かしてみた。\nこのライブラリデフォルトの Pin アサインは上の図の通りだが、コード内で別途指定すれば変更できるっぽい。 SerialToDmxは PC からのシリアル画面からって感じで送ってやれば送信できる、5ch に 255 を出力するとと送信すればいいらしい。 FadeUpは Pin アサインがデフォルトから変更されているので、 しとけばとりあえず動いた。 LTC485 の仕様としてこの図では DE を Arduino のデジタル GPIO のアウトを使って 5V を印加している。この DE を HIGH にすると送信 LOW にすると受信モードになる","fields":{"slug":"/格安arduinoでdmxを送信する/"},"frontmatter":{"date":"01/01","title":"格安ArduinoでDMXを送信する","category":"電子工作","tags":["DMX512"]}}}}