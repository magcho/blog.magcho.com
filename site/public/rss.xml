<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[magchoの雑記]]></title><description><![CDATA[magchoの日記とか思いつきを記録するブログ]]></description><link>https://blog.magcho.com</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 09 Nov 2020 13:56:17 GMT</lastBuildDate><item><title><![CDATA[Lily58にレイヤーを追加する]]></title><description><![CDATA[自分は Lily58 Pro という左右分割の自作キーボードを使っています。ErgoDoxよりは小さくCorneよりは大きいのでとても自分に合っています。 Lily58のデフォルトFWにはRaise/Lower/Adjustの…]]></description><link>https://blog.magcho.com/2020/6/lily58-add-layer/</link><guid isPermaLink="false">https://blog.magcho.com/2020/6/lily58-add-layer/</guid><pubDate>Sat, 20 Jun 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;自分は &lt;a href=&quot;https://yuchi-kbd.hatenablog.com/entry/2018/12/23/214342&quot;&gt;Lily58 Pro&lt;/a&gt; という左右分割の自作キーボードを使っています。ErgoDoxよりは小さくCorneよりは大きいのでとても自分に合っています。&lt;/p&gt;
&lt;p&gt;Lily58のデフォルトFWにはRaise/Lower/Adjustの3レイヤーが定義されていますが、最近会計処理を多くやることになってテンキーが欲しくなったので追加しようと思います。Lily58にはオプションとしてOLEDがつきます、デフォルトでレイヤー名やキー入力の履歴を表示してくれる親切設計でした。&lt;/p&gt;
&lt;h2&gt;keymap.cにテンキーレイヤーを追加する&lt;/h2&gt;
&lt;p&gt;レイヤー定義は&lt;code class=&quot;language-text&quot;&gt;keymap.c&lt;/code&gt;に書き込みます。&lt;/p&gt;
&lt;p&gt;レイヤーの切り替え方は何通りかあります、デフォルトのRaise/Lowerは押している時だけレイヤーを切り替える方式です。そのレイヤーのキーを１つタイプするだけならば便利な方式ですが、テンキーレイヤー等では連続して数値を入力し続けたいことがほとんどなので今回は一回押したらレイヤーを切り替え、もう一度押すとレイヤーが戻るtoggle方式にしました。&lt;/p&gt;
&lt;p&gt;まず、以下のようにNUMBERレイヤーを定義します。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymap.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt; &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;_QWERTY &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
 &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;_LOWER &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
 &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;_RAISE &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
 &lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;_ADJUST &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;#define _NUMBER &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymap.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;	&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;_ADJUST&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;LAYOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_TOG&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_HUI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_SAI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_VAI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; XXXXXXX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_MOD&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_HUD&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_SAD&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RGB_VAD&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		_______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;


&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* NUMBER
+     * ,-----------------------------------------.                    ,-----------------------------------------.
+     * |      |      |      |      |      |      |                    |      |      |      |      |      |      |
+     * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
+     * |      |      |      |      |      |      |                    |      |   7  |   8  |   9  |BSPACE|      |
+     * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
+     * |      |      |      |      |      |      |-------.    ,-------|   =  |   4  |   5  |   6  |   +  |      |
+     * |------+------+------+------+------+------|       |    |NUMBER |------+------+------+------+------+------|
+     * |      |      |      |      |      |      |-------|    |-------|   0  |   1  |   2  |   3  |   -  |      |
+     * `-----------------------------------------/       /     \      \-----------------------------------------&apos;
+     *                   | LAlt | LGUI |LOWER | /Space  /       \Enter \  |RAISE |BackSP| RGUI |
+     *                   |      |      |      |/       /         \      \ |      |      |      |
+     *                   `----------------------------&apos;           &apos;------&apos;&apos;--------------------&apos;
+		 */&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;	 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;		 &lt;span class=&quot;token function&quot;&gt;LAYOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;		 _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   KC_PDOT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_P7&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P8&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P9&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_BSPC&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;		 _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;                   KC_PEQL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_P4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P5&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;    KC_P6&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  KC_PPLS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;		 _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_P0&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_P3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;   KC_PMNS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _______&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;		 KC_LSFT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_LGUI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_SPC&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_ENT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_RGUI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_RALT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;NUMBERレイヤーへtoggleするためのキーをQWERTYレイヤーに定義します。右手側の一番左の１つだけ横に出ているキーに割り当てます。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;TG(レイヤー番号)&lt;/code&gt;のように割り当て、切り替え先のレイヤーには&lt;code class=&quot;language-text&quot;&gt;KC_TRANSPARENT&lt;/code&gt;かそのエイリアスである&lt;code class=&quot;language-text&quot;&gt;_______&lt;/code&gt;を割り当ておきます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymap.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/* QWERTY
	 * ,-----------------------------------------.                    ,-----------------------------------------.
	 * |  `   |   1  |   2  |   3  |   4  |   5  |                    |   6  |   7  |   8  |   9  |   0  |BSPACE|
	 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
	 * | Tab  |   Q  |   W  |   E  |   R  |   T  |                    |   Y  |   U  |   I  |   O  |   P  |BSPACE|
	 * |------+------+------+------+------+------|                    |------+------+------+------+------+------|
	 * |LCTRL |   A  |   S  |   D  |   F  |   G  |-------.    ,-------|   H  |   J  |   K  |   L  |   ;  |  &apos;   |
	 * |------+------+------+------+------+------|CSLOCK |    |NUMBER |------+------+------+------+------+------|
	 * | LAlt |   Z  |   X  |   C  |   V  |   B  |-------|    |-------|   N  |   M  |   ,  |   .  |   /  |RShift|
	 * `-----------------------------------------/       /     \      \-----------------------------------------&apos;
	 *                   |Lshift| LGUI |LOWER | /Space  /       \Enter \  |RAISE | RGUI | RAlt |
	 *                   |      |      |      |/       /         \      \ |      |      |      |
	 *                   `----------------------------&apos;           &apos;------&apos;&apos;--------------------&apos;
	 */&lt;/span&gt;

    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;_QWERTY&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;LAYOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_GRV&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_4&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_5&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_6&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_7&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_8&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_9&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_0&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SUSHI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		KC_TAB&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_Q&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_W&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_E&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_R&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_T&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_Y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_U&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_I&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_O&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_P&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_MINS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		KC_LCTRL&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_A&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_S&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_D&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_F&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_G&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_H&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_J&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_K&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_L&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_SCLN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_QUOT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;\
		KC_LALT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_Z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_X&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_C&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_V&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_B&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_CAPS&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TG&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_N&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_M&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_COMM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_DOT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_SLSH&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_RSFT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; \
		KC_LSFT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_LGUI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_SPC&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_ENT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_RGUI&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; KC_RALT&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これでNUMBERレイヤーが動作します。&lt;/p&gt;
&lt;h2&gt;3層目のレイヤーを使う&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.qmk.fm/#/feature_layers&quot;&gt;qmk firmwareのドキュメント&lt;/a&gt; にもありますがレイヤーは階層構造を持ち&lt;code class=&quot;language-text&quot;&gt;KC_TRANSPARENT&lt;/code&gt;で下のレイヤーを透過的に利用できます。&lt;/p&gt;
&lt;p&gt;自分はRaizeレイヤーに矢印キーを割り当てているのでNUMBERレイヤーの時にLOWERキーを押したらLOWERレイヤーに一時的に切り替わってくれると嬉しいです。
つまり、QWERTY -&gt; NUMBER -&gt; LOWER とレイヤーを変化されているのでQWERTYから数えて3層目のレイヤーです。&lt;/p&gt;
&lt;p&gt;Lily58ではQERTYレイヤ状態でLOWERキー押下時に&lt;code class=&quot;language-text&quot;&gt;layer_on(_LOWER)&lt;/code&gt;でレイヤーを切り替えています。この関数の実装上今回のケースでは期待しない動作になります。
今回はRaise/Lowerキーの押下/押上時に処理を追加して対応します。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymap.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; bool prelayer_numberlayer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

bool &lt;span class=&quot;token function&quot;&gt;process_record_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;uint16_t keycode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; keyrecord_t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;record&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; LOWER&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			is_prelayer_numberlayer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;layer_state_is&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token function&quot;&gt;layer_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;update_tri_layer_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;update_tri_layer_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;is_prelayer_numberlayer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;layer_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		
	&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; RAISE&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			is_prelayer_numberlayer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;layer_state_is&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token function&quot;&gt;layer_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_RAISE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;update_tri_layer_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_RAISE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;update_tri_layer_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_LOWER&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _RAISE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;is_prelayer_numberlayer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;layer_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_NUMBER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上の実装で3層目のレイヤーも期待する動作になります。&lt;/p&gt;
&lt;h2&gt;OLEDに表示されるレイヤー名を修正する&lt;/h2&gt;
&lt;p&gt;Lily58のオプションで付けられるOLEDにはレイヤー名や入力履歴等が表示されています。OLED周りの実装はlibに入っています。ここに直接手を加えていきます。&lt;/p&gt;
&lt;p&gt;レイヤー名の表示はkeymap.cの&lt;code class=&quot;language-text&quot;&gt;read_layer_state()&lt;/code&gt;で呼び出されています。&lt;/p&gt;
&lt;p&gt;この関数の実装にNUMBERレイヤーに関する記述をすると&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;lib/layer_state_reader.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;L_BASE &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;L_LOWER&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;L_RAISE&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;L_ADJUST&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token function&quot;&gt;L_ADJUST_TRI&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;L_ADJUST &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; L_RAISE &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; L_LOWER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;#define &lt;span class=&quot;token function&quot;&gt;L_NUMBER&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;lib/layer_state_reader.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read_layer_state&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;layer_state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; L_NUMBER&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;            &lt;span class=&quot;token function&quot;&gt;snprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;layer_state_str&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;layer_state_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Layer: Number&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;            &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;snprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;layer_state_str&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;layer_state_str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Layer: Undef-%ld&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; layer_state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; layer_state_str&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これでOLEDにLayer: Numberと表示されるようになります。めでたしめでたし。&lt;/p&gt;
&lt;h2&gt;おまけ&lt;/h2&gt;
&lt;p&gt;qmkではレイヤーの状態を&lt;code class=&quot;language-text&quot;&gt;unit32_t layer_state&lt;/code&gt; で保持し、下位ビットから順にレイヤー1・レイヤー2を割り当ててそのビットが立っているかどうかを判定しているらしい。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;layer_on(LAYER)&lt;/code&gt;は指定したビットを立てるわけではなく、現在の&lt;code class=&quot;language-text&quot;&gt;layer_state&lt;/code&gt;を左に指定量ビットシフトしている。確かに&lt;code class=&quot;language-text&quot;&gt;keymap.c&lt;/code&gt;で&lt;code class=&quot;language-text&quot;&gt;#define _NUMBER 4&lt;/code&gt;を定義しましたね。当然&lt;code class=&quot;language-text&quot;&gt;layer_off(LAYER)&lt;/code&gt;は右に指定量ビットシフトです。&lt;/p&gt;
&lt;p&gt;今までLily58にFWを書き込む時には繋いでるTRRSを抜いて書き込んでいたのですが、軽く調べた感じ繋ぎっぱなしで書き込んで問題なさそう(私は設計者ではないので信憑性のない情報)
&lt;a href=&quot;https://github.com/kata0510/Lily58/tree/master/Pro/PCB&quot;&gt;回路図&lt;/a&gt; を見た感じUSBの通信線とは別のピンでPro Micro同士を繋いでいます。TRRSのアサインは先端からUSBからのVCC/GND/通信線/NCっぽい。ProMicroの仕様書をざっと見た感じFW書き込み時にシリアルピンは影響なさそうなのでTRRSを抜かずに書き込めそうです。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[.gitignoreを自動生成するサブコマンドを作ろう]]></title><description><![CDATA[demo asciicast gitignoreを言語とに自動生成してくれるサービスはいくつかありますが、わざわざwebサイトを開くのも面倒です。
幸いなことにgitignore.ioがapiを提供してくれています、これを利用してgit…]]></description><link>https://blog.magcho.com/2020/6/gitignore/</link><guid isPermaLink="false">https://blog.magcho.com/2020/6/gitignore/</guid><pubDate>Sun, 14 Jun 2020 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;demo&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://asciinema.org/a/339422&quot;&gt;&lt;img src=&quot;https://asciinema.org/a/339422.svg&quot; alt=&quot;asciicast&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;gitignoreを言語とに自動生成してくれるサービスはいくつかありますが、わざわざwebサイトを開くのも面倒です。
幸いなことにgitignore.ioがapiを提供してくれています、これを利用してgitにサブコマンドを追加しましょう。&lt;/p&gt;
&lt;p&gt;ついでに.gitignoreを上書き・追記の確認・gitignore.ioにテンプレートが存在しない場合はエラーを表示などもあると親切ですね。shにするとこんな感じに。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;RES&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; -Ls http://gitignore.io/api/$1	-w &lt;span class=&quot;token string&quot;&gt;&apos;http_code=%{http_code}&apos;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;list&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
	&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$RES&lt;/span&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${RES&lt;span class=&quot;token operator&quot;&gt;##&lt;/span&gt;*http_code=}&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; -f .gitignore &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
		&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; -n &lt;span class=&quot;token string&quot;&gt;&quot;.gitignore already exits. Append ? [y/N/o]: &quot;&lt;/span&gt;
		&lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; ANS
		&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$ANS&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Yy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;*&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Append&apos;&lt;/span&gt;
				&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${RES&lt;span class=&quot;token operator&quot;&gt;%%&lt;/span&gt;http_code*}&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; .gitignore
				&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Nn&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;*&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Cancel&apos;&lt;/span&gt;
				&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Oo&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;*&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Overwrid&apos;&lt;/span&gt;
				&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${RES&lt;span class=&quot;token operator&quot;&gt;%%&lt;/span&gt;http_code*}&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; .gitignore
				&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	     &lt;span class=&quot;token keyword&quot;&gt;esac&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
		&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Created .gitignore&apos;&lt;/span&gt;
		&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${RES&lt;span class=&quot;token operator&quot;&gt;%%&lt;/span&gt;http_code*}&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; .gitignore
	&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
	&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$1&lt;/span&gt; is undefined.&quot;&lt;/span&gt; 
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.gitconfigに書くとときには全体を関数にする・ダブルクォーテーションをエスケープ・&lt;code class=&quot;language-text&quot;&gt;echo -n&lt;/code&gt;が使えないので&lt;code class=&quot;language-text&quot;&gt;printf&lt;/code&gt;に差し替えなどをすると以下になります。&lt;/p&gt;
&lt;p&gt;書いていて気づいたんですが、#はエスケープせずに動きますね。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;.gitconfig&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;alias&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# gitignoreの言語別セットを自動生成&lt;/span&gt;
  ignore = &quot;&lt;span class=&quot;token tag&quot;&gt;!f()&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; RES=$(curl &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Ls http&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//gitignore.io/api/$1  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;w &apos;http_code=%&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;http_code&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&apos;); if &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; \&quot;$1\&quot; = &apos;list&apos; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;; then echo \&quot;$RES\&quot;;exit 0; fi; if &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; 200 = \&quot;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;RES&lt;span class=&quot;token comment&quot;&gt;##*http_code=}\&quot; ]; then if [ -f .gitignore ]; then printf  \&quot;.gitignore already exits. Append ? [y/N/o]: \&quot;;read ANS;case $ANS in [Yy]*) echo &apos;Append&apos;;echo \&quot;${RES%%http_code*}\&quot; &gt;&gt; .gitignore;;\&quot;\&quot; | [Nn]*)echo &apos;Cancel&apos;;;[Oo]*)echo &apos;Overwride&apos;;echo \&quot;${RES%%http_code*}\&quot; &gt; .gitignore;;esac;else echo \&quot;${RES%%http_code*}\&quot; &gt; .gitignore;fi;else echo \&quot;$1 is undefined.\&quot; ;fi;};f &quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;使い方&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; ignore &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;language&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; ignore java
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; ignore node,stylus&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[GulpでSharpを使って画像のリサイズをする]]></title><description><![CDATA[gulp-sharp で画像のリサイズをしたい時にできなかったので自分でそれっぽいのを書いた。 フロントエンドで画像を扱う時にsrcディレクトリには元の大きさの画像を用意してdist…]]></description><link>https://blog.magcho.com/2020/5/gulp-sharp/</link><guid isPermaLink="false">https://blog.magcho.com/2020/5/gulp-sharp/</guid><pubDate>Mon, 04 May 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://www.npmjs.com/package/gulp-sharp&quot;&gt;gulp-sharp&lt;/a&gt; で画像のリサイズをしたい時にできなかったので自分でそれっぽいのを書いた。&lt;/p&gt;
&lt;p&gt;フロントエンドで画像を扱う時にsrcディレクトリには元の大きさの画像を用意してdistディレクトリには適切なサイズまで小さくして公開する運用をしている。&lt;/p&gt;
&lt;p&gt;自分は欲しい大きさにresizeしてからoptimiseをしています、gulpでのresizeで一番npmでダウンロード数が多いのは&lt;a href=&quot;https://www.npmjs.com/package/gulp-image-resize&quot;&gt;gulp-image-resize&lt;/a&gt;です。このライブラリはGraphicsMagick か ImageMagickまたはその両方を必要とします。CIでサイトをビルドする時にこれらがインストールされていないときは自分でapt等でインストールをする必要がありますが、ciの制約でインストールができなかったのでsharpを使ってresizeさせたかった。&lt;/p&gt;
&lt;p&gt;探すと&lt;a href=&quot;https://www.npmjs.com/package/gulp-sharp&quot;&gt;gulp-sharp&lt;/a&gt;はあるんですが、メンテナンスされてないのでインストール時にエラーが出ました。&lt;/p&gt;
&lt;p&gt;凝ったことしなければgulpのプラグインは簡単に書けたので、ここにメモ。&lt;/p&gt;
&lt;h2&gt;自作gulp-sharp&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; i through2 gulp-util sharp&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;my-gulp-sharp.js&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; through &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;through2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; gulputil &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;gulp-util&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sharp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sharp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
  through&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;file&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; encoding&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;gulputil&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PluginError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;gulp-sharp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Streams un supported&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isBuffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; payload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;width&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;number&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token function&quot;&gt;sharp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contents&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toBuffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;gulputil&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;File&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              base&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;base&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              cwd&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cwd&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
              contents&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;npmでsharpとgulpプラグインを作るためにthrough2とgulp-utilをインストールします。&lt;/p&gt;
&lt;p&gt;あとはgulpfile.jsからいつも通り読み込みます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;gulpfile.js&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;cost gulp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;gulp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;gulp&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;sharp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./my-gulp-sharp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;resize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;cb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  gulp
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./img/*.+(png|jpg)&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;gulp&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sharp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; height&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; width&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gulp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./dist/img&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;end&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;cb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;heightとwidthをオプションで渡していますが、どちらかを省略するとアスペクト比を保った数値でいい感じに縮小してくれます。&lt;/p&gt;
&lt;p&gt;sharpはfilebuffの他streamでも使えるみたいですが、今回の形でgulpで使った時はfilebuffのみで動作したので実装しませんでした。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[qmk firmwareでctrlとの同時押しをカスタマイズする]]></title><description><![CDATA[…]]></description><link>https://blog.magcho.com/2020/4/qmk_firmwareでctrlとの同時押しをカスタマイズする/</link><guid isPermaLink="false">https://blog.magcho.com/2020/4/qmk_firmwareでctrlとの同時押しをカスタマイズする/</guid><pubDate>Wed, 08 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;キー入力が下手なのでバックスペースを連打しがちなのですがバックスペースキーはキーボード上では遥か右上にあります。これが原因で右手首を痛めたことも。入力精度を上げろという話なのですが出来るならもうしてます。&lt;/p&gt;
&lt;p&gt;また、以外と日本語入力をしていると使いがちな「ー」伸ばし棒も近くに欲しいものです。 &lt;/p&gt;
&lt;p&gt;今回は&lt;code class=&quot;language-text&quot;&gt;C-j&lt;/code&gt;にbackspace・&lt;code class=&quot;language-text&quot;&gt;C-n&lt;/code&gt;にハイフンを割り当てます。&lt;/p&gt;
&lt;h2&gt;Ctrlキー&lt;/h2&gt;
&lt;p&gt;Ctrlキー含め装飾キーには様々なキーバインドが割り当てられています。一般的には&lt;code class=&quot;language-text&quot;&gt;C-j&lt;/code&gt;にはreturn・&lt;code class=&quot;language-text&quot;&gt;C-h&lt;/code&gt;にはbackspaceなど色々あります。zsh/bashなどのshellやターミナルのキーバインドに設定されていることが多いです。macでは&lt;code class=&quot;language-text&quot;&gt;C-k&lt;/code&gt;に行末まで削除があったりと気が利いています。&lt;/p&gt;
&lt;p&gt;qmk firmwareではraise/lower等のキーマップを変更・追加してカスタマイズするのが一般的ですがこの場合は複合キーを入力するマクロを全てのキーにおいて定義する必要があり厄介です。&lt;/p&gt;
&lt;p&gt;今回はレイヤーの定義ではなくプログラムっぽく？キー入力を拡張してみます。&lt;/p&gt;
&lt;h2&gt;キータイプ&lt;/h2&gt;
&lt;p&gt;qmk firmwareにてキー入力を拡張するには&lt;code class=&quot;language-text&quot;&gt;process_record_user()&lt;/code&gt;を用いる方法があります。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.qmk.fm/#/custom_quantum_functions?id=programming-the-behavior-of-any-keycode&quot;&gt;公式ドキュメント&lt;/a&gt;に詳しくはありますが、&lt;code class=&quot;language-text&quot;&gt;process_record_user()&lt;/code&gt;はqmk firmwareがキー入力を検知しPCへキー情報を送信する前に毎回呼び出される関数です。通常時返り値を&lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;とすることで現在のレイヤーのkeymapを見てPCへキー情報を送信してくれます。今回のように何か特別でキーマップは関与しない処理を行う場合は一通りの処理が終わった後&lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;を返しておきます。この場合は&lt;code class=&quot;language-text&quot;&gt;process_record_user&lt;/code&gt;を抜けた時点で処理を終了するようになります。&lt;/p&gt;
&lt;p&gt;今回は&lt;code class=&quot;language-text&quot;&gt;C-j&lt;/code&gt;と&lt;code class=&quot;language-text&quot;&gt;C-n&lt;/code&gt;の時に任意の処理をし、それ以外はキーマップに従うようにしていきます。&lt;/p&gt;
&lt;p&gt;この関数はキーの押下時に加えて”押上”時にも呼び出されます。ctrlとの複合キーであることを判定するにはctrlキー押下時にctrl_pressedという押下フラグを立てておく方法をとります。&lt;/p&gt;
&lt;p&gt;そしてポイントなのがキーの反復機能です。テキストエディタでAキーを押しっぱなしにすると&lt;code class=&quot;language-text&quot;&gt;AAAAAAAAAAAAAA&lt;/code&gt;のようにAが大量に入力されます。それはそう。反復機能が働いている時にキーボードが&lt;code class=&quot;language-text&quot;&gt;KC_A&lt;/code&gt;のkey_downコードを連続して送信しているわけではなく、PC側でkey_downコードが来てからなかなかkey_upコードが来ないので押しっぱなしであると判断しています。&lt;/p&gt;
&lt;p&gt;qmk firmwareにはキーコードを送信するための関数がいくか用意されていますがよく使うのは&lt;code class=&quot;language-text&quot;&gt;tap_code(KEYCODE)&lt;/code&gt;と&lt;code class=&quot;language-text&quot;&gt;register_code(KEYCODE) / unregister_code(KEYCODE)&lt;/code&gt;です。前者はkey_downコードとkey_upコードを連続して送信し、後者はresigerがdown・unregisterがupのコードを送信するものです。用途に合わせて使い分ける必要があります。&lt;/p&gt;
&lt;h2&gt;実装&lt;/h2&gt;
&lt;p&gt;defaultのkeymap.cの下の方に&lt;code class=&quot;language-text&quot;&gt;process_record_user()&lt;/code&gt;の記述があります。ここに実装していきます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymaps.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;略&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; bool ctrl_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; bool exceptionaly_ctrl_layer_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

bool &lt;span class=&quot;token function&quot;&gt;process_record_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;uint16_t keycode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; keyrecord_t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;record&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;ifdef&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;SSD1306OLED&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;set_keylog&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;keycode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; record&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// set_timelog();&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;keycode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; KC_LCTRL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            ctrl_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; true&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            ctrl_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; QWERTY&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;set_single_persistent_default_layer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_QWERTY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;略&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上のコードで、引数keycodeに押下/押上されたキーのコードが入っています。&lt;code class=&quot;language-text&quot;&gt;record-&amp;gt;event.pressed&lt;/code&gt;にて押下か押上か判断できるのでctrlキーの状態に変化があればフラグを更新します。ここではreturnせずに正常処理をします。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;keymap.c&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;略&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; ADJUST&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;layer_off&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_ADJUST&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctrl_pressed &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; exceptionaly_ctrl_layer_pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;keycode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; KC_J&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;unregister_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_LCTRL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;register_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_BSPACE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    exceptionaly_ctrl_layer_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; true&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;unregister_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_BSPACE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctrl_pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
						&lt;span class=&quot;token function&quot;&gt;register_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_LCTRL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    exceptionaly_ctrl_layer_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; KC_N&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;record&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;unregister_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_LCTRL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;register_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_MINUS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    exceptionaly_ctrl_layer_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; true&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;unregister_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_MINUS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctrl_pressed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
						&lt;span class=&quot;token function&quot;&gt;register_code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;KC_LTRL&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                    exceptionaly_ctrl_layer_pressed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; false&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; true&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上のコードで、switchにてctrlキーとレイヤ切り替えキーを判定し、それ以外はdefaultに入ります。ここで&lt;code class=&quot;language-text&quot;&gt;ctrl\_pressed&lt;/code&gt;フラグを用いて押下中(修飾キー)であるかを判定し、任意のキーとの組み合わせ(ここでは&lt;code class=&quot;language-text&quot;&gt;C-J&lt;/code&gt;/&lt;code class=&quot;language-text&quot;&gt;C-N&lt;/code&gt;)であれば&lt;code class=&quot;language-text&quot;&gt;register\_code(KEYCODE)&lt;/code&gt;にてキーを打ちます。&lt;/p&gt;
&lt;p&gt;今回のようにbackspaceやハイフンといった本来修飾キーを用いないキー(Ctrlとの複合キーではないキー)の場合はPCにこれは修飾キーでないことを伝えるために&lt;code class=&quot;language-text&quot;&gt;unregister_code(KC_LCTRL)&lt;/code&gt;にてctrlキーをを仮想的に押上しておきます。&lt;/p&gt;
&lt;p&gt;ここでは長押ししたら複数文字backspace/ハイフンを入力して欲しいので&lt;code class=&quot;language-text&quot;&gt;register&lt;/code&gt;を利用しています。&lt;/p&gt;
&lt;p&gt;そして押上時に&lt;code class=&quot;language-text&quot;&gt;unregister&lt;/code&gt;して&lt;code class=&quot;language-text&quot;&gt;register_code(KC_LCTRL)&lt;/code&gt;にて仮想的なctrlキーの押下を戻しておくといいです。backspaceで数文字消した後貼り付けしたい時にctrlキーを押しなおす必要がなくなり、より自然になるかと。&lt;/p&gt;
&lt;p&gt;入力時に&lt;code class=&quot;language-text&quot;&gt;Ctrl(down) -&amp;gt; J(down) -&amp;gt; J(up) -&amp;gt; Ctrl(up)&lt;/code&gt;とタイプしているつもりでも指が離れるタイミングによってはupのタイミングが逆になることもあり得るのでフラグで状態管理をして&lt;code class=&quot;language-text&quot;&gt;if(ctrl_pressed || exceptionaly_ctrl_layer_pressed)&lt;/code&gt;のようにどちらのフラグでも対応できると安心。&lt;/p&gt;
&lt;h2&gt;おわり&lt;/h2&gt;
&lt;p&gt;キーマップのカスタマイズは既成のキーボードでも十分できますが、自作キーボードでは大抵のことを作ればできるので楽しい。&lt;/p&gt;
&lt;h2&gt;リンク&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://support.apple.com/ja-jp/HT201236&quot;&gt;Mac のキーボードショートカット - Apple サポート&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/qmk/qmk_firmware/blob/master/keyboards/lily58/keymaps/default/keymap.c&quot;&gt;qmk&lt;em&gt;firmware/keymap.c at master · qmk/qmk&lt;/em&gt;firmware&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/magcho/qmk_firmware/blob/master/keyboards/lily58/keymaps/magcho/keymap.c&quot;&gt;qmk firmware/keymap.c at master · magcho/qmk firmware&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.qmk.fm/#/custom_quantum_functions?id=programming-the-behavior-of-any-keycode&quot;&gt;Customizing Functionality - QMK Firmware&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.qmk.fm/#/keycodes&quot;&gt;Full List - QMK Firmware&lt;/a&gt; &lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Goで作ったCLIツールのビルド・配布をGitHub Actionsで自動化する]]></title><description><![CDATA[Goで作ったdotfiles管理ツールのdotzをビルド・バイナリ配布・homebrewのアップデートまでを自動化したメモ。 GitHub Actionsを初めて本格的に利用してみました。beta版の時はyamlにズラズラとshell script…]]></description><link>https://blog.magcho.com/2020/4/goで作ったCLIツールのビルド・配布をGitHub_Actionsで自動化する/</link><guid isPermaLink="false">https://blog.magcho.com/2020/4/goで作ったCLIツールのビルド・配布をGitHub_Actionsで自動化する/</guid><pubDate>Mon, 06 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Goで作ったdotfiles管理ツールのdotzをビルド・バイナリ配布・homebrewのアップデートまでを自動化したメモ。&lt;/p&gt;
&lt;p&gt;GitHub Actionsを初めて本格的に利用してみました。beta版の時はyamlにズラズラとshell scriptのように記述した覚えがありますが現行のactionsでは考え方が違うようです。&lt;/p&gt;
&lt;h2&gt;github actions&lt;/h2&gt;
&lt;p&gt;現行のGitHub actionsについては日本語文献もたくさんあるので詳しいことはそっちを見てほしいんですが、GitHub上ではworkflowがpushやPR、タイマーなどのトリガーによって実行されます。workflow内には任意のactionを持ちこのactionが順次/並列で実行されます。&lt;/p&gt;
&lt;p&gt;actionにはdockerのようにinputと環境変数を渡すことができ、任意の数のoutputができます。outputは別のactionのinputとして渡すことができます。&lt;/p&gt;
&lt;p&gt;また、workflow内で使える環境変数にはリポジトリ名やcommit ハッシュ等の情報に加え、tagのpushをトリガーとした時などにはtag名等様々な情報を取得できます。さらにworkflowを実行しているリポジトリのみの権限を持ったonetime GitHub tokenが払い出されます。&lt;/p&gt;
&lt;p&gt;github tokenは対象リポジトリにしか影響できないのでミスって他のリポジトリを消したりできないので安心。&lt;/p&gt;
&lt;h2&gt;dotzのビルド&lt;/h2&gt;
&lt;p&gt;dotzに利用しているcli用のライブラリ&lt;a href=&quot;https://github.com/urfave/cli&quot;&gt;urfave/cli&lt;/a&gt;はコマンド実行時にツールのバージョンを表示する昨日はあります、今回はtag名からバージョン番号を拾ってmakefileでビルドします。&lt;/p&gt;
&lt;p&gt;makefileはCIだけではなく開発時にも利用すると思います。開発時は&lt;code class=&quot;language-text&quot;&gt;make&lt;/code&gt;コマンド単体のみでビルドし、CI上のビルド時のみバージョン名を渡してビルドしたいです。このようにパラメータをオプション的に使うにはmakefile内で使える変数をコマンドラインから渡してやるといいです。&lt;/p&gt;
&lt;p&gt;makefile内で変数&lt;code class=&quot;language-text&quot;&gt;dotz_ver&lt;/code&gt;を定義しておきます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;makefile&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;makefile&quot;&gt;&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;dotz_ver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; 0.0.0
&lt;span class=&quot;token symbol&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; main.go
	go build -v -ldflags &lt;span class=&quot;token string&quot;&gt;&quot;-X main.dotzVersion=${dotz_ver}&quot;&lt;/span&gt; .&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;make build&lt;/code&gt;をしたときには&lt;code class=&quot;language-text&quot;&gt;dotz_ver&lt;/code&gt;の中身は&lt;code class=&quot;language-text&quot;&gt;0.0.0&lt;/code&gt;になりますが&lt;code class=&quot;language-text&quot;&gt;make build dotz_ver=1.2.3&lt;/code&gt;と呼び出せばコマンドライン側の値が優先され&lt;code class=&quot;language-text&quot;&gt;dotz_ver&lt;/code&gt;の中身が&lt;code class=&quot;language-text&quot;&gt;1.2.3&lt;/code&gt;になります。これを利用してworkflowからはtag名を渡しておきます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;.github/workflows/build.yml&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;~~~~抜粋
&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; build
    &lt;span class=&quot;token key atrule&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;GO111MODULE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;on&quot;&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; macos&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Set up Go 1.13
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/setup&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;go@v1
        &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token key atrule&quot;&gt;go-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.13&lt;/span&gt;

      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Check out code into the Go module directory
        &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2

      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Build
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; make build dotz_ver=$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; github.ref &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
~~~~抜粋&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上記のmakefileにありますが、go build 時に&lt;code class=&quot;language-text&quot;&gt;-ldflags &amp;quot;main.{変数名}={value}&amp;quot;&lt;/code&gt;で値を埋め込んでいます。これでビルド時に変数を取り込み実行時は変数が格納済みの状態で実行が開始されます。&lt;/p&gt;
&lt;p&gt;ビルド後は、&lt;a href=&quot;https://github.com/actions/create-release&quot;&gt;actions/create-release@v1&lt;/a&gt;と&lt;a href=&quot;https://github.com/actions/upload-release-asset&quot;&gt;actions/upload-release-asset&lt;/a&gt;でreleaseに生成したバイナリをアップロードします。&lt;/p&gt;
&lt;h2&gt;homebrewの自動化&lt;/h2&gt;
&lt;p&gt;homebrewのformulaを自動更新するactionを作りました。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/magcho/dotz/tree/master/.github/actions/update_homebrew&quot;&gt;https://github.com/magcho/dotz/tree/master/.github/actions/update_homebrew&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;brewの公式リポジトリではなくオレオレformulaを対象としています。更新するactionとuploadするactionを分けたので後者を公式リポジトリにPRを送るactionに差し替えれば運用できるかなと思います。&lt;/p&gt;
&lt;p&gt;内部でやっていることは既存のformulaをcurlで落とし、&lt;a href=&quot;https://github.com/magcho/dotz/blob/718af61a0ac6efa050e8ff718213d5f1a564350c/.github/actions/update_homebrew/src/main.js#L35-L36&quot;&gt;ここで&lt;/a&gt;バイナリのURLとsha256を更新しているだけです。&lt;/p&gt;
&lt;p&gt;formulaによっては書き換えルールを追加しなければいけないかもですね。&lt;/p&gt;
&lt;p&gt;formulaのtestとformatを掛けたのち、formulaをuploadします。formulaのリポジトリにpushしたいところですがworkflowに払い出される通常のGitHub tokenでは実行リポジトリ以外にpushできないので別途用意します。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/settings/tokens&quot;&gt;githubの個人設定&lt;/a&gt;からPersonal access tokenを払い出してリポジトリのSettingタブ-&gt;Secretsから任意の名前でsecretに登録しておきます。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9a4506b68743fbaf53a5606f177a7fdf/1a867/0601.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.37837837837838%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVQoz5VTy3LbMAzU/39K751ce+y1H5C4tqRYsR09KJLiU9sFpTieaaedarQCCZBLYAlVbe9xHhyMS4hJkBFiKpD5x1iQGFusRdu+YhgVtLF4u96Kvdx62MWhmmYDgdIGxi4YJ1UCs7ZQ9M96g2yaGOu7psD5AB/ib7aST5ZMaBOtNgbDMMJzgWQkvg37OK/gC75Y5YPPcWagaocA6zMdW9SypMvlSkJffDnngrTb+1zkibEghFDmwlpdFZ1pvROO44TD4YC6blA3DQ4/jzhxfDzVeH6hv2lxPJ7QdW+lkn6ci0zOubK/emWGUoYQChbq13PBOHOhEqhyiKIVAiU+zmfGjXVQy4qQttKzZCiELuSSrmggeuLHd+DbV+DpC3Cu8a9H9hgeFlk6NYylVURaIYwpYBrP0EMH3XeYzQCf44Oej3arKrGl9OWGQN2r87Cg1xQ2ycXkQj4zYx1XeMqawM1rvkvyR5A4+O1iqvdJ762wn8axcSRdtibH34geUNpHNJQ/JOf9L4nps7n2DlvX/8Mvd+NaNOzit3oAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;0601&quot;
        title=&quot;0601&quot;
        src=&quot;/static/9a4506b68743fbaf53a5606f177a7fdf/fcda8/0601.png&quot;
        srcset=&quot;/static/9a4506b68743fbaf53a5606f177a7fdf/12f09/0601.png 148w,
/static/9a4506b68743fbaf53a5606f177a7fdf/e4a3f/0601.png 295w,
/static/9a4506b68743fbaf53a5606f177a7fdf/fcda8/0601.png 590w,
/static/9a4506b68743fbaf53a5606f177a7fdf/efc66/0601.png 885w,
/static/9a4506b68743fbaf53a5606f177a7fdf/c83ae/0601.png 1180w,
/static/9a4506b68743fbaf53a5606f177a7fdf/1a867/0601.png 1998w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;/p&gt;
&lt;p&gt;あとはworkflowから&lt;code class=&quot;language-text&quot;&gt;${{secrets.****}}&lt;/code&gt;で参照できるのでtokenを渡しておきます。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;.github/workflows/build.yml&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre class=&quot;language-yaml&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;~~~~抜粋
&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; create commit
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token scalar string&quot;&gt;
    sh ./ci/create_commit.sh &quot;dotz.rb&quot; &quot;magcho&quot; &quot;${{ secrets.github_personal_acces_token }}&quot; &quot;mail@magcho.com&quot;&lt;/span&gt;
~~~~抜粋&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これにてtag付きでmasterにpushすれば勝手にリリースまでやってくれるようになります。&lt;/p&gt;
&lt;h2&gt;おわり&lt;/h2&gt;
&lt;p&gt;そういやGitHub actionsハッカソンがありました。気づいた時は最終日でしたが、、&lt;/p&gt;
&lt;p&gt;github actions marketplaceに全然actionの種類がないなーと思ってたとこなのでハッカソンで一気に増えた感じですかね。自分もなんか出したかったな。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[youtube liveでネット配信をやったレポ]]></title><description><![CDATA[感染防止などの理由でいつもは集まって行なっていたミーティングができなくなってしまったので、今回youtube live…]]></description><link>https://blog.magcho.com/2020/4/ネット配信をやってみたレポ/</link><guid isPermaLink="false">https://blog.magcho.com/2020/4/ネット配信をやってみたレポ/</guid><pubDate>Wed, 01 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;感染防止などの理由でいつもは集まって行なっていたミーティングができなくなってしまったので、今回youtube liveでリアルタイム配信をやってみたレポートです。&lt;/p&gt;
&lt;p&gt;使用した機材やつまづきポイントなどを書いておくので何かの助けになれば幸いです。&lt;/p&gt;
&lt;h2&gt;事の発端&lt;/h2&gt;
&lt;p&gt;大学のサークルにて月に一回所属している人を大教室に集めて情報共有などを行う習慣があり、2月までは大教室に付属するプロジェクターとマイクを用いて講義のような形式で行なっていた。しかし3月は感染防止の観点から大学側より集会禁止の通知が届いたため中止に。&lt;/p&gt;
&lt;p&gt;この時期は大学のサークルということもあり新歓などで慌ただしく情報共有の場が必要でした。その他のことも忙しい時期らしい。なので予定していた日付はそのままで配信集会をやろうということになった。&lt;/p&gt;
&lt;h2&gt;配信準備&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b304987ba687614eaa59f1e4b7015a4a/493ac/01.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAESElEQVQ4yyWTa1DUBRTF/+koIvkIXBDCWMsRRCx1S2VREHkoC8vCLig+xl1eLgsK8tpVYdFdNRlscBIFFEMcxSeGkpowKeCDJB9BqaBggFJImJpMWjPWr3/24X45c2fOOfeeIww8bOO3R/d49ksHL5708vL5Y/4afMLfr57DP6+A1//P6z/4U8QHn/bxbKCXJ309PH3cw+/9PQz+2s3Lpw/p77mD8KKvk587Wulqu0l7azPtP97gTut3tNxs4nrzZRou1vLt5W/oaL9N78P79D3qZKCvm0GRuL/3Ab1d9+gX8d7OH1ApFQgH9xRRd3Ifpw7tYU1cDAcKsolWyNGq57FowRykjmMwxqeyf9tOLBmbSE6IZ0vuejaZc7nR3EjXvVYedd6l7kw17u6TEWZ9IiMzKZb1aXpUC/3IioskOtSXmdMm4T7JjbFvjyB5SQLnyqrYYcxHEzSf3Dw9Mv85NF6o4f7dW9xqbiIrPZVwZSiCXPYx452dGTVmNPb29tiMGMGQYUNxcJQwwW0Cw0bb4e3lRbTOSI6pkIwIDYXREUT6+KJQLCBKraJox2dI3dzw9JyCMHu6BxMnShlpa4u9w1imeHoQEhaEh/sHzJ3nQ2SkEm3MEhYEhLIwQIUyQkuU1oTcOxi7kbZIJBJMmWtxcnLC1s4OYYtBR06GXmRSY7YWcqXpFucv3iQ0TIPEyZlV+gSsG42YVi9nlsyLCa5SUZkGH78ghg55i6leniwKDsRZdPm+VIrw5cEy4leuQp+SzWbrSZLSP0WduIHtO0spLcpHF6vD18+HKGUA4WGBRC9NQpdZhGpNId5yb4IDfJF95IEgCKLq2QiFBduwmPNIS0oiOdVIZFQMsbFayko+58ypY+wu2cvRk6cJUYSTuyGLurNH2Gg2sadkFxFRq5DPX46HbBFhIQHE61YgNDXWMfC4izst16ivq+FY5X4uNdTR/dNdTp+qpra+gUst7RRs3Yo6Qkl6moHKihIqy4vIXruaaXOiCFliwNtbRqJuGcKHXlPwFy3NnDEdU1Y68bErsOSspaqymKrDpZytPsTxY4epPXeCA/t3kmJIJDstlWSDnpoTFdy+foHzpyux5hkp3m5GUITMRzbDi8lSlzd3GD5UQCGfjF7jgyUlAusaDXkGFRkrQ0hJDmfZ4kBcxktwcXEmKGAem82p7Nu9nab6syxWKxEStGpmi99TBPryrrgY6juN/MwYdpnj+GKrnjJrAjvWLSc/TYPFEMzKsJk4S0ZjYzMcm+HD3ohwdXURk5DDhnXZCP/FITJQRliQD0uVfuy1JHLteD7XqwpoPGTl673rOFdq5OA2PcW5WsqtcQTLp/Ke63gc7Mcwbpw9jhJ7/OfKsOamI9Tss/J9QzVtTWdo+aqYjosV4pTT3VjBg/py2mpLuXq0gKtH8sX6mTlSmIEqcBbj3hmFq4tEDLYDjmIhLCYDV2pP8C/Zr8Rk2U7PXgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Alt Text&quot;
        title=&quot;Alt Text&quot;
        src=&quot;/static/b304987ba687614eaa59f1e4b7015a4a/fcda8/01.png&quot;
        srcset=&quot;/static/b304987ba687614eaa59f1e4b7015a4a/12f09/01.png 148w,
/static/b304987ba687614eaa59f1e4b7015a4a/e4a3f/01.png 295w,
/static/b304987ba687614eaa59f1e4b7015a4a/fcda8/01.png 590w,
/static/b304987ba687614eaa59f1e4b7015a4a/efc66/01.png 885w,
/static/b304987ba687614eaa59f1e4b7015a4a/c83ae/01.png 1180w,
/static/b304987ba687614eaa59f1e4b7015a4a/493ac/01.png 4032w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e3d45881556539bdcf10c97795c3dbf7/f2991/02.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.83783783783784%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHbsRIr/8QAFhAAAwAAAAAAAAAAAAAAAAAAABAh/9oACAEBAAEFAir/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAYEAADAQEAAAAAAAAAAAAAAAAAASExYf/aAAgBAQABPyFLOkFP/9oADAMBAAIAAwAAABD/AN//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAGxABAAEFAQAAAAAAAAAAAAAAAQARITFBUYH/2gAIAQEAAT8QBa1s1FDTzsFmD1n/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Alt Text&quot;
        title=&quot;Alt Text&quot;
        src=&quot;/static/e3d45881556539bdcf10c97795c3dbf7/1c72d/02.jpg&quot;
        srcset=&quot;/static/e3d45881556539bdcf10c97795c3dbf7/a80bd/02.jpg 148w,
/static/e3d45881556539bdcf10c97795c3dbf7/1c91a/02.jpg 295w,
/static/e3d45881556539bdcf10c97795c3dbf7/1c72d/02.jpg 590w,
/static/e3d45881556539bdcf10c97795c3dbf7/a8a14/02.jpg 885w,
/static/e3d45881556539bdcf10c97795c3dbf7/fbd2c/02.jpg 1180w,
/static/e3d45881556539bdcf10c97795c3dbf7/f2991/02.jpg 2222w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;/p&gt;
&lt;p&gt;今回使用した機材は以下&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ビデオミキサー V-1HD Roland&lt;/li&gt;
&lt;li&gt;PC (配信用, 映像素材出し用, パワポ用)&lt;/li&gt;
&lt;li&gt;カメラ GH4 Lumix &amp;#x26; Dock&lt;/li&gt;
&lt;li&gt;カメラ Blackmagic Pocket Cinema Camera 4K BlackmagicDesign&lt;/li&gt;
&lt;li&gt;マイク 2本  AT808G AudioTechnica&lt;/li&gt;
&lt;li&gt;集音マイク RTA-M dbx&lt;/li&gt;
&lt;li&gt;音響卓&lt;/li&gt;
&lt;li&gt;ビデオキャプチャー blackmagic intensity shuttle blackmagicDesign&lt;/li&gt;
&lt;li&gt;SDI-HDMIのコンバータ blackmagicDesign&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;なんだかごちゃごちゃですね、普段は映像撮影とかPAとかしているサークルなのであり合わせの機材です。&lt;/p&gt;
&lt;h2&gt;カメラ&lt;/h2&gt;
&lt;p&gt;要件として電源を繋いで常時給電ができ、リアルタイム映像が出力できるカメラでないといけません。詳しくないんですがコンデジではリアルタイム映像が出力できなかったりするらしい。&lt;/p&gt;
&lt;p&gt;さらに配信に向けてバッテリー残量や撮影モードなどのステータスなどが出力されないものが好ましいです。表示の消し方は事前に調べて設定しておかないと本番でグダリます。非表示にできないカメラも多いらしいので要事前調査。&lt;/p&gt;
&lt;p&gt;GH4はAFアイコンの消し方がわからず本番時はMFでカメラ係が頑張ってました。映像伝送は長く引き回せるようにSDIに変換しています。&lt;/p&gt;
&lt;h2&gt;ビデオミキサー&lt;/h2&gt;
&lt;p&gt;配信の構成として司会+喋る人の2人がカメラ前にいて、2人が映る引きの絵(カメラ固定)としゃべっている人を1人だけ写すためのカメラの2台構成です。&lt;/p&gt;
&lt;p&gt;喋る時にはパワポを写して、ワイプでしゃべっている人を出したかったのでビデオミキサーを用いて映像を混ぜています。&lt;/p&gt;
&lt;p&gt;この操作が難しくてミスしょっちゅうミスする、、、どのボタン押せばパワポだっけ？？ってなるのでプロの方の偉大さを実感できます。&lt;/p&gt;
&lt;h2&gt;マイク&lt;/h2&gt;
&lt;p&gt;出演者は2人固定なので2本の演台マイクを設置、さらに控えている人もどうせ喋るだろうと思ったので天井から無指向性マイクをぶら下げてみました。音響卓で出演者より小さめに控えている”ガヤ”の声を混ぜるといい感じです。&lt;/p&gt;
&lt;p&gt;配信をみている人は1人でイヤホンか何かで聞いていると思いますが、演台マイクはリップノイズだったり環境音だったりを結構拾います。変な言い方ですが未処理の音声にはリップノイズやら鼻息やらでイヤホンでずっとは聴いていられないと思うのです。なので誤魔化す意味も含めてガヤを入れてみました。BGMをうっすら流しておくのも効果あると思います。&lt;/p&gt;
&lt;h2&gt;使用ソフト&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;パワポ用PC(Windows)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PowerPoint Microsoft&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;映像素材出し用PC(mac)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ProPresenter Renewedvision&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;配信用PC(mac)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OBS Open Broadcaster Software&lt;/li&gt;
&lt;li&gt;Audition Adobe&lt;/li&gt;
&lt;li&gt;soundflower&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;パワポと素材はビデオミキサーに入力しています&lt;a href=&quot;https://renewedvision.com/propresenter/&quot;&gt;ProPresenter&lt;/a&gt;というのは現場で映像屋さんに教えてもらったプレゼン用のソフトウェアです。映像を出力しながら次の映像素材のチェックのための再生を手元の画面にだけ写せるなど業務用のソフトウェアです。&lt;/p&gt;
&lt;p&gt;日本語化はされておらず、業務用なので日本語情報がほとんどありませんが商用なので公式のDocumentがしっかりしています、ご興味があればぜひ。試用期間内なら制限なく無料で使えます。&lt;/p&gt;
&lt;p&gt;OBSは配信用のソフトウェアとしてかなりのシェアのあるOSSです。日本語情報も多く戸惑うことはなさそうです。キャプチャーボードによってはOBSが認識しないため、一度別のプロトコルに変換するなど手間をかけるものもあるらしいですがBlackmagic社のキャプチャーボードはOBSに認識されますので安心です。&lt;/p&gt;
&lt;p&gt;見逃しがちなのですが、配信の中で音声の大きさがバラバラだと少し問題になります。数年前のyoutubeでは動画自体の音量が小さくで端末のボリュームを大きくしたらCMが流れてきてCMの音が大きくてビックリする！なんてことがあったんですが、そこらへんをyoutubeが自動的に動画の音量を調整してくれるようになってます。「youtube ラウドネス」で検索すると情報が出てきますので気になる方は是非。&lt;/p&gt;
&lt;p&gt;そんなラウドネス規定ですがyoutube公式に値を発表していませんが動画では-13LUFSを超えるとyoutube側で調整が入ると言われている？らしいのでyoutube liveがどうなのかはわかりませんがこれに合わせてみました。測定にはAuditionのラウドネスメータをを用いています。Auditionの[エフェクト]-&gt;[スペシャル]-&gt;[ラウドネスメータ]から呼び出せます。&lt;/p&gt;
&lt;p&gt;さらに今回のマイク配置で演台マイクと無指向性マイクの音を拾うエリアが一部かぶっていたので位相モニタ？ができるVSTプラグインFlux Stereo Tool v3を表示させています。これは以前現場でバウンダリーとワイヤレスのピンマイクの両方で集音していたらワイヤレスの方が半周期分遅延してミキサーに入力されたため電話越しのような音になってしまった経験があるので一応確認します。実のところモニターの詳しい見方がわからないのですが画面上でピカピカしていると気分が上がるので100点です。&lt;/p&gt;
&lt;h2&gt;ハマりポイント&lt;/h2&gt;
&lt;p&gt;今回初めて配信をやってみて苦労した点、次回改善したい点を挙げておきます。誰かの助けになれば幸いです。&lt;/p&gt;
&lt;h3&gt;1.カメラからの入力がチラつく&lt;/h3&gt;
&lt;p&gt;今回使用したビデオミキサーはRoland社のV-1HDです。機器背面のスイッチにて入出力するHDMIの方式を設定できます。PCや民生用プレイヤーなどではHDMIのコネクション確立時に受け手側の画面サイズを検出して出力サイズや方式を自動で合わせてくれますが今回使用したカメラは2台ともそうではなかった。&lt;/p&gt;
&lt;p&gt;V-1HDには背面スイッチで(1080i, 1080p, 720p)に切替が可能です。キャプチャーボードのintensityの入力仕様も見ると1080でキャプチャするには1080i/50iまたは1080i/59.94のどちらかを使用することになります。&lt;/p&gt;
&lt;p&gt;するとV-1HDに入力するにはカメラ側の出力設定を1080/59.94i, 1080/50i, 1080/59.94p, 1080/50pのどれかに設定する必要があるのです。普段民生機しか触らない身からするとPCは繋いで映るのにカメラは映らなくて半日ほど悩みました。類似の事象を検索するもこういうことはプロに任せる分野ですからほとんど情報がありません。後で聞いたらそういうものはビデオミキサーに入力する前に信号形式を変換してミキサの形式に統一して運用するものらしい。確かにブラマジのHPにそういう製品あったな。&lt;/p&gt;
&lt;p&gt;設定方法はカメラごとにだいぶ違いますし、そもそも設定できない形式もあります。事前にカメラ・キャプチャーボード・ビデオミキサの入出力仕様を調べてプランニングしておくべきです。&lt;/p&gt;
&lt;h3&gt;2.配信画面のインターレースを解除できない&lt;/h3&gt;
&lt;p&gt;これは完全に調査ミスです。intensityの仕様から1080/50iでキャプチャしましたがyoutube liveサーバーはプログレッシブを受けます。intensityの設定でデインターレースできないかと探しましたが。OBSにデインターレース機能があるようです。次回からはこれを使います。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ba790213b1d1ca1e4f4e714435bd061b/2b608/03.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.21621621621621%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACo0lEQVQ4y3WTyXLbRhBAodiyJeeUlKmkTBIkRUkmJa4giIVYJIArFkoUF1E++JJLHMeJ///00oAdVbniHF41MFN43dM9UAwv4vD5MxRF+Q+FQoH9w544irFMi5E9wrZsnJFDuVRmPB6z2WxY3a1I4oTWVQvlqm3z4sXhN6KDg4Mn4f39hjAcY5o2tu08oZbVpwQZnuPRbDRRbG/Osx8Ovlvh659/YruMicY3OHofb6jhDvv45gC1VMQS0b9Sz/VovG2gxLfv+PHVMUdHRxwfH3/lFS8Pn/O62sR4+Iy9/5v23R800t9pZtx+pN4a4I1EJsKsHa7jfjlyML0jihbESUIcx19JSOMFfrylv/rA8PY3eutPtNafad3/xUX6kUm65XG3y0WZMCMIAhQvSEmSmDRNv2G5XDIbh6TTkFU8Jwp9AntIODJwtA7zyUQGsn3qYSYMwxBlMl9LRVEuSaTKjFwqwsl0zvJ2xXqzY7N9EPas11tGI1cmPMlvQNa7TGYMjS8VRstHZtMJi0XEMl3K+GN5lhYs5ox9h0j2As/BMXQcc4hj25hDk+A6YLfd5UPJhNf+DRNJomjWVF68vOwwCPE9H2soH8/usHafSN7/yXj/ge7sEX2+R3dDTGvAWI73IEeOJbnvuniS3LR0lHpDzxfOzy6oqBVq1RpViedXGnVzRk27pqoFFHsBla7LW82mKdMd+FPCeJ1jBQtKrQ7ldgflTeVSJFVKxbJQyv+ALNYqFYonBYq/FCgJ5V9PJJ5wdnpGqXJOUa3nvFFPKVbqqLUL1OoFinraRuv36Ha6aL0+nVaby2ZTroODKw0faAM0oSd77XzvUk6g/i9Kpd7NL6dhyOitLFrouikyH8+7kd46su7kv54xtESu02n36HS+g6z/A26PozeLiMA0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Alt Text&quot;
        title=&quot;Alt Text&quot;
        src=&quot;/static/ba790213b1d1ca1e4f4e714435bd061b/fcda8/03.png&quot;
        srcset=&quot;/static/ba790213b1d1ca1e4f4e714435bd061b/12f09/03.png 148w,
/static/ba790213b1d1ca1e4f4e714435bd061b/e4a3f/03.png 295w,
/static/ba790213b1d1ca1e4f4e714435bd061b/fcda8/03.png 590w,
/static/ba790213b1d1ca1e4f4e714435bd061b/efc66/03.png 885w,
/static/ba790213b1d1ca1e4f4e714435bd061b/c83ae/03.png 1180w,
/static/ba790213b1d1ca1e4f4e714435bd061b/2b608/03.png 1540w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;/p&gt;
&lt;h3&gt;3.BGMに著作違反がありアーカイブが公開できなかった&lt;/h3&gt;
&lt;p&gt;youtubeはJASRAC楽曲に対応しているので配信前は深刻に考えていませんでした。実際に動画で著作音源を仕様した経験があるが広告収入を著作主に配当させる設定を行うことで動画の公開ができていました。&lt;/p&gt;
&lt;p&gt;JASRACで管理されていない楽曲や管理されていてもyoutubeなどで使用することを認めていない楽曲もあり、そういった場合は配信終了後にーカイブを配信停止されてしまいます。&lt;/p&gt;
&lt;p&gt;youtubeのWEB UI上で当該の楽曲が使用されている部分を無音にするか動画を切り詰めるかを選択することができます。今回BGMを流していた部分は配信開始までのカウントダウンを行うシーンと配信終了後のテロップ部分だけでした。なのでここをトリミングすることでアーカイブを配信できます。&lt;/p&gt;
&lt;p&gt;youtubeは著作的な問題が起こっても対応手段を提供してくれるのでとてもありがたいです。が今回のようにクリッピングを行なった際には生配信中のコメントが全て消えてしまうようです。それを考えると著作には気を配るべきでした。&lt;/p&gt;
&lt;h3&gt;4.音ズレ・音割れ&lt;/h3&gt;
&lt;p&gt;配信時には気がつきませんでしたがアーカイブを見ると映像が音声より0.3秒ぐらい遅れていました。OBSにて映像にディレイをかけられるので配信時は本番前のプレビューをyoutube上で確認しながら調整すると良さそうです。&lt;/p&gt;
&lt;p&gt;今回音響卓からのアウトをV-1HDのAudio INに入れてみました。受け手側で音のレベル調整をして60あたりにセットしましたが(デフォルトは100)これはアッテネーターではなくビデオミキサー内のミックス用のレベルなようです。音量は下がっても受け手側でピークになるレベルは変わらない。なので別途アッテネーターやプリアンプのようなものを用意するのが良さそうです。&lt;/p&gt;
&lt;h2&gt;慣れている人に聞いたこと&lt;/h2&gt;
&lt;p&gt;普段からに関わっている人にお話を聞けたのでここにメモしておきます。&lt;/p&gt;
&lt;h3&gt;音声レベルに注意&lt;/h3&gt;
&lt;p&gt;こういったプロの演者さんでない場合はマイクに向かって笑い声や咳などをしてしまうことがありがちだそう。コンプ・リミットをかけておくと少し安心。&lt;/p&gt;
&lt;h3&gt;配信終了後はしばらく放置&lt;/h3&gt;
&lt;p&gt;実際に配信してみるとユーザーの手元のスマホなどに映るまで30秒以上のラグがあります。しかし配信が終わってyoutube上の配信終了をクリックするとユーザーの画面は即時に配信終了となってしまいます、下手すると最後の30秒は配信を見れずに終了してしまうことに。なので配信自体が終了してもロゴやテロップを数分流しておく必要があります。&lt;/p&gt;
&lt;p&gt;企業の配信などで「ご視聴ありがとうございました」の文面が3分ぐらい流れているのはそういった理由らしい&lt;/p&gt;
&lt;h2&gt;終わり&lt;/h2&gt;
&lt;p&gt;今回配信してみて感じたことは、難しいことはプロに頼もう&lt;/p&gt;</content:encoded></item><item><title><![CDATA[use-packageについてまとめる]]></title><description><![CDATA[Emacsのパッケージマネージャーのuse-package.el…]]></description><link>https://blog.magcho.com/2019/12/use-package/</link><guid isPermaLink="false">https://blog.magcho.com/2019/12/use-package/</guid><pubDate>Mon, 02 Dec 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Emacsのパッケージマネージャーのuse-package.elにはパッケージインストールの他に任意のタイミングで評価させるキーワードというものがありますが、自分はこれをよく分からず使っているので調べてまとめます。&lt;/p&gt;
&lt;h2&gt;実行タイミング&lt;/h2&gt;
&lt;p&gt;評価の順番はこうなります&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;パッケージ名の実在確認&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;:preface&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;:if, :when, :unless&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;:init&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;:require&lt;/code&gt;パッケージをロード&lt;/li&gt;
&lt;li&gt;パッケージをロード&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;:config&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;インストールするパッケージの設定を記述するためのキーワードです。&lt;/p&gt;
&lt;h3&gt;:preface&lt;/h3&gt;
&lt;p&gt;条件分岐キーワードを同時に使用していた時でも、条件分岐よりも先に評価されます。つまり、指定したパッケージ名が実在するならば真っ先に必ず評価してくれます。&lt;/p&gt;
&lt;h3&gt;:init&lt;/h3&gt;
&lt;p&gt;パッケージが読み込まれる前に評価されます。遅延キーワードの影響を受けません。&lt;/p&gt;
&lt;h3&gt;:config&lt;/h3&gt;
&lt;p&gt;当該のパッケージが読み込まれた後に評価されます。initに比べ、configは後述の遅延ロードを設定した際にパッケージがロードされるまで評価されなくなります。&lt;/p&gt;
&lt;h2&gt;パッケージ設定&lt;/h2&gt;
&lt;h3&gt;:custom&lt;/h3&gt;
&lt;p&gt;パッケージの設定を書くキーワードです、&lt;code class=&quot;language-text&quot;&gt;(setq ~)&lt;/code&gt;と書いているのと同じことです。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; comint
  &lt;span class=&quot;token lisp-property property&quot;&gt;:custom&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;comint-buffer-maximum-size&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Increase comint buffer size.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;comint-prompt-read-only&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Make the prompt read only.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;var-name&lt;/span&gt; var-value &lt;span class=&quot;token string&quot;&gt;&quot;comment&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:custom-face&lt;/h3&gt;
&lt;p&gt;パッケージにカスタムフェイスを適用できます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; eruby-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:custom-face&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;eruby-standard-face&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token lisp-property property&quot;&gt;:slant&lt;/span&gt; italic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;遅延ロード&lt;/h2&gt;
&lt;p&gt;emacs起動時に全てのパッケージを読み込んでしまうと起動に時間が掛かってしまいます、そこで起動時には読み込まずにパッケージが必要になったタイミングで読み込ませる遅延ロードという仕組みがあります。&lt;/p&gt;
&lt;p&gt;必要になったタイミングを検知する方法がいくつかあるため遅延キーワードも何個かあります。&lt;/p&gt;
&lt;h3&gt;:defer&lt;/h3&gt;
&lt;p&gt;実はemacs自体に遅延ロードを記述する&lt;code class=&quot;language-text&quot;&gt;;;;#autoload&lt;/code&gt;があります、パッケージ内にこのコメントに続いて遅延ロードに関しての記述をすることでemacs側が良しなにしてくれるので、パッケージの開発者がautoloadを設定してくれている場合はuse-packageで遅延キーワードを書く必要はないです。しかし、:ifなどの条件分岐キーワードを同時に使っている場合は期待している動作にならないため、autoloadに従うことを明示的に宣言する必要があります。その場合は&lt;code class=&quot;language-text&quot;&gt;:defer&lt;/code&gt;キーワードをつけます。&lt;/p&gt;
&lt;p&gt;その他、キーバインドなど自分で設定した項目を遅延ロードのきっかけにすることができます。以下のキーワードを用いて設定をすれば遅延ロードを自動で設定してくれます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; perl-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:defer&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; version2で指定秒数の遅延が追加されたようです。lspなど外部プロセスに依存するようなパッケージに有効ではないでしょうか。&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; perl-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:defer&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:commands&lt;/h3&gt;
&lt;p&gt;特定のコマンドを呼び出した時ににパッケージをロードします。&lt;code class=&quot;language-text&quot;&gt;M-x&lt;/code&gt;から呼び出した時のほかキーバインドに設定されていて、そのキーが押された時にも反応します。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; color-moccur
  &lt;span class=&quot;token lisp-property property&quot;&gt;:commands&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;isearch-moccur&lt;/span&gt; isearch-all&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:commandsキーワードに続いてカッコで囲って列挙すればいいみたいです。&lt;/p&gt;
&lt;h3&gt;:bind&lt;/h3&gt;
&lt;p&gt;コマンドにキーバインドを割り当てます。:commandsキーワード+(bind-key ~)のことです。ここで割り当てるキーマップはローカルキーバインドを上書きをします。&lt;/p&gt;
&lt;p&gt;キーバインドに設定する値は&lt;code class=&quot;language-text&quot;&gt;(kbd xx)&lt;/code&gt;と同じ指定方法を使えます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ace-jump-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:bind&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token argument&quot;&gt;C-&lt;/span&gt;.&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; ace-jump-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:bindで設定するコマンドはパッケージ内でautoloadが設定されていることを想定しています、autoloadされていないコマンドのバインドを設定したい場合は:bind-keyを使用します。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; projectile
  &lt;span class=&quot;token lisp-property property&quot;&gt;:bind-keymap&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;C-c p&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; projectile-command-map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:mode, :interpreter&lt;/h3&gt;
&lt;p&gt;メジャーモードの設定を行います。:modeはファイル名もしくは拡張子に紐づけることができます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; python
  &lt;span class=&quot;token lisp-property property&quot;&gt;:mode&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;\\.py&apos;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; python-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;;; パッケージ名がXX-modeとなっている場合は省略記法が使えます。&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ruby-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:mode&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;\\.rb\\&apos;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;:interpreterはシバンで指定された言語のモードで開く設定です。&lt;/p&gt;
&lt;p&gt;シバンはプログラムの1行目に&lt;code class=&quot;language-text&quot;&gt;#!/bin/python&lt;/code&gt;のように実行するインタープリターを指定する記述のことです。
この指定されたインタープリターを元にメジャーモードを判定します。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; python
  &lt;span class=&quot;token lisp-property property&quot;&gt;:interpreter&lt;/span&gt; python&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:hook&lt;/h3&gt;
&lt;p&gt;他のコマンドが実行された時に、同時に実行したい時に使用します。
ファイル保存のコマンドが走った時にformatterを実行したい時などに便利です。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; formatter
  &lt;span class=&quot;token lisp-property property&quot;&gt;:hook&lt;/span&gt; save-buff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:magic, :magic-fallback&lt;/h3&gt;
&lt;p&gt;ファイルの先頭に指定する文字列がないか確認し、一致する場合に指定のモードで開きます。&lt;/p&gt;
&lt;p&gt;emacsでテキストファイルでは無いものを扱う際にも便利なのでは無いでしょうか、もちろんテキストファイル(拡張子はjsだけど開きたいモードが違うとか)。docではpdfを例に挙げています。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; pdf-tools
  &lt;span class=&quot;token lisp-property property&quot;&gt;:magic&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;%PDF&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; pdf-view-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;試しにPDFファイルをemacsで開いてみるとこんな感じでした。確かに1行目に&lt;code class=&quot;language-text&quot;&gt;%PDF&lt;/code&gt;の記述があります。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d4798eb86994de0708a4dd31128bc940/6c99d/pdf.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.75675675675676%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaklEQVQoz6VRy07CQBTtb0CiLuhMpy19TFtowYC/gR+gxtaAFJEYFF2wcOUvH+8daYxGEgyLk/uYuWfOuWNdTiaoqgplWeLm6hrV9A6zVY16vcTi+RGz5RzT5T1mTzUWm5U5X283eHl/w+vH1uTzhxrlbWl4LNfzkGY95EUB6Sgo34MTuFCxDxV5EK6E9ByokPqhC1vacKgvKVfaN/Hk7BStVgvtdhuWThKcjy+QEKlOM0SxhhQSwhZwJBHRIxwd6imu1VetduDcdV34vm9gRWGI8WiEhIj7/T6KIsdgMECvR+RRhDiOTQzpXoMgCAy43+12EVKutYamuxZfKMhulmWGMM9znA+HGBKams940Lbt/eh0TLSYmQnZCkvmwUaBAdVsSUrapRDfkVbwo7eDxTKZsBn663VBQ4fCSkghW4tpH6xQ/HpRSmFUHEzIFtM0NUo6tIf/DO9VyJbZeqPwKEJWxz/KStnisYSfNURWzjwHwukAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;opened pdf file by emacs&quot;
        title=&quot;opened pdf file by emacs&quot;
        src=&quot;/static/d4798eb86994de0708a4dd31128bc940/fcda8/pdf.png&quot;
        srcset=&quot;/static/d4798eb86994de0708a4dd31128bc940/12f09/pdf.png 148w,
/static/d4798eb86994de0708a4dd31128bc940/e4a3f/pdf.png 295w,
/static/d4798eb86994de0708a4dd31128bc940/fcda8/pdf.png 590w,
/static/d4798eb86994de0708a4dd31128bc940/efc66/pdf.png 885w,
/static/d4798eb86994de0708a4dd31128bc940/c83ae/pdf.png 1180w,
/static/d4798eb86994de0708a4dd31128bc940/6c99d/pdf.png 1447w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;/p&gt;
&lt;p&gt;文字列には正規表現が使えるみたいです。pngファイルをemacsで開くとこうなるので
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/52395ddcfedba26c997ee4dc17b6358c/2aa89/png.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.48648648648649%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB40lEQVQoz1VS2XLTQBDUhxBHtuNK3sCWJe2uVpdNinceOIoiJOKoEFMVUICEKo5Pb6ZnJQcepmZ3dqanu6Xo6ctneP2hw/O3Z3hx9grdxQW6rsP5m3O8+/gel18/4bLfYXf3Gf3v77i+7dH/+ob+Z4ibP7f48uMG13c9rnZXiJbWYXFyjOlijgeTA8RxjEPGYYx4NsX8+AgzeZufLLSHtenRbIj7czyf4WAyQbRap/DNBs4VKKoGhZwtc81o4aoWXjLfTFHC+gq28Jqd1DzrziMXYuyPkizXQ+5LOMlGmp2AuWoALCvNVnIugLkMr41DKgBczMiFTC5zRjCiRB795rEM1FpwVa3AqTQZshnqSW6wSjM8XCVYiiqeGctkrfGIWeoRt/l2q9vJQiWTDS1oWgVnrT59otZklCaZM1RCRbyX21PNUWoLlZe5kEeAfaZHZWBNtlxkta9RBaas9N0OfdFKPOSQHRo4FGQG05XNZquszVC3VQAgy6CoVqt4j+gNG+jTKNcOTM1w3psvthCUfRrtRpkGwNAjgDYAlmFzkBnue8bDAvpkBybjQn5ths5TMi+jNP1d6jDMoXFY3+QDBZY++EnJ8neEDxfmMmMDQz78Ly8wVR+b9h6wrPZ9Y/1fSzj3F6kbnVyUfatCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;open png file by emacs&quot;
        title=&quot;open png file by emacs&quot;
        src=&quot;/static/52395ddcfedba26c997ee4dc17b6358c/fcda8/png.png&quot;
        srcset=&quot;/static/52395ddcfedba26c997ee4dc17b6358c/12f09/png.png 148w,
/static/52395ddcfedba26c997ee4dc17b6358c/e4a3f/png.png 295w,
/static/52395ddcfedba26c997ee4dc17b6358c/fcda8/png.png 590w,
/static/52395ddcfedba26c997ee4dc17b6358c/efc66/png.png 885w,
/static/52395ddcfedba26c997ee4dc17b6358c/c83ae/png.png 1180w,
/static/52395ddcfedba26c997ee4dc17b6358c/2aa89/png.png 1698w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; hoge
 &lt;span class=&quot;token lisp-property property&quot;&gt;:magic&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.PNG&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; hoge-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;こうすれば&lt;code class=&quot;language-text&quot;&gt;.&lt;/code&gt;が任意の1文字&lt;code class=&quot;language-text&quot;&gt;(\211)&lt;/code&gt;にマッチするので対応できます。&lt;/p&gt;
&lt;p&gt;:magic-fallbackは拡張子がある場合はそちらを優先させるモード設定です。
モード指定の優先順序は:magic&gt;:mode&gt;:magic-fallbackとなっているので拡張子で判定するやり方とも共存できます。&lt;/p&gt;
&lt;h3&gt;:demand&lt;/h3&gt;
&lt;p&gt;逆に必ず起動時に読みこませたい時には、遅延キーワードを書かないだけでは完全に遅延を止めることはできません。パッケージ自体のautoloadの効果により自動的に遅延ロードするようになってしまうので、これを阻止して必ず読み込ませるためのキーワードが:demandです。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; html-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:demand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;条件分岐&lt;/h2&gt;
&lt;h3&gt;:if, :when, :unless&lt;/h3&gt;
&lt;p&gt;.emacsファイルを複数のOSで使い回す時などに特定のOSの時のみにインストールしたいパッケージがあるかと思います。そこで条件分岐を行いtrueになった時のみロードさせることができます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; exec-path-from-shell
  &lt;span class=&quot;token lisp-property property&quot;&gt;:if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;memq&lt;/span&gt; window-system &lt;span class=&quot;token punctuation&quot;&gt;&apos;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;mac&lt;/span&gt; ns&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;依存関係&lt;/h2&gt;
&lt;p&gt;ivyなどのパッケージの機能を強化するプラグイン的なパッケージをロードする場合、前提として大元のパッケージがインストールされていなければなりません、そこで依存関係を記述し自身のパッケージを読む前に依存パッケージをロードさせることができます。&lt;/p&gt;
&lt;h3&gt;:requires&lt;/h3&gt;
&lt;p&gt;当該のuse-packageを読み込む直前のタイミングで依存パッケージもロードします。遅延を行なっている場合は当該のパッケージの読み込みタイミングに従います&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:requires&lt;/span&gt; foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:requires&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;foo&lt;/span&gt; bar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:after&lt;/h3&gt;
&lt;p&gt;当該のパッケージを指定のパッケージがロードされた後に続けてロードさせることができます。当該のuse-package句を読んだタイミングではなく、afterに指定したパッケージの読み込みタイミングまで当該パッケージの読み込みを遅延します。&lt;/p&gt;
&lt;p&gt;以下の例ではivyとhydraがどちらもロードされた直後のタイミングまで当該パッケージの読み込みを遅延します。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ivy-hydra
  &lt;span class=&quot;token lisp-property property&quot;&gt;:after&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;ivy&lt;/span&gt; hydra&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; もしくは&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ivy-hydra
  &lt;span class=&quot;token lisp-property property&quot;&gt;:after&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token lisp-property property&quot;&gt;:all&lt;/span&gt; ivy hydra&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以下の例ではivyもしくはhydraのどちらか一方がロードされた直後のタイミングになります。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ivy-hydra
  &lt;span class=&quot;token lisp-property property&quot;&gt;:after&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token lisp-property property&quot;&gt;:any&lt;/span&gt; ivy hydra&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;:after(:any(:all A B) (:all C D))&lt;/code&gt;のように:allと:anyを組み合わせることも可能です。
&lt;/p&gt;
&lt;h2&gt;インストール元を指定する&lt;/h2&gt;
&lt;p&gt;配布されているリポジトリを指定したり、ローカルにあるパッケージをロードさせるための記述です。&lt;/p&gt;
&lt;h3&gt;:load-path&lt;/h3&gt;
&lt;p&gt;ローカルのファイルパスを指定します。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; my-package
  &lt;span class=&quot;token lisp-property property&quot;&gt;:load-path&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;~/emacs/my-package-dir&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:pin&lt;/h3&gt;
&lt;p&gt;パッケージを取得するリポジトリを指定できます。デフォルトではmelpaから取得し、melpaに存在しない場合はemacsに設定されているリポジトリを順次検索します。&lt;/p&gt;
&lt;p&gt;また、use-packageではなく手動でインストールしたパッケージもmanualを指定すればOKです。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; hoge
  &lt;span class=&quot;token lisp-property property&quot;&gt;:pin&lt;/span&gt; gnu&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; org
  &lt;span class=&quot;token lisp-property property&quot;&gt;:pin&lt;/span&gt; manual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;モードライン&lt;/h2&gt;
&lt;p&gt;モードラインに表示するXX-modeの記述を消したり、変更したりできます。&lt;/p&gt;
&lt;h3&gt;:diminish&lt;/h3&gt;
&lt;p&gt;モードラインの表記を消すには:diminishにモード名を指定します。モードラインに表示されている名前でではなくモード名を指定します。大抵の場合はXX-modeという形を取っています。表示を変更することもできます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;;; 表示を消す&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:diminish&lt;/span&gt; addrev-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; 表示を変更する&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:diminish&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;addrev-mode&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;AddR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:delight&lt;/h3&gt;
&lt;p&gt;diminish同様モードラインの表示を消したり変更したりできます。こちらの方が高機能？らしいです。こっちの方が記述が少なかったりマイナーモードに加えてメジャーモードの表示も変更できます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;;; 表示を消す&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:delight&lt;/span&gt; addrev-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; 表示を消す(短縮記法)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:delight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;;; 表示を変更する&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; addrev
  &lt;span class=&quot;token lisp-property property&quot;&gt;:delight&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;addrev-mode&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;AddR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; 変数を利用して表示名を変更する&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; projectile
  &lt;span class=&quot;token lisp-property property&quot;&gt;:delight&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&apos;(&lt;/span&gt;&lt;span class=&quot;token lisp-property property&quot;&gt;:eval&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;concat&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;projectile-project-name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;無効化&lt;/h2&gt;
&lt;h3&gt;:disabled&lt;/h3&gt;
&lt;p&gt;(use-package)句を全て無効化し、スキップします。:disabledをつけるとパッケージのロードのほか設定などすべての項目を評価しなくなります。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; hoge
  &lt;span class=&quot;token lisp-property property&quot;&gt;:disabled&lt;/span&gt;
  &lt;span class=&quot;token lisp-property property&quot;&gt;:config&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;token quoted-symbol variable symbol&quot;&gt;&apos;abcde&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;バイトコンパイル関連&lt;/h2&gt;
&lt;h3&gt;no-require&lt;/h3&gt;
&lt;p&gt;設定を書いているファイルをバイトコンパイルするとエラーでうまく動かなくなったとき用設定？&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; hoge
  &lt;span class=&quot;token lisp-property property&quot;&gt;:no-require&lt;/span&gt;
  &lt;span class=&quot;token lisp-property property&quot;&gt;:config&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;hogeが読み込まれたタイミングで評価される&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:defines, :functions&lt;/h3&gt;
&lt;p&gt;use-packageでは遅延ロード等で当該のパッケージが読み込まれた後にしか評価されない:configなどがありますが、バイトコンパイル時には遅延によりパッケージを読み込んでいないので未定義エラーになることがある様です。これを避けるため同名でダミーの変数、関数を宣言しておき、当該のパッケージをロードしたときに上書きする様にしておくことでエラーを回避するテクニックのようです。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ruby-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:functions&lt;/span&gt; inf-ruby-keys
  &lt;span class=&quot;token lisp-property property&quot;&gt;:config&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token defun&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;my-ruby-mode-hook&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token arguments&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;token quoted-symbol variable symbol&quot;&gt;&apos;inf-ruby&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;inf-ruby-keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;add-hook&lt;/span&gt; &lt;span class=&quot;token quoted-symbol variable symbol&quot;&gt;&apos;ruby-mode-hook&lt;/span&gt; &lt;span class=&quot;token quoted-symbol variable symbol&quot;&gt;&apos;my-ruby-mode-hook&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;use-packageのextension&lt;/h2&gt;
&lt;p&gt;通常のuse-packageには実装されていない機能を追加するパッケージがあります。別途extensionを読み込むことで追加機能が使えます。&lt;/p&gt;
&lt;h3&gt;use-package-chords&lt;/h3&gt;
&lt;p&gt;複数キーの同時押し、または単一キーの複数回押しをキーバインドに設定できます、内部的に&lt;a href=&quot;http://www.emacswiki.org/emacs/key-chord.el&quot;&gt;key-chords&lt;/a&gt;を利用しています。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; use-package-chords
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;t&lt;/span&gt;
  &lt;span class=&quot;token lisp-property property&quot;&gt;:config&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;key-chord-mode&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; ace-jump-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:chords&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jj&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; ace-jump-char-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;; jの2回押し&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jk&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; ace-jump-word-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;; j -&gt; kの順で押した時&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;jl&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; ace-jump-line-mode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;; j -&gt; lの順で押した時&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;:ensure-system-package&lt;/h3&gt;
&lt;p&gt;依存関係があるのはemacsパッケージ間だけとは限りません、lspやprettierなど実行バイナリに依存しているパッケージもありますね。&lt;/p&gt;
&lt;p&gt;prettierコマンドがある時はパッケージをロードし、無い場合はOSのパッケージマネージャを用いてインストールを試みます。(macOSならhomebrew, ubuntuならapt)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; use-package-ensure-system-package
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;;; rgコマンドがなければ brew install rg を試みます&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; rg
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure-system-package&lt;/span&gt; rg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; コマンド名とインストールの時に指定する名前が違う場合&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;;; rgコマンドがなければ brew install ripgrep を試みます&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; rg
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure-system-package&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;rg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; ripgrep&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  
&lt;span class=&quot;token comment&quot;&gt;;; brewでは無いパッケージマネージャーを使う時&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; prettier-mode
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure-system-package&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;prettier&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;npm install -g prettier&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;さらにコマンドでは無いアプリケーションでも大丈夫みたいです、使うかなこの機能？&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;lisp&quot;&gt;&lt;pre class=&quot;language-lisp&quot;&gt;&lt;code class=&quot;language-lisp&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;use-package&lt;/span&gt; dash-at-point
  &lt;span class=&quot;token lisp-property property&quot;&gt;:if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token car&quot;&gt;eq&lt;/span&gt; system-type &lt;span class=&quot;token quoted-symbol variable symbol&quot;&gt;&apos;darwin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token lisp-property property&quot;&gt;:ensure-system-package&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/Applications/Dash.app&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;brew cask install dash&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;まとめ&lt;/h2&gt;
&lt;p&gt;とりあえずdocにあるものは全て書けたかなと思います。冗長になってしまいましたがこれでしばらくはuse-packageで迷うことはなさそうです。&lt;/p&gt;
&lt;p&gt;ここまで書いておいてアレ何ですが、use-packageを調べていて何度も見かけた&lt;a href=&quot;https://qiita.com/conao3/items/dc88bdadb0523ef95878&quot;&gt;leaf.el&lt;/a&gt;がとても気になっています。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Chromeのティラノサウルスについて調べた]]></title><description><![CDATA[google chrome…]]></description><link>https://blog.magcho.com/2019/11/dino/</link><guid isPermaLink="false">https://blog.magcho.com/2019/11/dino/</guid><pubDate>Fri, 22 Nov 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;google chromeにはネットワークに問題があると恐竜のイラストが表示され、スペースや上下キーで操作できる障害物避けゲームができることは有名な話ですね。自分はこの無愛想なデザインの恐竜がかわいくて好きです。&lt;/p&gt;
&lt;p&gt;さて、好きなものを身に付けたいという感情は自然の摂理ですが。この恐竜に関するグッズはgoogleのオンラインショップではTシャツしか販売していません、実店舗に置物はあるらしい。ストラップとかステッカーとかトートバックとかが欲しいんです。&lt;/p&gt;
&lt;p&gt;ないなら作るしかないので、そもそも作って問題ないのかを考え、ライセンス周りを調べてみたかった所存です。&lt;/p&gt;
&lt;p&gt;この恐竜はネットワークに問題がある時に加えて、chromeで&lt;code class=&quot;language-text&quot;&gt;chrome://dino&lt;/code&gt;にアクセスすることで表示することができます。これを見る感じdinoと呼ばれているみたいですね。&lt;/p&gt;
&lt;p&gt;ちなみにネットワークエラーの時には小さいdinoくんですが&lt;code class=&quot;language-text&quot;&gt;chrome://dino&lt;/code&gt;で表示したdinoくんは画面幅一杯まで拡大され、大きいdinoくんに浸ることができます。&lt;/p&gt;
&lt;h2&gt;google Chromeについて&lt;/h2&gt;
&lt;p&gt;Chromeはgoogleが開発しているブラウザーであり、クローズドソースで開発しています。同じくgoogleが中心となって開発しているchromiumをベースにしています。OSSでない部分をgoogleが付け足したのがchromeのようです。次世代のEdgeと同じですね。&lt;/p&gt;
&lt;p&gt;chromiumは大半がBSDライセンスですが、MITライセンスなどなど物によってライセンスが異なるmixed licenseだそうです。&lt;/p&gt;
&lt;p&gt;さてここで問題のdinoくんですが、こちらはchromiumに搭載されているものであり、BSDライセンスが適用されています。著作権表示や許諾表示をすれば自由に個人利用、商業利用も可能ですね。やったね。&lt;/p&gt;
&lt;p&gt;chromiumに内包されているdinoくんですがこれはOSSなので実装を覗くことができますね。それではdinoくんの中身を見てみましょう。&lt;/p&gt;
&lt;h2&gt;dinoくんの実装&lt;/h2&gt;
&lt;p&gt;chromiumはgithub上でミラーされたコードを見ることができます、それっぽいファイル名を探していたらdinoくんの&lt;a href=&quot;https://github.com/chromium/chromium/blob/master/components/neterror/resources/offline.js&quot;&gt;実装部分&lt;/a&gt;を見つけました、Javascriptで実装されていますね。ここにもBSDライセンスであることが明記されています。&lt;/p&gt;
&lt;p&gt;余談ですが、chrome10周年を記念してバースデーケーキと帽子のアイテムが&lt;a href=&quot;https://github.com/chromium/chromium/commit/693b9fcac0ff52f6653c0a27815d39fd077856a4#diff-0e1aac1740e5d99418a0adeb215044bb&quot;&gt;追加&lt;/a&gt;されたことがありました。今は該当部分の実装は無くなっています。&lt;/p&gt;
&lt;h2&gt;ライセンス&lt;/h2&gt;
&lt;p&gt;ということでdinoくんはBSDライセンスということで大丈夫そうです。とりあえず自分用にdinoくんトートバックでも作ろうかな。&lt;/p&gt;
&lt;h2&gt;おまけ&lt;/h2&gt;
&lt;p&gt;この記事を書くためにdinoくんを眺めていたらdinoくんの描画の&lt;a href=&quot;https://bugs.chromium.org/p/chromium/issues/detail?id=1028467&quot;&gt;バグ&lt;/a&gt;を見つけたのでchromium issueに投げてみました、このてのコミュニティーにissueを投げるのは初めてで投稿カテゴリーを間違えてポストしてしまいましたが管理されているgoogleの社員の方に半日ほどで修正していただき、それから24時間しない間にdinoを実装された方からコメントがつきました。&lt;/p&gt;
&lt;p&gt;Chromiumというとても大きなプロジェクトで、優先度がかなり低いバグでも2日かからないくらいで修正に取りかかるのはすごいと思いました。さすがですね。&lt;/p&gt;
&lt;p&gt;おしまい。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[dotfilesを管理するツールを作った]]></title><description><![CDATA[増税前にPCを買い換えておこうと思い、高校の時に買ったMacBook Air 13-inch Early 2015から2019 MacBook Pro 2019 13-inch 4thunderbolt3 portsにしました。 メモリとかSSDとかも追加して、この度念願のUS…]]></description><link>https://blog.magcho.com/2019/09/dotz/</link><guid isPermaLink="false">https://blog.magcho.com/2019/09/dotz/</guid><pubDate>Fri, 20 Sep 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;増税前にPCを買い換えておこうと思い、高校の時に買ったMacBook Air 13-inch Early 2015から2019 MacBook Pro 2019 13-inch 4thunderbolt3 portsにしました。&lt;/p&gt;
&lt;p&gt;メモリとかSSDとかも追加して、この度念願のUSキーボードにしました。&lt;/p&gt;
&lt;p&gt;初バタフライキーボードです、このペチペチ感が楽しいです。&lt;/p&gt;
&lt;p&gt;さて、パソコンを買い換えたということは環境を再構築しなければなりません、大概のアプリケーションはhomebrewで管理しているのでインストール用のスクリプトを書いておけばいいですね。&lt;/p&gt;
&lt;p&gt;あとは設定周りのファイルを移行したいです。正直dotfilesを管理するツールはいくらでもあります。前はhomeshickを使ってましたがこれはディレクトリが追加できないなど、ちょっと不便だなぁと思うところが多かったので違うツールを探していたんですがGolangを使ってみたかったという適当な理由で自作してしまいました。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/magcho/dotz&quot;&gt;dotz github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;適当にロゴっぽいものをつけてREADMEを適当な英語で作っておけばそれっぽく見えますね。内容はただのlnコマンドなどのラッパーです。&lt;/p&gt;
&lt;p&gt;今回はGolang向けのコマンドラインアプリケーションライブラリの &lt;a href=&quot;https://github.com/urfave/cli&quot;&gt;urfave/cli&lt;/a&gt;を使いました。&lt;/p&gt;
&lt;p&gt;このライブラリではサブコマンドやパラメータのほか、yaml, toml, jsonなどの設定ファイルを読み込んだり環境変数を読んだりとcliアプリケーションを作る上ではこのライブラリで完結すると思います。あと、ドキュメント読まなくても書き始められるぐらいわかりやすい構造をしています。感動！！&lt;/p&gt;
&lt;p&gt;今回はとりあえずmacOS向けのバイナリしか作ってませんが、CIでそれぞれのOS向けのバイナリをビルドして公開してみようかなと考えています。&lt;/p&gt;
&lt;p&gt;また、今回はhomebrewの&lt;a href=&quot;https://github.com/magcho/homebrew-magcho&quot;&gt;オレオレformula&lt;/a&gt;も用意しているのでdotzのインストール自体もセットアップスクリプト内に収めることができますね、最高です。 &lt;/p&gt;</content:encoded></item><item><title><![CDATA[tmux上のemacsで下線が表示されなかった話]]></title><description><![CDATA[macOS(Mojave)でiterm2を使っています、emacsのテーマを設定していてunderlineが表示できなくて困りました。 emacsでは文字色や背景色のほか、文字の下線, 太字,  斜体, 取り消しなど色々な表記ができます。 自分の環境ではflycheck…]]></description><link>https://blog.magcho.com/2019/08/tmux-emacs-underline/</link><guid isPermaLink="false">https://blog.magcho.com/2019/08/tmux-emacs-underline/</guid><pubDate>Wed, 21 Aug 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;macOS(Mojave)でiterm2を使っています、emacsのテーマを設定していてunderlineが表示できなくて困りました。&lt;/p&gt;
&lt;p&gt;emacsでは文字色や背景色のほか、&lt;u&gt;文字の下線&lt;/u&gt;, &lt;strong&gt;太字&lt;/strong&gt;,  &lt;em&gt;斜体&lt;/em&gt;, &lt;s&gt;取り消し&lt;/s&gt;など色々な表記ができます。&lt;/p&gt;
&lt;p&gt;自分の環境ではflycheckのerror, warningなどが下線付きの書式になるはずでした。&lt;/p&gt;
&lt;p&gt;iterm2上で直接emacsを起動している時にはきちんと下線が表示されますが、tmuxセッション上でemacsを起動すると下線が表示されませんでした。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/278d07693c283ac5622e6fa4c48a363c/a3767/1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAAB9ElEQVQoz0WPzW7TQBSF/RBIkAIKjeP/f3v8kxQ7JgmkoZSoSilNrMSkIQ1ljcQbsEDs2fAIbNnzXGhOxbVD6OLTuXPG98yxsH6/uJ2/OcOymGFRzLFaFrguL3FVnGM1n6KYXaJcLvGOqPRqtcLHmxtcbzY7vyxr/bDd3o5Hoz/Cz69z/Ph8gl9fXuP3twm+fxpje9HDdvYMm7c50jThQRLzqJNwxhgPgoD7vl8T/DtXVHftVgtCGIaImYeTnOFi0sVwGKJlmzgkr0WonQB6l4g8yIYGURT/06KAPaLYxsGD+1wwbQ+m5cAMQuhxAsW2obsWjIC80IXOXJpJHQuqrkGSJL5HlmUQtSqKgkcHDQh+0kPe6yNLczAWQnPMerlS1TJ2UGPVNGDTY5Zl1arrOu5CpbtAM+ohSgeIsgHC7lN4gQfHdaHRgqwqhLpTWlBorlArj4Lqpm2Jt8WqscIfNhpcMOjFTi9DnKXo5Dss+kXZ1KC5Zt10j1phG1B0ClbkOlgzZBi2BMOR0XxCDbNOghcUEgUMcbcDL2SwfQ9BFNKHVt1QNXRoFoVR6xo6u3QXOR7y4zZOy8cYz5pg6T0Ir9ZnmKynGCyPkRZ95IvnSOd99MsRzUNkxaD2ommXR9MjxOdH3H8ZwRuH8AlvzGrYaYxDu4m/DLAoqJwF2fkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;1&quot;
        title=&quot;1&quot;
        src=&quot;/static/278d07693c283ac5622e6fa4c48a363c/fcda8/1.png&quot;
        srcset=&quot;/static/278d07693c283ac5622e6fa4c48a363c/12f09/1.png 148w,
/static/278d07693c283ac5622e6fa4c48a363c/e4a3f/1.png 295w,
/static/278d07693c283ac5622e6fa4c48a363c/fcda8/1.png 590w,
/static/278d07693c283ac5622e6fa4c48a363c/efc66/1.png 885w,
/static/278d07693c283ac5622e6fa4c48a363c/c83ae/1.png 1180w,
/static/278d07693c283ac5622e6fa4c48a363c/a3767/1.png 1210w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1b1a161b56c9322a8051ba695e48263c/a3767/2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABw0lEQVQoz1WRW5OTQBCF+Q2+aNbVspLAwHBnGAiQC3FzKfdNyzXJxg1sygff/P/WHMtmskn04avT00MdznQbhx8tNt8ecHxu8Xw8ag6HA7bbLTabLdqmwffHPXZ03u122O/3aNsWh6cnPNK5o7trmubParn4bUy/bJHf3WO0uEe9XGG+XiOtSqSTCmJcIskzJYuRyspCSSlVmqZKCKH1X7o7c9CHEYkccSIg0gz5tDPJYcc+nCKBM0rASwFeEFkMy3UwGAw0/X7/P7rezZvXyvDDCL4fIM4k4moEHvqwCScJwdNI44ro1OcOTNNUZyzLAqGVMYbbmx6MeDRDPfuIyaRGkkrYgQenMww92L57gnq25yIIAvq5r5VzjrMpKRm/GHp5jWx6RywgizFiESOMI53Gshlhn5QS2FSf6RJdU5rXhMzhkLQEOa5QzCYoaI5uFOh5XVJ6nJTrmpFajv1iZup0p5rhbY8My7JEXc/pyRNUVNMG9bOs7sPhUJnD68wuXHo0P2YpxkzYjqXe3faUsZhP8Wk1QyoF3DREQJsNCT+P4UlaSOLDo76fdcsJ4BGdStp6lWdYf2V4+PUen39+QL58hb9oMh33c9wsywAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;2&quot;
        title=&quot;2&quot;
        src=&quot;/static/1b1a161b56c9322a8051ba695e48263c/fcda8/2.png&quot;
        srcset=&quot;/static/1b1a161b56c9322a8051ba695e48263c/12f09/2.png 148w,
/static/1b1a161b56c9322a8051ba695e48263c/e4a3f/2.png 295w,
/static/1b1a161b56c9322a8051ba695e48263c/fcda8/2.png 590w,
/static/1b1a161b56c9322a8051ba695e48263c/efc66/2.png 885w,
/static/1b1a161b56c9322a8051ba695e48263c/c83ae/2.png 1180w,
/static/1b1a161b56c9322a8051ba695e48263c/a3767/2.png 1210w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;そもそもターミナル上でこのようにunderlineやboldなどの文字装飾を行う時はANSIエスケープシーケンスかなーと思ったんですが
iterm直接とtmux上で&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;print &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[1m BOLD &lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[0m&lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[4m Underline &lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[0m&lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[7m Reversed &lt;span class=&quot;token entity&quot; title=&quot;\u001b&quot;&gt;\u001b&lt;/span&gt;[0m&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;を表示させても正しく同じ表示になります、アレレ。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/235b9d1380cd7f9ff09f6e65a16c9bcd/a3767/3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQoz3WS2W7bMBBFKcnaLGqnuIlybMl2ErRoEAdFbThP7f//UKFbdBwDiVu0DxdDCeDhGQ7ZejNiHLeYph026xHWOrh+gDZUbY9138NpDdN1WFmFwRjsxxEP2y3upxGPu4nWE/ab9a9eyZ+s7lrYXqOTAlK2EKJCUfK5bKq54MlcJt5cZ8FcLxezLNnMQzYnPptjxmb/JgFlwRiYW/XY7yyOp2ecX1/Q2wLO1TC2ge44rIixUikGeUkEVQVQ9QJdGSDxPaTBRy4HMa1bTBuJ47cnHJ4fYGQGJTmUKiCblAAheoKaJoLIAzTco38+ytRD7L3Z4jbMOY3d1uJ0esHTlz2kyKh1gskSor4CTRNDU1oC1pmHrvCRx/8BDk5gPym8ng/4erinNlNouSTLDF1NZm1IbUdUybC4GpomQB6xfwNbbaDMgFYaCGlR1gLLvEJWdeAZp40h2cTIkxg88umuGCL2AfobytZ3Ep8fLX58P+J8+gRnlpSMhlNCi+sgVjpG30UYXUjfAd1pgCLx/gC/A6tWoG5aaHp/QirwPEdeVsirBgXPaGNIA4go8dskL0YXy1s7qu/A3/nE1Wqy/nPGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;3&quot;
        title=&quot;3&quot;
        src=&quot;/static/235b9d1380cd7f9ff09f6e65a16c9bcd/fcda8/3.png&quot;
        srcset=&quot;/static/235b9d1380cd7f9ff09f6e65a16c9bcd/12f09/3.png 148w,
/static/235b9d1380cd7f9ff09f6e65a16c9bcd/e4a3f/3.png 295w,
/static/235b9d1380cd7f9ff09f6e65a16c9bcd/fcda8/3.png 590w,
/static/235b9d1380cd7f9ff09f6e65a16c9bcd/efc66/3.png 885w,
/static/235b9d1380cd7f9ff09f6e65a16c9bcd/c83ae/3.png 1180w,
/static/235b9d1380cd7f9ff09f6e65a16c9bcd/a3767/3.png 1210w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;なのでemacsの設定が悪いのかと思って色々変えてみたんですが、結局はtmuxの設定でした。&lt;/p&gt;
&lt;p&gt;もともと、tmuxには256色に対応させるために以下の設定をしていたんですが、それが原因だったようでscreenではなくxtermにすると改善しました。&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;.tmux.conf&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# これはダメ&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; -g default-terminal &lt;span class=&quot;token string&quot;&gt;&quot;screen-256color&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# こっちにする&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; -g default-terminal &lt;span class=&quot;token string&quot;&gt;&quot;xterm-256color&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ちなみにtmuxのQ&amp;#x26;Aに書いてあった&lt;code class=&quot;language-text&quot;&gt;tmux-256color&lt;/code&gt;を設定するとemacsがエラーで起動しませんでした。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[homebrew-caskにないアプリは自分で追加しよう]]></title><description><![CDATA[Cask に追加してみる homebrew を更新し、作業中は自動更新を止める まずで更新をかけておきます、これで Cask 含め brew 本体も更新されます。 次に、homebrew は Cask…]]></description><link>https://blog.magcho.com/2019/01/homebrew-cask-add/</link><guid isPermaLink="false">https://blog.magcho.com/2019/01/homebrew-cask-add/</guid><pubDate>Tue, 20 Aug 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Cask に追加してみる&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;homebrew を更新し、作業中は自動更新を止める&lt;/p&gt;
&lt;p&gt;まず&lt;code class=&quot;language-text&quot;&gt;brew update&lt;/code&gt;で更新をかけておきます、これで Cask 含め brew 本体も更新されます。&lt;/p&gt;
&lt;p&gt;次に、homebrew は Cask を自動更新する仕様なので作業中はこれを止めておきます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;HOMEBREW_NO_AUTO_UPDATE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;環境変数なのでターミナルを開き直したあとや、別のターミナルには効きませんのでご注意を。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cask に追加したいアプリケーションをインストールしておく&lt;/p&gt;
&lt;p&gt;今までと同じようにブラウザでインストーラーなどをダウンロードし、インストールします。後々使うのでダウンロードしたファイルを消さないようにしましょう。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;github 上で&lt;a href=&quot;https://github.com/Homebrew/homebrew-cask&quot;&gt;homebrew-cask&lt;/a&gt;を fork する&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;local 上の homebrew ディレクトリの git に fork したリポジトリを追加する&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token assign-left variable&quot;&gt;github_user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;my-github-username&gt;&apos;&lt;/span&gt;
$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;brew --repository&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;/Library/Taps/Homebrew/homebrew-cask
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; remote &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${github_user}&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://github.com/&lt;span class=&quot;token variable&quot;&gt;${github_user}&lt;/span&gt;/homebrew-cask&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cask 名を決める&lt;/p&gt;
&lt;p&gt;いわゆる&lt;code class=&quot;language-text&quot;&gt;brew cask install 〇〇&lt;/code&gt;のところの名前です。命名規則があるようなのですがこれを自動で決めてくれるコマンドがあります。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;brew --repository&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/Library/Taps/Homebrew/homebrew-cask/developer/bin/generate_cask_token&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/Applications/〇〇.app&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cask の定義ファイルを作る&lt;/p&gt;
&lt;p&gt;定義ファイルは.rb ファイルのテキストです。Stanzas という記法らしいです。これもコマンドにて雛形を作ってくれます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ brew cask create &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Cask名&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;定義ファイルを書く&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Homebrew/homebrew-cask/blob/master/doc/development/adding_a_cask.md#cask-stanzas&quot;&gt;homebrew-cask の仕様&lt;/a&gt;などを読みながら雛形の空欄を埋めていきます。&lt;/p&gt;
&lt;p&gt;ちなみに&lt;code class=&quot;language-text&quot;&gt;SHA-256&lt;/code&gt;の部分は.app ではなくダウンロードした.zip や.dmg などのファイルのハッシュ値です。これは以下のコマンドで確認できます。ダウンロードフォルダにファイルが残っていると思うので以下のような感じで確認できます。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ shasum -a &lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;~/Downloads/〇〇.zip&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;また、url にバージョンの数字などが含まれる場合は変数としておくことでバージョンアップ時に定義ファイルを自動更新できるので変更しておきましょう。変数は&lt;code class=&quot;language-text&quot;&gt;#{version}&lt;/code&gt;で置き換えることができます。ここで注意したいのは先のコマンドで作った雛形ではシングルクオートですが、変数を含める際にはダブルクオートでなければなりません。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Before url &amp;#39;https://example.com/app-v1.0.1.zip&amp;#39;
After  url &amp;quot;https://example.com/app-v#{version}.zip&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;name の部分にはスペースを含めることができます。大文字小文字やスペース位置などを正確に入力しておきましょう。&lt;/p&gt;
&lt;p&gt;app には&lt;code class=&quot;language-text&quot;&gt;/Applications&lt;/code&gt;にインストールされているファイル名を入力しておきます。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;書き上げた定義ファイルの確認&lt;/p&gt;
&lt;p&gt;まず実際にインストールできるか確認しましょう。手順の中ですでに PC 内にインストール済みなので、アンインストールするか、&lt;code class=&quot;language-text&quot;&gt;-f&lt;/code&gt;オプションで上書きしましょう。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ brew cask &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -f 〇〇&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;インストール後動作に問題がなければ OK です。&lt;/p&gt;
&lt;p&gt;定義ファイルのシンタックスチェックや、必要事項の記入漏れなどを確認・自動修正してくれるコマンドが備えれらています。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ brew cask audit 〇〇 --download
$ brew cask style Casks/〇〇.rb

$ brew cask style Casks/〇〇.rb --fix   // &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;- 自動修正してくれます。&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;これにて定義ファイルが完成です。次は PR をしていきます。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;変更を commit・push する&lt;/p&gt;
&lt;p&gt;コミットメッセージにもガイドラインが決まっています。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The first line is commit summary, 50 characters or less,&lt;br&gt;
Followed by an empty line,&lt;br&gt;
Followed by an explanation of the commit, wrapped to 72 characters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Homebrew/homebrew-cask/blob/master/doc/development/adding_a_cask.md#commit-messages&quot;&gt;ここ&lt;/a&gt;には例とかもっと詳しいガイドラインの紹介とかがあります
そして fork した自分のリポジトリに push します&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; push &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;my-github-username&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;branch名&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;プルリクエストを出す&lt;/p&gt;
&lt;p&gt;普通に Github 上でプルリクを発行します。メッセージに自動で必要項目の雛形が出てくるので記入、チェックを入れて PR しましょう。1~2 日ぐらいでレビュー or マージしてくれます。みなさん優しくて不都合があっても教えてくれます。&lt;/p&gt;
&lt;p&gt;これで晴れて homebrew のコントリビュータになれました！！ヤッタネ！！&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;最後に作業した環境を戻しておきます&lt;/p&gt;
&lt;p&gt;推奨されているのでやっときましょう&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;brew --repository&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;/Library/Taps/Homebrew/homebrew-cask
$ &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; checkout master&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Apple watchを買った]]></title><description><![CDATA[先日 Apple watch のシリーズ 3 の 42mm モデルを買いました。ほんとは paypay のキャッシュバックキャンペーンで買いたかったんですが、忙しくて買い損ねてしまった。 スマートウォッチを買うのは初めてではなくて、5 月ぐらいから amazon で売ってる…]]></description><link>https://blog.magcho.com/2019/01/apple-watch/</link><guid isPermaLink="false">https://blog.magcho.com/2019/01/apple-watch/</guid><pubDate>Sun, 20 Jan 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;先日 Apple watch のシリーズ 3 の 42mm モデルを買いました。ほんとは paypay のキャッシュバックキャンペーンで買いたかったんですが、忙しくて買い損ねてしまった。&lt;/p&gt;
&lt;p&gt;スマートウォッチを買うのは初めてではなくて、5 月ぐらいから amazon で売ってる 3,000 円ぐらいの中国の&lt;a href=&quot;https://www.amazon.co.jp/dp/B075P36RJG/&quot;&gt;ヘルスケアバンド&lt;/a&gt;みたいなやつを買ってつけてました。iPhone の通知を振動とディスプレイで表示してくれるのでとても便利です。自分はお仕事柄暗くて大音量の音が鳴っている空間にいることがあるのでポケットにいれたスマホの通知に気が付きません。さらにスマートウォッチならバックライトがついてたり、有機 EL でディスプレイが光るので暗くても表示が見えて良きです。&lt;/p&gt;
&lt;p&gt;そして、apple watch に買い換えてからなんですが、以前のスマートウォッチに比べて画面が大きいですし、厚みが 5mm ほど増えました。たった 5mm じゃないかと思っていたんですが、つけて最初の 3 日間ぐらいは引き戸を開ける時や、引き出しを開ける時、本棚のほんを取るときなどに apple watch 本体をガンガンぶつけました。今は体が慣れてしまったのかぶつけることはなくなりました。たった 5mm に人間の神秘を垣間見た感じです、、大げさに言い過ぎですね。&lt;/p&gt;
&lt;p&gt;今の所、apple watch でよく使う機能は NFC 機能と Spority のリモコン、PokeGO です。これだけのためにスマートウォッチに 4 万も出したのかと言われそうですが、腕時計で 4 万と思えば許してもらえそうな気がします。&lt;/p&gt;
&lt;p&gt;そういえば、この spotify のリモコンなのですが、動作条件がちょっと特殊です、自分の使い方のせいなのですが。Spotify は apple watch にペアリングしている iPhone X と前使っていた iPhone5 と PC で利用しています。基本的に apple watch からはペアリングしている iPhone しか操作できないのですが、Spotify には再生同期機能がありまして、本来なら、スマホで止めた位置から PC などで続きが聞けるよ！な機能です。この機能は apple watch をのぞいて全てのプラットフォームで同期できます。&lt;/p&gt;
&lt;p&gt;なので PC の Spotify を apple watch で操作するときはまず、ペアリングしている iPhone を起動して PC と同期した上で PC で再生すると 3 つのデバイス越しに PC が操作できるというわけです。このときペアリングしている iPhone はバックグラウンドにしても大丈夫なので不便はありません。&lt;/p&gt;
&lt;p&gt;そういうわけで、Apple Music はできないけど Spotify は apple watch で全てのプラットフォームのリモコンになるよっていう話でした。&lt;/p&gt;
&lt;p&gt;今回もひどい日本語ですね。日本語が不自由だ。&lt;/p&gt;
&lt;p&gt;おわり&lt;/p&gt;</content:encoded></item><item><title><![CDATA[キャッシュレス決済について思うこと]]></title><description><![CDATA[来年の後半あたりからキャッシュレス決済に補助金がつくとかつかないとか言われてますね。自分は 4 月大学に入ってから出来るだけ現金を使わない生活をしてきました。理由としては家計簿を自動化したかったからです。 高校生の頃はあまり買い物もしなかったので zaim…]]></description><link>https://blog.magcho.com/2018/12/kyash-less/</link><guid isPermaLink="false">https://blog.magcho.com/2018/12/kyash-less/</guid><pubDate>Fri, 28 Dec 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;来年の後半あたりからキャッシュレス決済に補助金がつくとかつかないとか言われてますね。自分は 4 月大学に入ってから出来るだけ現金を使わない生活をしてきました。理由としては家計簿を自動化したかったからです。&lt;/p&gt;
&lt;p&gt;高校生の頃はあまり買い物もしなかったので zaim というレシートの写真を撮ると自動で家計簿をつけてくれるサービスを使っていました。しかし大学生になり、なんとかクレジットカードを作れるようになったので PASMO のオートチャージ機能をつけてみました。これがかなり便利で改札を通過する時に設定額を下回っている場合は自動で入金をしてくれるというものです。つまり改札にタッチした時には。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Ferica コネクション確立&lt;/li&gt;
&lt;li&gt;入場駅コード読み込み&lt;/li&gt;
&lt;li&gt;運賃計算&lt;/li&gt;
&lt;li&gt;カード内残高読み込み&lt;/li&gt;
&lt;li&gt;オートチャージ設定額取得&lt;/li&gt;
&lt;li&gt;チャージ処理書き込み&lt;/li&gt;
&lt;li&gt;書き込み正当性チェック&lt;/li&gt;
&lt;li&gt;運賃決済情報情報書き込み&lt;/li&gt;
&lt;li&gt;書き込み正当性チェック&lt;/li&gt;
&lt;li&gt;コネクション終了&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;これだけの処理をあの短時間で、なおかつ非接触通信ですから給電-&gt;チップの wake up 時間もありますし、通信環境としてはかなり酷な条件です。何気なく利用してますが、改めて考えると凄まじいなと思うばかりです。&lt;/p&gt;
&lt;p&gt;さて自分はこんなことが言いたかったんじゃありません、言いたいことは〇〇 pay 多すぎということです、自分も　 linepay, origami pay, pixiv pay, 楽天 pay,など使ったことがありますが、どれも 1,2 回しか利用しませんでした。どれも導入時期のキャンペーン目当てで利用したこともあるのですが、こういったモバイル決済手順が面倒じゃありません？店員さんに〇〇 pay で！と伝えるとえーとここかな？など画面をウロウロとボタンを探してやっと決済ができるようになることが多くて、なんだか店員さんに手間をかけさせているようで申し訳ないですし。&lt;/p&gt;
&lt;p&gt;さらに、〇〇 pay を利用するときキャッシュバック等のサービスがあったりしますがそうするとそれぞれのサービスに 100 円ぐらいづつ残高がある状態で利用場所が限られた自分の資産が分散している感じがして自分的には苦手です。&lt;/p&gt;
&lt;p&gt;結局のところ交通系 IC と kyash のリアルカードでの決済が一番楽だし、店員さんを困らせることないですし楽ですね。もっと言えば家に Pasori があるので交通系 IC の利用履歴は家に帰ったら一度タッチするだけでログが取れますし、kyash も zaim などを通せば api で取得することができます。&lt;/p&gt;
&lt;p&gt;さて、今回も何が言いたいのかよくわからなくなったところで日記終わりです。日本語が不自由だ。&lt;/p&gt;
&lt;p&gt;気が向いたら自分で作った自動化家計簿の解説とかするかもしれません。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Open Lighting Architectureについて]]></title><description><![CDATA[OLA とは Open Lighting Project という組織が開発をしています。この組織は、2004 年当時、オープンな照明用のプロトコル Art-Net に目をつけた大学生がそれを活用できるように OSS…]]></description><link>https://blog.magcho.com/2018/10/olaについて/</link><guid isPermaLink="false">https://blog.magcho.com/2018/10/olaについて/</guid><pubDate>Sat, 13 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;OLA とは&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.openlighting.org/&quot;&gt;Open Lighting Project&lt;/a&gt; という組織が開発をしています。この組織は、2004 年当時、オープンな照明用のプロトコル Art-Net に目をつけた大学生がそれを活用できるように OSS などを整備していくことを目的に作られたものみたいです。&lt;a href=&quot;https://www.openlighting.org/openlightingproject/about/history/&quot;&gt;(※History)&lt;/a&gt;
OLA の他にも Linux 系で Art-Net 扱うためのライブラリである libartnet や rdm テスターなども製作しています。&lt;/p&gt;
&lt;p&gt;その製作プロジェクトの一つである OLA。これは DMX over Ethernet の各種プロトコルや USB の DMX ノード各種などの信号を変換するノードです。対応しているプロトコル、デバイスは&lt;a href=&quot;https://www.openlighting.org/ola/&quot;&gt;OLA の HP&lt;/a&gt;からも確認できます。&lt;/p&gt;
&lt;p&gt;面白いのが、メーカーが仕様を一般に公開していないノードであっても OLA が対応している点です。開発者がロジアナなどで解析しているんだとか。&lt;/p&gt;
&lt;h2&gt;OLA の使い方&lt;/h2&gt;
&lt;p&gt;OLA は Linux と MacOS・FreeBSD に対応している。残念ながら Windows には対応していないが公式 HP では VM で Ubuntu を動かす方法を紹介している。様々なプラットフォームに対応してる OLA だが操作方法は全て同じで Web 上の GUI で操作できる。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9390d46ccb1858f176344e50650476cf/d54e4/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACFUlEQVQ4y6VT2ZLbIBD0//9P9gOSPO2zd7OWt3xItg4EOhHikjsD9iquSuUplNuMRmjoaZrNy8s3/PzxHa+vr3DeYwHgCWF29Gf9bYVb/o4dgX6QSqPtemzOWYHTpYZSCvVg8Otwxf6U4/0zRS5G8NGuYL1GTXM9mhh/5SpCpzyOwmLDGklJh4XYsMEiLyqUZYmu65DnRUTfDxiGAUVRQMoJjNWULyk3ouYc2eWKsW9xbqhgyQdc+YwwuHToxgkDQVtPWDAbD0ct1aLD+8ceh1Mac4b0uOOGmdYuxChtDDa8JYadiR9XvcGRPsiyDNb5uMmNik2kj/MLtLEw1sGTfs8IeoZxFlSwIIbnSqGX1G6rcaUWq4pBzxrTJDGTtqHFLE3Bqb11l6dxezyvDHMxo2g0DtWEw/GEXZJgt0uQUhEpJY6U227f6Dkwd2uRLyzPBSsho4ZK+9jylcTu2hbW2pUBY4wOpo/MglYB/2QoWoVCaNJmiZa4UMFRKoQlQbegEeMCrObgokXFOMXi7r+HhsGPfzSsR1Sk3aiChiaaNLTgHmKHpVw0+Njt44Gl2SXO4dDWQ3kUvLRkm7oZIch/o3LRh/8zyp4K5mzAqVTRdyHRTh7D7NGT87vJUmwoNnQTHPrZ0Xv7iP2KcEuUWfDJNDbzPK87BPr6YVZNLTG6etuEIzk2dPoFkiRDXoqnNXdz69XgC34DvNbo+wKcDzUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ola web ui&quot;
        title=&quot;ola web ui&quot;
        src=&quot;/static/9390d46ccb1858f176344e50650476cf/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png&quot;
        srcset=&quot;/static/9390d46ccb1858f176344e50650476cf/12f09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png 148w,
/static/9390d46ccb1858f176344e50650476cf/e4a3f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png 295w,
/static/9390d46ccb1858f176344e50650476cf/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png 590w,
/static/9390d46ccb1858f176344e50650476cf/d54e4/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%200.13.04.png 747w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;“Add Universe”ボタンを押して、Universe Id と Universe Name を入力し、使いたいプロトコルにチェックを入れ、“Add Universe”を押すだけです、簡単ですね。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d540755579d6f987460d4ef6c631dbde/7e509/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.54054054054055%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACVElEQVQ4y31T2XKcMBDk/38pfknyFr84rvLau8t9wwrY5RQI6LS0duJUpULVIGo0anp6WtbDwxd8//YVj48/sK4bVgDrDrNuDMXXwvzC5L9jY82OYZQQ9RVWWlTwohLTNKG4zXjzM9hhjpOf4uXkIxEd6mGD6NV/oxpW1OMGq24XpPUM/gQlv7O8QJnn6NoWQz9g2zbs3Pv72T+tfzY1W6vpZqTVaBJFOyNMCgRRgiQr0A4Ss9ohlw2Svc8mdiMJU7+lmfmh98aZgO2wIK8njHKFIG3XD/H09BNCVFDr++F3vbSek1xguz6y4gLHC3A8O+iGydQZwKZb4OUDNHDSLLjULQoWZ2TYNFeM42TYb1oTDb4o5NyTcsbt1rHmBqVWU6NZWt2oEF9Gtj3BFxJxVuJ4PMF1PRwOr7Bt12i4vQupgTwy08DTJMmYsszLfU8D1tQwERNmilK0CmlZI0lSpGmGMIzh+xEPzkZ6TVIfFqI2rOI4RczaPC/ZCYFJ1Lr2nCzZqfUOGOeCrByEQQTH8XCmRiOZfMxUM0ySzHjWYRcB6zzPNyQMYEXvacCeGgZsOS0rsgoQc9IuxbcJqgE/GEoORWusGQZhZAAdx2VH+R2wHRQuV8lJLYjpx+JSk12ILEkQcfWp14dG+lFKoSxK7PRnFEWmNgpDk9OTtgQZullvphg3M47hBQc7xJsT4fnVYZz5wx6t3EyU1xEOb1ZDqV5ZcziHeH5zYQe5uS2W1m7RBsPdb1Ld/aYnVlY9Xs4VTl5Nf/I6niIaXhgja7Nrc3+Oia9fmTbgxz+4bW8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;          2018 10 14 1 20 54&quot;
        title=&quot;          2018 10 14 1 20 54&quot;
        src=&quot;/static/d540755579d6f987460d4ef6c631dbde/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png&quot;
        srcset=&quot;/static/d540755579d6f987460d4ef6c631dbde/12f09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png 148w,
/static/d540755579d6f987460d4ef6c631dbde/e4a3f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png 295w,
/static/d540755579d6f987460d4ef6c631dbde/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png 590w,
/static/d540755579d6f987460d4ef6c631dbde/7e509/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.20.54.png 745w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;しかし、このままでは左に青字で書かれている Plugins のデバイスが右のチェックボックスに表示されていません。これは OLA は OLA がデバイスを認識していないためです。試しに何かしらの USB デバイスを接続して”Reload Plugin”してみてください、一覧に表示されるようになったと思います&lt;/p&gt;
&lt;p&gt;でもデバイスによっては接続しても表示してくれないものもあります、そのような場合は別途設定を行う必要があります。&lt;/p&gt;
&lt;h2&gt;表示されないデバイスを使えるようにする&lt;/h2&gt;
&lt;p&gt;ここでは、Raspberry pi に FTDI USB DMX を接続する流れを説明していきます。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;RaspberryPi が FTDI デバイスを扱えるようにルールファイルを作成します。詳しくは&lt;a href=&quot;https://wiki.openlighting.org/index.php/OLA_Device_Specific_Configuration#Open_DMX_USB_.2F_FTDI_RS485&quot;&gt;公式 Wiki&lt;/a&gt;にも書いてあります。
&lt;code class=&quot;language-text&quot;&gt;/etc/udev/rules.d/10-local.rules&lt;/code&gt;というパスに&lt;/li&gt;
&lt;/ol&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;10-local.rules&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# udev rules for ftdi devices&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;SUBSYSTEM&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;usb|usb_device&quot;&lt;/span&gt;, &lt;span class=&quot;token assign-left variable&quot;&gt;ACTION&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;add&quot;&lt;/span&gt;, ATTRS&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;idVendor&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;0403&quot;&lt;/span&gt;, ATTRS&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;idProduct&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;6001&quot;&lt;/span&gt;, &lt;span class=&quot;token assign-left variable&quot;&gt;GROUP&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;plugdev&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;を保存します、多分ルールファイルはデフォルトでは存在しないので新規作成してください。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;左のリストから”FTDI USB DMX”をクリックし、詳細を見ます。&lt;code class=&quot;language-text&quot;&gt;Enabled in Config File&lt;/code&gt;と&lt;code class=&quot;language-text&quot;&gt;Active&lt;/code&gt;が No になっていますね。OLA で使用するためにはこの２つが YES になっていなければなりません。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1761c45aad4b37750a0429fe00c4e7fa/0f2bc/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.21621621621621%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACAklEQVQ4y31TXXObMBDk//+n5qV5Sx/bxgaLGIPBGAz6QEggYHvISTppSTSzuptBSHu7d8HDwzc8Pn7H09MPzPMCNwPT8hdmcJuw4+TxlittUFY3BFGcYccyjNYgKTl+HU54Zil+hkf8plzZBfIVarhHYWbwfqJ4xz2f6TsQaDpUSwcih/ymwFiMKNzjJWao6gqy6yA5hyC0TQMpOKbJYXstCG7C4uVCP2mHkvJzfgFvObjq0J5ScHbARAetHTyGYSBpZixEYKHtXwSiG5FWPcrWIqk0suwMpRRpuaC7XtEmKbb4bF3mL6zlgHPdQ9sJN7pcSAVNZa70HbE4XQ3Sq0ZDAk2rLnjD9gq4GlHcjHe4aHpkZYOyblFUDc4X0lBbDBOghxlmXGDolX6cN2EIQcWtv7DrHU5UcrPqxwWEEL703hi4aYJz7jVOn+p311CPaKjsnhiwc4Pn3R7HY4IwDLGj/LC6Hh08Ysr3+5Aek+86/lfyakaUKYzUxXHeYB9GYAfm2+c9MuZRFBdUVU06y0+N8S6vhqzrRsK37b3fBG9R17VvobXcZZm/NOOd4aohyzsyBdQ+CmGcIitK1K2E6i1Ep+nBVRIaMxqxzqwEaNzIHEsmWPcRwUibNs63REcHy6ajFrHgekBeSRq/K6KkBksu9FiOU06sSXdlZ0gaO2U/4g/HtOjOi1FHjAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;          2018 10 14 1 27 56&quot;
        title=&quot;          2018 10 14 1 27 56&quot;
        src=&quot;/static/1761c45aad4b37750a0429fe00c4e7fa/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png&quot;
        srcset=&quot;/static/1761c45aad4b37750a0429fe00c4e7fa/12f09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png 148w,
/static/1761c45aad4b37750a0429fe00c4e7fa/e4a3f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png 295w,
/static/1761c45aad4b37750a0429fe00c4e7fa/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png 590w,
/static/1761c45aad4b37750a0429fe00c4e7fa/0f2bc/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.27.56.png 742w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;まず、競合しているデバイスを停止させます&lt;code class=&quot;language-text&quot;&gt;Conflicts with&lt;/code&gt;に書かれているデバイスはこの FTDI 　 USB 　 DMX と同じドライバーであったり、物理的にポートが同じなどの理由で同時に使用できません。なので競合しているデバイスの方を止めます。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/570bb49973b5066fc88948e5253f013d/0f2bc/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.486486486486484%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQoz42Ry07DMBBF8/+/RDfAKitggSogLbQ06SuJE+dpO/bBCXRRKIiRjnxlj0czd4LZ7Irbm2vCMMQ6hwOsZzyVsb+iBzdx0k2nSPOCIN5lRKs9g1GsdoL7+ZL5Ys3jy5qys8h+xJ0x3hftcMZnriOovNgLhRkgSSVRtGC5iIg3G8aQpUTkOYUQ5FnqdYbqOy6HLyiqsbMG2RgOpWKbbKkqiSxq3o9LXvJwmt8MBq09xjBYi3fH434QyEaz3jfEWcfq2PK6OXAoWvw/KpXzVjzRa3why38iELUm8cWUtiSi4yHacfcccyxbbzjklWMrerJK0/mc9g/G92nkOPUd+U2NnaVpNnlV1zXWnvb95dCFEb/zAb19HQTRQmoQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;          2018 10 14 1 47 49&quot;
        title=&quot;          2018 10 14 1 47 49&quot;
        src=&quot;/static/570bb49973b5066fc88948e5253f013d/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png&quot;
        srcset=&quot;/static/570bb49973b5066fc88948e5253f013d/12f09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png 148w,
/static/570bb49973b5066fc88948e5253f013d/e4a3f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png 295w,
/static/570bb49973b5066fc88948e5253f013d/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png 590w,
/static/570bb49973b5066fc88948e5253f013d/0f2bc/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%201.47.49.png 742w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;code class=&quot;language-text&quot;&gt;Config Location&lt;/code&gt;に書いてあるパスに設定ファイルがあるので、編集します。&lt;/li&gt;
&lt;/ol&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;ola-usbserial.conf&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;device_dir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; /dev
device_prefix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ttyUSB
device_prefix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cu.usbserial-
device_prefix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ttyU
enabled &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;--------　falseに変更してください
pro_fps_limit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;190&lt;/span&gt;
tri_use_raw_rdm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
ultra_fps_limit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;のように enabled を false にします。&lt;code class=&quot;language-text&quot;&gt;Enttec Open DMX&lt;/code&gt;も同様です。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;次に&lt;code class=&quot;language-text&quot;&gt;FTDI USB DMX&lt;/code&gt;の設定ファイルを編集します。&lt;/li&gt;
&lt;/ol&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;ola-ftdidmx.conf&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;enabled &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;-- trueに変更してください
frequency &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;USB でデバイスを接続して&lt;code class=&quot;language-text&quot;&gt;Reload Plugin&lt;/code&gt;をすれば Yes になると思います。
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1039733294d6865fbcf173fe7cb42fec/f2793/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQoz41S2Y6bQBDk/79pI20eIj9FK8UXGAs7GBtj8DDDORdTaUZOlKx3pbRU9FxUVx/Bl5cXfH19xWKxgLEWDvD4bdo6KDP9A20nf/43lLZgvEGQ32ocsgrWaJxuAm/bA5ZRgrf1Ht+XEVin0SqgkQ6Nct6LcQIf7BPmu0D0FvldUgSHgg84HlMk+xiHJEHN7hBcgNfMg90rOmNQcsTHRoS8m5X16EaDstHIzjm4EETUouQFttU3Um8poIZS2ns7l4bq4ujzHp7wkPc4lSOOtwHnywVt23qSXjVI6h9UW/y3ecIrk5DK4t4Z8GaAaFoqvsFED7KbRZJ3uNYSvbSwk6MAhOljBKxRlPLgHxZ8RHopcbmWyPISP7McFXWOYpHaCdI4v5691PP+GUFNhAUp7KmGp4rUiQZ916KjtDvySkkYmgD7gKEa/hks555TZq1GQel01Pb9ucZ6EyKOY0TRDqvVBiH5MIyw3Yb+bLlaI8vOD75PmpIWvR/OtBDY0I8zwW63I4IIEa3nfRzvkaYpZUBjRKPkHurcO5W/ACdC/+dLNsKWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;          2018 10 14 2 05 34&quot;
        title=&quot;          2018 10 14 2 05 34&quot;
        src=&quot;/static/1039733294d6865fbcf173fe7cb42fec/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png&quot;
        srcset=&quot;/static/1039733294d6865fbcf173fe7cb42fec/12f09/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png 148w,
/static/1039733294d6865fbcf173fe7cb42fec/e4a3f/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png 295w,
/static/1039733294d6865fbcf173fe7cb42fec/fcda8/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png 590w,
/static/1039733294d6865fbcf173fe7cb42fec/f2793/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202018-10-14%202.05.34.png 743w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[ブログをgatsbyに移行した話]]></title><description><![CDATA[前は hatenablog を使っていたものの、自分でブログを構築したくなったので作ってみた。WordPress 等の CMS でやるにはメンテナンスが面倒なこともあって静的サイトジェネレータを使いました。一度 jekyll で作りましたが gatsbyjs…]]></description><link>https://blog.magcho.com/2018/09/gatsbyに移行した話/</link><guid isPermaLink="false">https://blog.magcho.com/2018/09/gatsbyに移行した話/</guid><pubDate>Wed, 26 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;前は hatenablog を使っていたものの、自分でブログを構築したくなったので作ってみた。WordPress 等の CMS でやるにはメンテナンスが面倒なこともあって静的サイトジェネレータを使いました。一度 jekyll で作りましたが gatsbyjs を教えてもらってその表示速度に驚かされたのでこれはやるしかないと思い作りました。&lt;/p&gt;
&lt;p&gt;gatsby.js は React ベースの静的サイトジェネレータです、つい最近 v2.0.0 になったばかりで公式のドキュメントにかきかけのところがあったりもしますが英語圏に情報が落ちているので大概のことはググればすぐに解決します。ただ日本語の情報が他のジェネレータ系に比べて少ないのでとっつきにくいと言われればそうなのですが最適化とか考えなくてもとりあえず作れば Gatsby がよしなにしてくれて爆速ブログが構築できるのでチャレンジしました。&lt;/p&gt;
&lt;p&gt;React ベースということもあり、テーマをカスタマイズするには React のコンポーネント周りの知識があったほうがいいと思います、自分は今までなんとなくの知識しかなかったので、freeCodeCamp で一通り復習してから始めました。あとは gatsbyjs のチュートリアルや graphql のチュートリアル？なんかもやりました。&lt;/p&gt;
&lt;p&gt;自分はブログを構築している間はとても楽しいんですが、どうも文章を書くのが億劫で今まで作ったいくつかのブログも 4 つぐらい構築してますが記事を書いたのは合わせても 10 個ぐらいだと思います。プログラムと比べて日本語はエディターが入力ミスを補完とかしてくれないからだと言い訳をしておきます。日本語力が欠如しているともいいます。なので今回こそは日頃から文章を書くように心がけます。&lt;/p&gt;
&lt;p&gt;さて、自分で見直して見て読みずらくて自分の日本語力に自信をなくしたところで今回は終わり。今後しばらくは gatsby に関しての技術ネタを書く予定です、では。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ポリッドスクリーン系イベントのシステム周りの話]]></title><description><![CDATA[…]]></description><link>https://blog.magcho.com/ポリッドスクリーン系イベントのシステム周りの話/</link><guid isPermaLink="false">https://blog.magcho.com/ポリッドスクリーン系イベントのシステム周りの話/</guid><pubDate>Thu, 05 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;イベントレポ。自分は途中から企画に参加した、今回はプロマネ兼システム構築としての参加でした。&lt;/p&gt;
&lt;p&gt;ここでは照明・音響・映像周りのシステムについてのメモ&lt;/p&gt;
&lt;h1&gt;照明&lt;/h1&gt;
&lt;p&gt;今回の照明周りの機材&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/894ecd6fb131a81376ae007b4cc56b88/80d71/20180330011939.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 90.54054054054053%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC2UlEQVQ4y3VTy27TQBTNl/IDfAirIspDXbNARSzIAhAIkACxKKloKeo7zcNxnMROHMex4zge23M4M7HzUpnkasbzOPfec8+tSCmhRpZl8H0fZ6enqNVqsG0bYjQCxmNIGu4z113OfKsHsSolYJqmEEKga1m4qd8hns8hHAcYDiFpu7PkmXIkGw1IOlcoMs+XgNoUKgEtWisVkIsFCr/Ls3vWekyngHJcjFWEOeeUIC7NpqVxDMlUSofYnBnJPIoQMYsZo/VMEyG/Z7PZGlBzSG/TyQRTpuLQpox2Sc0arKRnQaf9Xg+/T//AGgyQpRkpdbcjTOjRoacBbUG7opN2QTYv6Dulg5gZ+EGAQauFiCkLRh3yu7KKoOCAdYW1QZHJs0vOyS6H3NccM6OcESZFBusI6SEKQ9TNDq7JyYQpp9xThbrt91HrdDAc2JgzC/VGURQxC5tnDm3GtaJiSzZzpnFyfIwvn7/C8yb6UUqzCPbx3Qc0KJEkSfR+RmeqCCPy5tJ5yGC2AFWEyUKgPzLRdZrUIWWTZ/pSQG6uetfwph5EIlZFUs4Ur1ohvCfLlBVYLnMN7MdDOIG5clI6rPt3iMR8VZT/jcrmhz3ycXHdxNWtgYZh671EZKi3LFzetXF+Y8D1gpUqYnXO6guuFyoo1SkDVqjZbMIm4f2RjbBNybQEbtoNGG0DA+73+ramI5onEOmyf8747m21in223V6rjefk8BNrUFG5dwwDP77/gBd6WjfSJCcQuDy/wNHRLy3irdZjJFU2wYOehb2hg0fdLp5x+5CKWKUs84KX4bYQ5YaYNd8Kkv/3YwsP/77CY9vBE8/DAe+8oQIq67aidNSvRTtR8bGambwHVIeIb90Ahy8J5nt4wQwU4GsVodzpz4nrwbVd3Vpio5fLOS+65GcUYz8UOBAJTeAp31cVh5s6VAXqsFOUUMc0JeJdmZTrBTXYI1g/WVqPFhD0H3jFZgUBztfZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180330011939&quot;
        title=&quot;20180330011939&quot;
        src=&quot;/static/894ecd6fb131a81376ae007b4cc56b88/fcda8/20180330011939.png&quot;
        srcset=&quot;/static/894ecd6fb131a81376ae007b4cc56b88/12f09/20180330011939.png 148w,
/static/894ecd6fb131a81376ae007b4cc56b88/e4a3f/20180330011939.png 295w,
/static/894ecd6fb131a81376ae007b4cc56b88/fcda8/20180330011939.png 590w,
/static/894ecd6fb131a81376ae007b4cc56b88/80d71/20180330011939.png 625w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;「前回よりも良いものを」ということで前回の反省を踏まえて今回挑戦したことです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;事前プログラミングによる照明の自動制御と照明と映像の同期&lt;/li&gt;
&lt;li&gt;電飾を用いた立体的な演出&lt;/li&gt;
&lt;li&gt;生バンド演奏によるライブ&lt;/li&gt;
&lt;li&gt;プロジェクター 2 台同時投影&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;事前プログラミングによる照明の自動制御と照明と映像の同期&lt;/h2&gt;
&lt;p&gt;第一回はパレータス SX で手動でオペして、ボーカロイド楽曲の速いテンポにオペレーターが付いて行けずいっぱいいっぱいだったので、2 回目は自動化を導入。2 回目では映像の再生ボタンと照明の再生ボタンをせーので押す方法で同期していた。今回 3 回目では 2 台のプロジェクターも含め 3 系統のタイミングを合わせる必要があったため手動の再生から Art-Net で再生を行うように変更。&lt;/p&gt;
&lt;p&gt;QLC+から Art-Net を通じて VDMX5 へ信号を流し、VDMX5 で指定の信号を受信したら再生するように設定をしておく。VDMX5 の詳細は別記事で書く予定。
企画段階ではプロジェクターが 3 台以上で、MMD のダンスの映像に加えホリゾントにも背景となる映像を投影し、照明に映像を加えた演出をしたいなど、色々な話が出ていたので。Midi・SMPT タイムコード・OSC などの方法も検討したが、フレキシブルなシステム構築を目指し Art-Net での同期を選んだ。
今回のイベントでは工数とスケジュールの関係やらなんやらで背景への映像投影のアイディアは次回以降のイベントに持ち越しにし、MMD の映像を舞台の上・下手から同時投影するのみとなった、今回はたまたま業務用のスイッチングハブを使うことができたのでパケットロス等のリスク対策は講じなかったが大事をとるなら Art-Net ではなく HDMI スプリッターなどで分岐した方がレイテンシ調整とかもしなくて良かったなーと終わってから思った。&lt;/p&gt;
&lt;p&gt;今回のイベントでは 14 の楽曲を使用するため、1 人で照明の打ち込みを行うのはスケジュール的にもキツキツだったし、これでは 1 人のスタッフしか経験や成長ができないということでどうにかして複数人で打ち込みができないかと模索。複数人のオペレータで分担して打ち込みの宿題を出した。QLC+には 2 つのプロジェクトデータを結合する機能は付いていないので他のソフトウェアを使用することも検討したが、スタッフ達の QLC ＋の導入期に他のソフトを覚えさせるのはラーニングコストが高いし、混乱を招くだろうと思い QLC+で行うことにした。プロジェクトデータ含め QLC+関連のデータは殆どが XML ファイルなのでマージ用のツールを作り、マージすることにした。この詳細も別記事で。
最終的には 4 人で 14 曲のデータを作成した。作成のフローはこんなかんじ。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;フィクスチャーリストファイルを作成&lt;/li&gt;
&lt;li&gt;1 で作成したフィクスチャーリストファイルを読み込み、プロジェクトデータを作成する&lt;/li&gt;
&lt;li&gt;QLC+の”タイムライン”を使用して照明を打ち込む&lt;/li&gt;
&lt;li&gt;14 曲分のデータを作成したら、回収し、自作したマージツールで 1 つにする&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;この期間が短い中でマージツールを作って、マージしてなので作業にかなりの工数を割いた、予想外の連続でうげーって言いながら作業してました。
この時に照明は QLC ＋の Universe 1 を使用し、OUTPUT は OPEN DMX USB 互換品から１本 DMX512-A を出力し照明の制御を、QLC+の Universe 2 の OUTPUT には Art-Net で映像の再生のタイミングで信号を送信するように設定した。Universe2 の 1ch にフィクスチャーの Generic Dimmer を指定しておけばファンクションを作成できるので、そのファンクションをタイムライン上に配置すれば OK&lt;/p&gt;
&lt;p&gt;再生は QLC+のタイムラインのスタートをクリックするだけ、最後までほっとけば OK。楽チン！！&lt;/p&gt;
&lt;h2&gt;電飾を用いた立体的な演出&lt;/h2&gt;
&lt;p&gt;スクリーンへプロジェクターで投影していることから、プロジェクターよりも強い光をスクリーンの後ろに出すことができなかったので、後ろがダメなら前に出そうということでほぼ全ての灯体を客席頭上にむけ、さらに電飾も加えて迫り出してくるような照明を目指したつもり。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/071cd86058c24803b1bea70840c558ec/2bef9/20180331004259.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz1WTyW4TQRCGZ3qZfbU98Xgcj+3YzkI2kpCAAjGxE2URm7iAEEJCQYILQkIir8ALcMur8HA/1T1OiA+lmurp/uqv6mrDNE0YZJU37n1X3mRMm2EYkF6MuLeN5dMrbL7+ibUX1/jw+y/WL67ov4SwXHVudlAbw1w8A5lcwM86iMt1lPuvsHr2FaPTL5h8u8Hl9Q2stADjFriw7gONOZgCKbPDFFFnGVF7GeWjlxhOPqHYu8Dm5S8C/sFg/Ib2cQjpEFTeAtlcacq4ZcNJGgjyLsLWAMXWFL3Dt6it7GH0/DM2zn5g99132ElGIEHqpPbGHWhmVhDDy3LYcQ1u2kS8uIJ8Y0yqThAvPcDiziX6j99j7eIjWtsHlJyBS5tgnFrDKValMspg+do7SV2DomKIMF9CNtpFsfMMYdFFvdxCa3WM9tZTUjuBcDwwBZMWAVkFZMKFG3VhuQ0KKItQG1xSmkK4ISXIIP0QthdpU6X59Qy2H5AAE9x274BKpWHS7TCCCNeHG9cR1JoI0gxRbQE+9dAhsBMmkI7zX4VRjZcCVArlfSDXzZS2gzBJ0WgVaJVdFN0+mu0Oas0ccaOBME3gBh7to/GQooJpoJwHMirBnDWUk3QvjFDPWyiHQ6w/3Mb+4RMcnRzj+HyKo+kYB4cHGK2OkNQS2j+DCVEBhQJqmKiAtgcryuDV24jzEo1OH0V/hHKwgt6Q5nBpgAWqIIgiehVS91BXqIBidstatpohUncLZjTxJsWGniuuB1c9LcOkNabWVVXqDPXV9sH9RItRM/0PHrIf/c4w84cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180331004259&quot;
        title=&quot;20180331004259&quot;
        src=&quot;/static/071cd86058c24803b1bea70840c558ec/fcda8/20180331004259.png&quot;
        srcset=&quot;/static/071cd86058c24803b1bea70840c558ec/12f09/20180331004259.png 148w,
/static/071cd86058c24803b1bea70840c558ec/e4a3f/20180331004259.png 295w,
/static/071cd86058c24803b1bea70840c558ec/fcda8/20180331004259.png 590w,
/static/071cd86058c24803b1bea70840c558ec/efc66/20180331004259.png 885w,
/static/071cd86058c24803b1bea70840c558ec/2bef9/20180331004259.png 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;使ったのは Amazon で購入した 5m の LED ストリップライトを 5M x 10 本、メータ単価 100 円ぐらいなので 5000 円ぐらいです、でもこれだけじゃ光らないので別途 Dimmer を用意する必要があります。今回使ったのは RGB と共通の＋の 4 極をもつ 12V タイプで１本で RGB の 3ch を DMX で制御できれば良いです。秋月電子とか Amazon とかでも既製品のディマーが購入可能ですが、この Dimmer が LED よりも高い。今回は他のところにお金を回したかったので、自作して節約しました。30 系統 12V で 10000 円ぐらいで作成できました。Arduino 使えば DMX は簡単に扱えるので適当にプログラムを書き、ハードを適当に作ればいいです。４轍ぐらいかかった。&lt;/p&gt;
&lt;p&gt;今回この Dimmer は 1 本あたり DMX を Red,Greed,Blue,Dim,Strobo の 5ch 消費するので、電飾だけで 50ch も食う大食らいです。作成レポは別記事&lt;/p&gt;
&lt;p&gt;やってみてわかったのが、以外と光量が強いこと。単体でピカピカしている分にはいいんですけど、10 本もまとめて光ってるとかなりやかましい感じに。体感クリスマスのイルミネーションの 1.5 倍くらい眩しいです。さらに、LED とはいえ１本で 12V 3A 消費するので 1 分程光らせるとテープが熱を持ち、12V の変圧器のファンが勢い良く回り出します。LED を伸ばさずに巻いたまま使うのはちょっと怖い。&lt;/p&gt;
&lt;h2&gt;生バンド演奏によるライブ&lt;/h2&gt;
&lt;p&gt;今回のライブは 2 部構成になってて、１部は MMD のみのライブ、2 部からは Vo 初音ミク・Gt1,2・Dr・Ba の生演奏・SE 制作をお願いしました。
システムは単純で、MMD の動画のスレテオの音声の L を初音ミクで作成した音声のみにし MainSP へ、R にはテンポを合わせるためのクリック音を入れ演者のイヤモニへ送ります。単純なシステムですが本番では MMD の動画データに埋め込む必要があり、作業が並行して進められないことなどにより工数が予測しづらい作業です。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;VOCALOID・初音ミクを使用し、Vo 音声データを作成&lt;/li&gt;
&lt;li&gt;Vo 音声データを元に DAW などでクリック音や SE を作成し、LR に割り振った音声を作成&lt;/li&gt;
&lt;li&gt;2 の音声データをもとに調整をし MMD の動画を作成し、作成&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;プロジェクター 2 台同時投影&lt;/h2&gt;
&lt;p&gt;前回までのライブで映像が薄く見辛いことが課題でした。そこで今回はスクリーンを農ポリからシワができず波打ちにくい素材のペット板へ変更し、プロジェクターを上下手の 2 台同時投影に変更しました。写真は投影テスト時のもの&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/996b5672210fdaf50c4b56fa791007f4/72e01/20180331011739.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeG9kxnGD//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhIR/9oACAEBAAEFAkjJwVSrbrJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQQDAAAAAAAAAAAAAAAAAgABEBExQWH/2gAIAQEABj8CWWgXEb4S1H//xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhMUFRYf/aAAgBAQABPyFr4N0ls9HBkQAlexieEJzF4K4f/9oADAMBAAIAAwAAABA8/wD/xAAWEQEBAQAAAAAAAAAAAAAAAAAAIUH/2gAIAQMBAT8QxH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFBcf/aAAgBAQABPxADY+oRw0rwcS0LGuaidc5BKHnkMlItj4V8qCQFX7mf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180331011739&quot;
        title=&quot;20180331011739&quot;
        src=&quot;/static/996b5672210fdaf50c4b56fa791007f4/1c72d/20180331011739.jpg&quot;
        srcset=&quot;/static/996b5672210fdaf50c4b56fa791007f4/a80bd/20180331011739.jpg 148w,
/static/996b5672210fdaf50c4b56fa791007f4/1c91a/20180331011739.jpg 295w,
/static/996b5672210fdaf50c4b56fa791007f4/1c72d/20180331011739.jpg 590w,
/static/996b5672210fdaf50c4b56fa791007f4/a8a14/20180331011739.jpg 885w,
/static/996b5672210fdaf50c4b56fa791007f4/72e01/20180331011739.jpg 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;[x] 2 台で同じ映像を投影しているため、数センチのズレや十数 ms のズレも気になってしまい、かなりデリケートに。調整に 10 分ぐらいかかり時間のない本番時にはかなりの痛手です。不運なことに本番前にブレーカーが落ちたり、変電所トラブルで停電したりと調整が何度もやり直しになり焦りました。VDMX5 の調整は細かく動かすのが難しく手こずります、練習必須。調整は後輩スタッフがプロだった。さらに今回使用したプロジェクターが映像のポジションを記憶できない仕様で、起動すると毎回違うポジションへ写すという謎仕様でなんだかなーってかんじです。&lt;/p&gt;
&lt;p&gt;停電前に 2 回もブレーカーを落としてしまってそのときは許容オーバーだと思って別系統から電源を引き回してたんですがいま計算してみても、許容範囲で余裕があったはずなので停電の予兆だったのかもといまになって思ってます。ブレーカーを落とし慣れてしまったスタッフたちは対応が早くインシデントは発生せずよかったです。停電時にライブとは関係のない校内のエレベーターを確認しに行ってたのは流石と思いました。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[macのターミナル起動時に怒られるようになった話]]></title><description><![CDATA[今日ターミナルを起動すると と表示されるようになった。とりあえず perl を最新にしてみようと plenv をインストール
https://github.com/tokuhirom/plenv#homebrew-on-mac-os-x
公式の説明どうりに .bachrc…]]></description><link>https://blog.magcho.com/macのターミナル起動時に怒られるようになった話/</link><guid isPermaLink="false">https://blog.magcho.com/macのターミナル起動時に怒られるようになった話/</guid><pubDate>Tue, 05 Jun 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;今日ターミナルを起動すると&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Can&apos;t &lt;span class=&quot;token function&quot;&gt;locate&lt;/span&gt; local/lib.pm &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; @INC &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;you may need to &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; the local::lib module&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;と表示されるようになった。とりあえず perl を最新にしてみようと plenv をインストール
&lt;a href=&quot;https://github.com/tokuhirom/plenv#homebrew-on-mac-os-x&quot;&gt;https://github.com/tokuhirom/plenv#homebrew-on-mac-os-x&lt;/a&gt;
公式の説明どうりに&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; plenv
$ brew &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; perl-build&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;.bachrc に追記&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;which&lt;/span&gt; plenv &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/null&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;plenv init -&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最新版をダウンロード、インストール&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ plenv &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5.26&lt;/span&gt;.2
$ plenv global &lt;span class=&quot;token number&quot;&gt;5.26&lt;/span&gt;.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;パッケージマネージャーもインストール(pip 的なやつ)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ plenv install-cpanm
$ &lt;span class=&quot;token assign-left variable&quot;&gt;PLENV_INSTALL_CPANM&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;-v&quot;&lt;/span&gt; plenv install-cpanm&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;そして local/lib.pm をインストール&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ cpan
$ &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; local/lib.pm&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[ArduinoでDMXを受ける]]></title><description><![CDATA[DMXSerial 使っただけ。この方法だと HardwareSerial を使うので、スケッチ書き込み時に TX,RX からピンを抜いておかないと書き込みエラーが出たりするので、組み込みで半田付けしてからスケッチ修正できない。ムムム  https://qiita.com…]]></description><link>https://blog.magcho.com/arduinoでdmxを受ける/</link><guid isPermaLink="false">https://blog.magcho.com/arduinoでdmxを受ける/</guid><pubDate>Fri, 05 Jan 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;DMXSerial 使っただけ。この方法だと HardwareSerial を使うので、スケッチ書き込み時に TX,RX からピンを抜いておかないと書き込みエラーが出たりするので、組み込みで半田付けしてからスケッチ修正できない。ムムム&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4c5ea7990037606e8a246a4c4b7f4564/2bef9/20180105190616.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.1891891891892%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAACmFAAAphQGPVf7hAAADJElEQVQ4y42Tb0xbZRSH+00T1CUz6pKNTd1M1C+aGL+5mJgsZpkh8kG+aWZTQcQMajOaLSzL3DIWZSCRMavg3AQyopU5trCFKAQrbaGFdr2lg0sLt+24UOhKx1a43PY+3pbMv1niSZ68b/Lm/N7fOTnHoGkauTw5jWwu9x/yb6qqIggBPB4PY2NjBfJ3QRD0vBx6aGyEYuB/RC6Xxef34XK6cLvdBZxOJ36/vyCo/V1wVc0yJ88TkpfwTEuMhkVGIzrhKTxTk3hC06RXMohTIiPeEXxj44znXXq9hEKhwmf3HerFKIZgTMbacp49Rxp59b0Knq6tY/tBK8VmCztrqtn6UQUd17u4FuyjadiG63cXw85hHA4HXl1U1Q3dXVW1NTVfuqYYfui+SNelXrZbGthW9Skvn7yAsaOfElsvr33RTfHxNk5f/YWJ4DWahHPEo3Gi0SiSJJFcTLCcyTIRz2iinNF7rgsOuUYoP9vFk5YmthmtPFvXys6jNrYePsMT1jNsqfmM451XWE6FuSJe/EdvWwbbMZ21YGq3aH2B8Y0e+uQkDx9o4DFzE0WWLymqaeSR6tM8qp+bLM0UVRzD3Pwt8noSa281MyEHiWmXnjpHTethSstK2ft+ifZNfw9K/IZiGI0leKm8lmcOnGDLkTZ27f+E5998m+f2lfHiW2U89UYJJpsdcSnCDusrXB/4mumhTjKyl5PtDVQZKzFWmrTzecHIr4qh+6ceHirexQv7zVQ1t/F6bT2bKk+ww/w5j+vnZt1hnX2Q+XtLGM8dI+zuYmXSjrbo4eP2Q+ypKmF39T7tu4EeWBrRSw5N8k7dKQ5+/zOmC1cpb+ngw/p6Sm2n+MDWybuNrfQFbpJijR9dfojP/9lDKTlLm8/OpYBDC95KPHiwk6KAXejkt9gAg1I/Qzq9Yh9fXb6ML+hm4l4c4XYEKSPjnBfJrKEl0lkUNasYCqunD+f9FcxP6PrKXVZmZ0nPzhS4I82QDEcYdgj4IwmEW8sEYiluxJL4pRRyalWbWVzbcJgX+jcPimUFEmmVxfT6X9xZZ+72qhaOLrCwsKD8AWwZUEzW2PicAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;null&quot;
        title=&quot;null&quot;
        src=&quot;/static/4c5ea7990037606e8a246a4c4b7f4564/fcda8/20180105190616.png&quot;
        srcset=&quot;/static/4c5ea7990037606e8a246a4c4b7f4564/12f09/20180105190616.png 148w,
/static/4c5ea7990037606e8a246a4c4b7f4564/e4a3f/20180105190616.png 295w,
/static/4c5ea7990037606e8a246a4c4b7f4564/fcda8/20180105190616.png 590w,
/static/4c5ea7990037606e8a246a4c4b7f4564/efc66/20180105190616.png 885w,
/static/4c5ea7990037606e8a246a4c4b7f4564/2bef9/20180105190616.png 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://qiita.com/loveandsheep/items/e1295ec9ce589&quot;&gt;https://qiita.com/loveandsheep/items/e1295ec9ce589&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[格安ArduinoでDMXを送信する]]></title><description><![CDATA[部品 Arduino UNO 互換品 RS485 モジュール XLR コネクター 配線  スケッチ DmxSimpleをとりあえず書き込んでサンプルを動かしてみた。
このライブラリデフォルトの Pin…]]></description><link>https://blog.magcho.com/格安arduinoでdmxを送信する/</link><guid isPermaLink="false">https://blog.magcho.com/格安arduinoでdmxを送信する/</guid><pubDate>Mon, 01 Jan 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;部品&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Arduino UNO 互換品&lt;/li&gt;
&lt;li&gt;RS485 モジュール&lt;/li&gt;
&lt;li&gt;XLR コネクター&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;配線&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5dbc7151c9643ce2c3985903806650c2/2bef9/20180101214426.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.05405405405405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAACmFAAAphQGPVf7hAAACvklEQVQoz32SW0iTYRjHd1dghws7gZWURYeb6ia6iSKooBMVZRdRtDJTBPOQTfGYJVaoJamVRdTM0aw0KYvK1JlpmmR4wOlMv/l5mLbpzK2tuW+/PmcUUfTAn4f34eX//l+en4L/lNsDBToTat0AeS97Kak3eecej0fWVJc80s/zlBSOCTcDg0O0D5pp7DLSqDfI6uKjoZuaFgPniz5Sqx9G328nu0xgyOr0mkqTjv8oRZs4iCrnLlsTs1h/NIRloQkEnIrHPzSZFWEpzA1J4UVzu/fynUojplHHZEZvwq/OMTrMfegMAnrxCy6riOKh9gGaJ09ZHJ2BX1gqay+pUWpeszu/lI1XtSxMzCf3XTOSGzTVFkZsv5OF349nc/hONpzdwa3yYmydlSiq3zdw8noh86KvsPC4iqUJeQQk5eMXl8ccVS7zIy5zTv0Is93O6QdFNDW/Y1RoBHsPCblxKA8rCQw6jFo2pO8Vik+DFqaHZzAr8go+Z67hE5HFjNOZzIzIZHZ0Nj7B54jKucdni4C/ah2vq/IR6h4y3v2G+JxoTp44xf7jB7lX9VLO7EDxQRxmTfBZloSnsSDxNsuORbFy+16W7wxk9a5AFmzZgzJPi8k5wpFbSXTWabB2lEB/BbEFMWxJPsS21ANoG2qmlqItLmHaogBWKSMJy77NJlU6s0Mv4B+ZgW9oGr4hqcQWVfAdF49rW6ir6aGxZ4x6vZn6TiuFLU00iSN0DtgmOZK/3N7Bwfh0YgpKCVI/I/haASHp6ey7eZGgG4UcycqlTN6yDSfNA02YhR7GJBdWp41xl4MWaweuCQm3+yeH/2JpxNBKcauGt2IlOmM5OqGc593PqW17Rbfwib6JIcRvffTKEuzinxx6aZeZkLxdfkUeusZt2AQjY0bhl8aNRhxiP3yf+CuAJElYLBZMJhM/AG4SvqgKV8ybAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180101214426&quot;
        title=&quot;20180101214426&quot;
        src=&quot;/static/5dbc7151c9643ce2c3985903806650c2/fcda8/20180101214426.png&quot;
        srcset=&quot;/static/5dbc7151c9643ce2c3985903806650c2/12f09/20180101214426.png 148w,
/static/5dbc7151c9643ce2c3985903806650c2/e4a3f/20180101214426.png 295w,
/static/5dbc7151c9643ce2c3985903806650c2/fcda8/20180101214426.png 590w,
/static/5dbc7151c9643ce2c3985903806650c2/efc66/20180101214426.png 885w,
/static/5dbc7151c9643ce2c3985903806650c2/2bef9/20180101214426.png 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;スケッチ&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/PaulStoffregen/DmxSimple&quot;&gt;DmxSimple&lt;/a&gt;をとりあえず書き込んでサンプルを動かしてみた。
このライブラリデフォルトの Pin アサインは上の図の通りだが、コード内で別途指定すれば変更できるっぽい。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SerialToDmx&lt;/strong&gt;は PC からのシリアル画面から&lt;code class=&quot;language-text&quot;&gt;{ch番号}c{ゲージ}w&lt;/code&gt;って感じで送ってやれば送信できる、5ch に 255 を出力すると&lt;code class=&quot;language-text&quot;&gt;5c255w&lt;/code&gt;と送信すればいいらしい。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;FadeUp&lt;/strong&gt;は Pin アサインがデフォルトから変更されているので、&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// DmxSimple.usePin(3);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;しとけばとりあえず動いた。&lt;/p&gt;
&lt;p&gt;LTC485 の仕様としてこの図では DE を Arduino のデジタル GPIO のアウトを使って 5V を印加している。この DE を HIGH にすると送信 LOW にすると受信モードになる&lt;/p&gt;</content:encoded></item><item><title><![CDATA[NetlifyとGithubで独自ドメインのサイトをHTTPS化したメモ]]></title><description><![CDATA[情報が古く、執筆時の Netlifty の UI 等が変わっています。ご注意を 事の発端 IOS 11 ｷﾀ ━(ﾟ ∀ ﾟ)━! 　 Safari からカメラの映像が取得できる！　これでアプリではなくブラウザから AR できるようになった！と喜んでいたら、このカメラの api…]]></description><link>https://blog.magcho.com/netlifyとgithubで独自ドメインのサイトをhttps化したメモ/</link><guid isPermaLink="false">https://blog.magcho.com/netlifyとgithubで独自ドメインのサイトをhttps化したメモ/</guid><pubDate>Sun, 15 Oct 2017 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;情報が古く、執筆時の Netlifty の UI 等が変わっています。ご注意を&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;事の発端&lt;/h2&gt;
&lt;p&gt;IOS 11 ｷﾀ ━(ﾟ ∀ ﾟ)━! 　 Safari からカメラの映像が取得できる！　これでアプリではなくブラウザから AR できるようになった！と喜んでいたら、このカメラの api は https じゃないとセキュリティ的な問題で動かないのである。&lt;/p&gt;
&lt;p&gt;Github pages で独自ドメインでホスティングしているサイトを HTTPS にしたいけどお金はない。&lt;/p&gt;
&lt;p&gt;すでに導入レポは検索すればいくつも見つかるものの、どうも日本語の情報が少ないのでメモすることにした。&lt;/p&gt;
&lt;h2&gt;使ったもの&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Github&lt;/li&gt;
&lt;li&gt;Netlify&lt;/li&gt;
&lt;li&gt;お名前.com&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;手順&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;お名前.com でドメインを取得します。&lt;/li&gt;
&lt;li&gt;Github に公開するサイトのファイル一式を push しておきます。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;一度 Github pages で公開してみて問題がないことを確認しておきましょう。設定で有効化して、HTTPS にチェックを入れれば&lt;code class=&quot;language-text&quot;&gt;https://&amp;lt;username&amp;gt;.github.io/&amp;lt;repository name&amp;gt;&lt;/code&gt;でアクセスできます。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;Netlify に登録します。
&lt;a href=&quot;https://www.netlify.com/&quot;&gt;https://www.netlify.com/&lt;/a&gt;
Github アカウントでログインし、先ほど push したリポジトリを選択し、デプロイしましょう。&lt;/li&gt;
&lt;li&gt;Netlify の site name を変更しましょう&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;デプロイをするとデフォルトでランダムな英単語が割り当てられるので、変更しなくても問題はないが変更しておきましょう。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;General -&amp;gt; Setting -&amp;gt; Site details -&amp;gt; Change site name&lt;/code&gt;から設定します。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3ec0a8f3600d7654c9c206ef08911ec4/ebf47/20171015014625.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAARlAAAEZQAGA43XUAAACC0lEQVQ4y5VTS28SURSeX2ixiSzKI+GpAmq6ZOUOdyx4/gM2YHk0wcTELmxiXLgymooxBLCWFsTO494Z6DB8nnuZTqZq0nqTL+fcc8797nnkKIlkCg+CQewEAri/u4t7OwF5j0ajd0aEEI/HkU6noSRTaRSLRVSrVVQqFZTLZanX63Wp34ZSqYRarYZ8Po9EIgElm8vhUlVxejaVODu/8PA/5+DgJSKRCJTHmSw0TYOq6ZgvFtB03YVxJ6L12pGy2WwiFAptCQ3DADdNMM5hMCYJdbKp8qMt/HcRcx0r7OK0Wi2Ew2E3Q8pGZyKAw7SWFEzkpiV1TtJwfbrByWfB2QAbgpDXGfoIc2D6AoZ2AW78xMq8/AvA0geLmEwCJzYO50oXhftKzj4B06Y4//EVk/EXTEYn+D7ZytHwM+ETlmzm4cqcw7YWcFa/AFvFekkSTGYoh/Iok4FFJbod3tbi6pwzCcYMaovonyrvpslh2ysK2sBZ217JkjCXzWE8n+Fo/A3HkyHenY7wejjAYDGTgTYRW9RLx3FuTHdDHzvURNu2vSlLwv2nz/BxPsX+8Ss8f/8GLz68Reaoi95o4D0WA7ntdDpd7O1RD1Pph2g0Gui02+h2u+To4JBkz9WF7bDX83xC+tGmd/1+H4VCAbFYDEoimUSQdlfuL6UcodGH/0DoH7YbfpquIBO7/Btax1H7Lru47wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;null&quot;
        title=&quot;null&quot;
        src=&quot;/static/3ec0a8f3600d7654c9c206ef08911ec4/fcda8/20171015014625.png&quot;
        srcset=&quot;/static/3ec0a8f3600d7654c9c206ef08911ec4/12f09/20171015014625.png 148w,
/static/3ec0a8f3600d7654c9c206ef08911ec4/e4a3f/20171015014625.png 295w,
/static/3ec0a8f3600d7654c9c206ef08911ec4/fcda8/20171015014625.png 590w,
/static/3ec0a8f3600d7654c9c206ef08911ec4/ebf47/20171015014625.png 688w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;カスタムドメインを設定しましょう&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Domain management -&amp;gt; Domains -&amp;gt; Custom domain\&lt;/code&gt; に取得しておいたドメインを設定します。
ここで、Netlify は www 付きのドメインにすることを勧めてきます。DoS 攻撃から守りやすいとか、ロードが早いとか色々恩恵があるらしいのですが、それよりも URL が短くなる方がいいなって思ったので、自分は www なしにしました。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/46e2599a9da03a145bcf95a20b3387d7/d67fd/20171015015607.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAARlAAAEZQAGA43XUAAABd0lEQVQoz6WTS07DMBCGc1EkFhyAJSdCsGNBxYoFZyiCVi2qEH0mdpI2ftvpz9gBhESoKoj0acbW+PeMZ5JZHzCbL/E8nWH0MkPVSGgXII2Dsv4Labt13Bfa/koW2j2mr28YjicYjiZYbAoU1TaRl5E6EdcbXqULD4lmjjKMjg1tQlEm8UCjNGohUe0EahLZCpXE4v5nTB9J0DiPsqrAy46Cc1hr8Zcv03RbFGVUzorKXecMi9UGSv9T0BkBo7Ywegsta+yDBloDJHs8SdB7g6ZegPM1GFsiz+dQsgL25jB9gvH9vHeAqeBlCSc4gup8Izk0raO1qoRqWPKVYGkfQfwgc6FrypjlGK4XGBVrPG5WeMpX1DVDlwVossbQJLj4PB6O4qPtfcNAo7KjA+f3Nzi5vcTFwwCngyuc3V0jl00KYmWJgvHjmhIbEueKS4m8aYhdskxQkygjm7IJiehbysxTVbEy30OWhpqC+76W/qKQaD/47vfzDusooevZevQHAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;null&quot;
        title=&quot;null&quot;
        src=&quot;/static/46e2599a9da03a145bcf95a20b3387d7/fcda8/20171015015607.png&quot;
        srcset=&quot;/static/46e2599a9da03a145bcf95a20b3387d7/12f09/20171015015607.png 148w,
/static/46e2599a9da03a145bcf95a20b3387d7/e4a3f/20171015015607.png 295w,
/static/46e2599a9da03a145bcf95a20b3387d7/fcda8/20171015015607.png 590w,
/static/46e2599a9da03a145bcf95a20b3387d7/d67fd/20171015015607.png 670w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;設定後、Netlify の DNS を利用するので &lt;code class=&quot;language-text&quot;&gt;Use Netlify DNS&lt;/code&gt; を押します。４つ URL が表示されると思います。これは次の作業で使うので覚えときましょう。&lt;/p&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;ドメインの設定をしましょう&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;今度はお名前.com でドメインの設定をしていきます。&lt;/p&gt;
&lt;p&gt;ログイン後、&lt;code class=&quot;language-text&quot;&gt;ネームサーバーの設定 -&amp;gt; DNS 関連機能の設定&lt;/code&gt; に A レコードと CNAME を追加します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A レコードで 104.198.14.52 を追加します。&lt;/li&gt;
&lt;li&gt;CNAME に www をつけて Netlify で設定した URL を追加します。&lt;code class=&quot;language-text&quot;&gt;&amp;lt;site name&amp;gt;.netlify.com&lt;/code&gt;です&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f4fc4d77d4544eb9f26887fd2c831177/2bef9/20171015021014.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAARlAAAEZQAGA43XUAAABQElEQVQoz6VRyW7CMBDN/38MV44gLhyjJiUEEgzZF5KSzbGd7dVxRc+VOtJo/MZPbzbN8XLkWYbV5nnGf01LkhjujeBsX5Tr+geujgtKKZZlwTRNGMdR+Z8EvSCSAgR+KIXJA+bJhn114QcxgihBGKc4Xxz196ob9EyA9hwt7VFJXNUt2q5H3XQyUmiPIIFzD5A8XwjTEnH+pTDxf/JelOHTvv2+70Gq4s2LYFhX+efC9WKcLgQO8aHpuo7NZoPj8Sh3uGCWY77HK4oCnAuJJxWbtpWrWLtpVG413lM4KUPLF7miCVpRltjtdthutzAMQxHrukbXdaiqGkEYYr/f43A44OF5WPliGNQB1+K0a0FyhoZNmMYBmhBCES3LAiEEgySvXfQ9A+NcCZimqfz5LFShdYK3IJMdRiUDFRLLA34D9fAQ9D5cKUEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20171015021014&quot;
        title=&quot;20171015021014&quot;
        src=&quot;/static/f4fc4d77d4544eb9f26887fd2c831177/fcda8/20171015021014.png&quot;
        srcset=&quot;/static/f4fc4d77d4544eb9f26887fd2c831177/12f09/20171015021014.png 148w,
/static/f4fc4d77d4544eb9f26887fd2c831177/e4a3f/20171015021014.png 295w,
/static/f4fc4d77d4544eb9f26887fd2c831177/fcda8/20171015021014.png 590w,
/static/f4fc4d77d4544eb9f26887fd2c831177/efc66/20171015021014.png 885w,
/static/f4fc4d77d4544eb9f26887fd2c831177/2bef9/20171015021014.png 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;次に、DNS を変更します。&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;ネームサーバーの設定 -&amp;gt; ネームサーバーの変更 -&amp;gt; 他社のネームサーバーを利用&lt;/code&gt; に 4 で Netlify にドメインを設定した時に出てきた４つの DNS の URL を設定します。人によってこの URL は異なるみたいです。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c9fc668f2ec7952ad1ad7c0513afc169/d125e/20171015021555.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 87.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAARlAAAEZQAGA43XUAAACdklEQVQ4y5WUa2/aMBiF8/9/RzVt2qpV+7pPW/upW6e0BXJzSIhzc26QAgGSwNlrQ+lFrFotHWyS+PHJ8eto80WDCU/gTSLwSMCncRil+Pb9EmefL/Dx/AJnn87x4ctX/PqjQ7ZN26LtupdqO+x2O2h932Gz2aiL+77FW01Oeqtp88UCHnPhWRZcw1TybBueG2NwO4Kh60iCANV0hv9pmvyZ+R7GVz9hXf6AQ+J3t3hIIlRhgJIHWOQZtuS8W69Ia9Vj2/8bWKcJhGMjsi34wwECYwROLhPXRcQcJXZ/D26ZCEwDwmWoswzNaoXlssGaFtlut0/AMRtjaFiIkpQ2KIRh2RgMR7j+fQPDtOFPAtqoGFFMm+dPkKRCjZk7Pv5PSS1tlgLmIgMnUJ7nmM5mCGjsup7SsmnwnqaAzXIJHkbIshwNAYqihDv2kAqB+uEBMTnPiwLz+Vw5EWRAPpOkKRK6t6D5R+Bi1SuILJnpdKoe7qiE3iqbx9J5Pj4C06IG8yijWMD1ORwmneW06gqrQ+gy/L7vKfidCv+U+n67L2xOoJt7C/rQxp3lwTYYTNNFKAqUZUmOBWVbEHx9OBHtCe0PhYRq8qhd60PoAxv6iMEgsEXAOK9QVZXKTvZqgnLSn5SMSTrVAnJosACOH8H2IjheCGvMEWclZrTjZVlRtrODg/3Erutfiq5Ll3JBLUxyAoRwJjFBY9VbBI5Fibqu6chNCVwTsN0DT0hebx8d8jiD6fInh9TLBaK0oNIoVOmoDOWRO0zsTkhmqTLkB4fslcOUMpQrPr5S9/pz9UzynvykqVeWTiRAAUnsABTF/uuye8cpkWXzF7AhDbVnvx6XAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20171015021555&quot;
        title=&quot;20171015021555&quot;
        src=&quot;/static/c9fc668f2ec7952ad1ad7c0513afc169/fcda8/20171015021555.png&quot;
        srcset=&quot;/static/c9fc668f2ec7952ad1ad7c0513afc169/12f09/20171015021555.png 148w,
/static/c9fc668f2ec7952ad1ad7c0513afc169/e4a3f/20171015021555.png 295w,
/static/c9fc668f2ec7952ad1ad7c0513afc169/fcda8/20171015021555.png 590w,
/static/c9fc668f2ec7952ad1ad7c0513afc169/d125e/20171015021555.png 737w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;設定が反映されると、独自ドメインにアクセスすると HP が表示されると思います。このままではまだ HTTP です。いよいよ次で HTTPS になります。&lt;/p&gt;
&lt;ol start=&quot;6&quot;&gt;
&lt;li&gt;Netlify で SSL を有効化しましょう&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Netlify で &lt;code class=&quot;language-text&quot;&gt;Domain management -&amp;gt; Domains -&amp;gt; HTTPS -&amp;gt; SSL/TLS certificate&lt;/code&gt;で &lt;code class=&quot;language-text&quot;&gt;Verify DNS configration&lt;/code&gt;をクリックし&lt;code class=&quot;language-text&quot;&gt;Let&amp;#39;s Encypt certificate&lt;/code&gt;をクリックです。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fc942cf6932ac803c266863c01f719ba/a1dd2/20171015022037.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAARlAAAEZQAGA43XUAAABSklEQVQoz52R646bMBSEef8X3P7oql0lSsAY8B2MnczOMdpLKlWpivQxx9iMz6ULa8a5VzhdFVIuiNuOmHfGh36sm37j46z8H7YvusTXj9ffePn5C2o2GBeLYTItVrOFNu5TBdkXHaYFswvN0H+jy6ViI6IrM9n2Qi2Qiw4ko/ywlnMSy7ltrw90pd5gncf5coUaNd5OZ+hpxv8+nWS05UxT14wFYy1iTAjEB5YVI5z3TfO+PzeM64peKSityYRLP3A9YhhHXAfV4kvfo2e8GIvE83KhqFxSb7c/MmQ/rHXwPhAP7w4sfw7yjbEjMdEoJWYbPjMPIaKU8mW4cxiRJesYMJEx+oasdTh08I6DK//WQzHcaoFdEwxvNOkg7LkhsexlGkr/nvZwZcm1VpZssSymodnHleVVmkycuGHpMig9z5iWBff7/a+G73qCCJfAtvHoAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20171015022037&quot;
        title=&quot;20171015022037&quot;
        src=&quot;/static/fc942cf6932ac803c266863c01f719ba/fcda8/20171015022037.png&quot;
        srcset=&quot;/static/fc942cf6932ac803c266863c01f719ba/12f09/20171015022037.png 148w,
/static/fc942cf6932ac803c266863c01f719ba/e4a3f/20171015022037.png 295w,
/static/fc942cf6932ac803c266863c01f719ba/fcda8/20171015022037.png 590w,
/static/fc942cf6932ac803c266863c01f719ba/a1dd2/20171015022037.png 838w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;お疲れ様でした、試しにhttpsでアクセスしてみましょう、表示されれば成功です。セキュリティーがどーたらと表示されてしまう場合はしばらく待ってれば反映されるっぽいです。&lt;/p&gt;
&lt;p&gt;最後の仕上げとして、http でアクセスがあった時に https にリダイレクトさせたいので&lt;code class=&quot;language-text&quot;&gt;Force TLS connections&lt;/code&gt;を有効化して完了です。そんなの表示されてないよって時はリロードするとたぶん出てきます。&lt;/p&gt;
&lt;h2&gt;コメント&lt;/h2&gt;
&lt;p&gt;ドメイン周りの設定は順番が大切なので、3 回ぐらい失敗してサイトを消してやり直してを繰り返してしまった。勉強不足だ。
そんなこんなで、準備は整ったので、AR.js とやらに挑戦します。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Arduino互換品のドライバーメモ]]></title><description><![CDATA[買ったやつ http://amzn.asia/b5Kk31r インストールしたドライバー http://www.wch.cn/download/CH341SER_MAC_ZIP.html]]></description><link>https://blog.magcho.com/arduino互換品のドライバーメモ/</link><guid isPermaLink="false">https://blog.magcho.com/arduino互換品のドライバーメモ/</guid><pubDate>Wed, 16 Aug 2017 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;買ったやつ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://amzn.asia/b5Kk31r&quot;&gt;http://amzn.asia/b5Kk31r&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;インストールしたドライバー&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.wch.cn/download/CH341SER_MAC_ZIP.html&quot;&gt;http://www.wch.cn/download/CH341SER_MAC_ZIP.html&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dockerで立ち上げたwebサーバでmod_rewriteしたかった話]]></title><description><![CDATA[内容 DockerHub の公式の PHP イメージを使っていて、mod_rewite したい人向けのお話です。結論だけ知りたい人は読み飛ばしてね。 事の発端 僕自身が立ち上げた web サービスではもともと URL…]]></description><link>https://blog.magcho.com/dockerで立ち上げたwebサーバでmod_rewriteしたかった話/</link><guid isPermaLink="false">https://blog.magcho.com/dockerで立ち上げたwebサーバでmod_rewriteしたかった話/</guid><pubDate>Fri, 11 Aug 2017 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;内容&lt;/h2&gt;
&lt;p&gt;DockerHub の公式の PHP イメージを使っていて、mod_rewite したい人向けのお話です。結論だけ知りたい人は読み飛ばしてね。&lt;/p&gt;
&lt;h2&gt;事の発端&lt;/h2&gt;
&lt;p&gt;僕自身が立ち上げた web サービスではもともと URL が&lt;code class=&quot;language-text&quot;&gt;http://example.com/index.php?cmd=view&amp;amp;page=123&lt;/code&gt;という感じでとてもダサかったので、かっこよくしたかった。WordPress などではパーマリンクと呼ばれ URL がイカした感じになっているので、僕も方法をパクった。
調べると apache 側の設定で mod_rewrite を使うとアクセス時に URL を記述したルールに基づいて置換してくれるらしい。&lt;/p&gt;
&lt;p&gt;僕の web サービスではアクセスを全て index.php で受け、get パラメータで動作を変化させている、pukiwiki とか？の設計をパクったはず。動作ルールは以下&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;example.com/index.php?cmd=[動作モード]&amp;amp;page=[記事のNo.]&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;cmd&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;view 記事の表示、page で記事を指定&lt;/li&gt;
&lt;li&gt;edit 記事の編集、page で記事を指定&lt;/li&gt;
&lt;li&gt;category カテゴリーごとに記事一覧を表示する　　などなど&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;これを&lt;code class=&quot;language-text&quot;&gt;example.com/[動作モード]/[記事のNo.]&lt;/code&gt;にしたかった。
さらに view の時には&lt;code class=&quot;language-text&quot;&gt;example.com/[記事のNo.]&lt;/code&gt;にしたい。&lt;/p&gt;
&lt;p&gt;このルールで URL を置換させるには.htaccess に&lt;/p&gt;

        &lt;div class=&quot;gatsby-code-title code-title&quot;&gt;
          &lt;span&gt;.htaccess&lt;/span&gt;
        &lt;/div&gt;
       
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;RewriteEngine On
RewriteBase /
RewriteRule ^([0-9]+) index.php?cmd=view&amp;amp;page=$1 [L]
RewriteRule ^edit/([0-9]+) index.php?cmd=edit&amp;amp;page=$1 [L]
RewriteRule ^edit index.php?cmd=edit [L]
RewriteRule ^category index.php?cmd=category [L]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;のように記述する、よくある正規表現と似ているので特に迷うことはないだろう。&lt;/p&gt;
&lt;p&gt;いざ、Docker で立てた開発環境に置いてみると、500 エラー。なんで！！
しばらく悩むも解決せず、諦めて本番環境に置いてみると動いた！なんで！！&lt;/p&gt;
&lt;p&gt;理由は単純だった、使っているシステムが違った。どちらも apache なのは違いないが、本番は CentOS で構成されており、開発環境の Docker の公式 image の php は debian で構成されていた。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/docker-library/php/blob/2630167f7e69394bdd91f240443a0a521fd7872d/7.0/apache/Dockerfile&quot;&gt;Dockerfile&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;debian 系の apache で mod_rewrite を有効化するにはコンテナに入ってコマンドを打てばいいらしい。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ docker exec -it {php_container_name} bash
$ a2enmod rewrite&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;そして/etc/apache2/sites-available/000-default.conf の&amp;#x3C;VirtualHost *:80&gt;の中に&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    &amp;lt;Directory /var/www/html&amp;gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    &amp;lt;/Directory&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;を追加して再起動すれば OK!&lt;/p&gt;
&lt;p&gt;でも、せっかく docker-compose 使ってるからいちいちコマンド打つの面倒だよね。ってことで&lt;/p&gt;
&lt;h2&gt;結論&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;FROM php:7.0-apache
RUN  a2enmod rewrite&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;docker-compse.yml&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;php-7.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; .
  &lt;span class=&quot;token key atrule&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;80:80&apos;&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../:/var/www/html&apos;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./000-default.conf:/etc/apache2/sites-available/000-default.conf&apos;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;000-default.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;VirtualHost *:80&amp;gt;
    &amp;lt;Directory /var/www/html&amp;gt;
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    &amp;lt;/Directory&amp;gt;
~~~~~~~~~~~~~~以下略~~~~~~~~~~~~~~~~&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;この３ファイルを同じディレクトリに入れ&lt;code class=&quot;language-text&quot;&gt;docker-compose build&lt;/code&gt;なりでイメージをリビルドして&lt;code class=&quot;language-text&quot;&gt;docker-compose up&lt;/code&gt;でOK。&lt;/p&gt;
&lt;p&gt;ちなみに、mysql も使いたいよって人は&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Dockerfile&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;FROM php:7.0-apache
RUN apt-get update &amp;amp;&amp;amp; \
  docker-php-ext-install pdo_mysql mysqli mbstring &amp;amp;&amp;amp; \
  a2enmod rewrite&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;こうすれば良いです。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[ポリッドスクリーンを使ったボカロ系イベントを作った話]]></title><description><![CDATA[イベント概要 非営利 自分も含め、企画側は全員学生、お客さんは学生と教員 イベントを行った場所は学校 使用キャラクターはクリプトンヒューチャー社の VOCALOID…]]></description><link>https://blog.magcho.com/ポリッドスクリーンを使ったボカロ系イベントを作った話/</link><guid isPermaLink="false">https://blog.magcho.com/ポリッドスクリーンを使ったボカロ系イベントを作った話/</guid><pubDate>Fri, 04 Aug 2017 00:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;イベント概要&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;非営利&lt;/li&gt;
&lt;li&gt;自分も含め、企画側は全員学生、お客さんは学生と教員&lt;/li&gt;
&lt;li&gt;イベントを行った場所は学校&lt;/li&gt;
&lt;li&gt;使用キャラクターはクリプトンヒューチャー社の VOCALOID キャラクターのみ&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;準備&lt;/h1&gt;
&lt;h2&gt;スクリーンについて&lt;/h2&gt;
&lt;h3&gt;スクリーンを選ぶポイント&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安い&lt;/li&gt;
&lt;li&gt;短辺が２メートル以上あるロール状のシート&lt;/li&gt;
&lt;li&gt;無地 (フィルム表面に何も印字されていない)&lt;/li&gt;
&lt;li&gt;学生でも買える&lt;/li&gt;
&lt;li&gt;軽い&lt;/li&gt;
&lt;li&gt;学校に搬入可能である&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;を考え、今回利用したのが&lt;a href=&quot;http://www.cainz.com/shop/g/g4560139590903/&quot;&gt;&lt;strong&gt;カインズホームの農ポリ 0.05X210X100&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;5000 円以下で購入でき、サイズも短辺が 2m10cm あり支払いもコンビニで OK、完全に無地で、ロールの状態で 9kg ほどなので１人で持ち運びが可能なので、学校近くにあるクロネコヤマトの営業所に配達をしてもらい、受け取りに行くことで学校に搬入が可能。ここで注意するのが、カインズオンラインには配達先を指定するときに営業所止めには設定できないので、お客様サポートへ連絡し個別に対応してもらうことが必要だということ。自分はカインズの回し者ではないのだが、カインズホームのカスタマーサポートはとても良い、返信が早いし個別対応になるとちゃんとサポートとコミュニケーションが取れるし、電話での相談も可能なので困ったらサポートに連絡すればどうにかしてくれる感じでした。&lt;/p&gt;
&lt;p&gt;ちなみに、今回の候補に上がったのは&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;大倉の農ポリ 厚さ 0.1mm 幅 96cm の切り売り 町田の東急ハンズで購入した、重ねずに明るい部屋でもくっきりと写る。結構重く、値段も高く今回は購入を断念。&lt;/li&gt;
&lt;li&gt;大倉の農ポリ 厚さ 0.05mm 幅 190cm の切り売り こちらも町田の東急ハンズで購入、これだと４枚重ねなきゃ明るい部屋ではくっきりと写ってくれない。軽く、値段も 0.1mm の半額ぐらい。下の写真はこれ。なかなかよかったが 町田の東急ハンズではロールでの販売をしておらず断念。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;スクリーン制作&lt;/h3&gt;
&lt;p&gt;スクリーンを作る過程でわかったことは、１枚のスクリーンではしっかりと像が映らないということ、２枚重ねにすると暗闇で後ろの壁が黒ならば結構くっきり見えて良い感じだったが、明るい部屋ではうっすらしか見えない。今回のライブではライブ照明を使って演出がしたかったので明るい部屋でもはっきり見えるようにする必要があったので、試した結果&lt;strong&gt;４枚重ねに決定した。&lt;/strong&gt;写真は４枚重ねの実験の時の写真&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 542px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5aac7f2d3319368ff08877e4d43835d5/a34d8/20170721235436.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 133.1081081081081%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAeWqXzYxEu2cRDB//8QAGxAAAwACAwAAAAAAAAAAAAAAAAECAxESICH/2gAIAQEAAQUC8No5IkvGpnaJY7TXT//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AaQ//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8BhT//xAAcEAABAwUAAAAAAAAAAAAAAAABABARICIxQVH/2gAIAQEABj8C29wQPVhogU//xAAbEAADAAIDAAAAAAAAAAAAAAAAARExYRAhcf/aAAgBAQABPyFzl0PeehLsKJmk0HRiF7IUjY8i5//aAAwDAQACAAMAAAAQ7Adz/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAEDAQE/ENGk2qL/xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8Qx4xYJv/EABwQAQEBAAMAAwAAAAAAAAAAAAERACExUUGRof/aAAgBAQABPxC6IHc63oefH74lR4SGIA9s6xiBB8MKrg9XHU41C1/dCm/PuJMhoeG//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;null&quot;
        title=&quot;null&quot;
        src=&quot;/static/5aac7f2d3319368ff08877e4d43835d5/a34d8/20170721235436.jpg&quot;
        srcset=&quot;/static/5aac7f2d3319368ff08877e4d43835d5/a80bd/20170721235436.jpg 148w,
/static/5aac7f2d3319368ff08877e4d43835d5/1c91a/20170721235436.jpg 295w,
/static/5aac7f2d3319368ff08877e4d43835d5/a34d8/20170721235436.jpg 542w&quot;
        sizes=&quot;(max-width: 542px) 100vw, 542px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;そして、結構苦労したのがスクリーンの設置方法、今回試し物を挙げると&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;スクリーンの上辺に針金を貼った物を 4 枚作り、バトンに紐で固定してぶら下げる
結果：&lt;strong&gt;失敗&lt;/strong&gt; ４枚の間に空気が入り隙間ができ、プロジェクターで投影した像が複数できでしまった。&lt;/li&gt;
&lt;li&gt;上だけじゃなくて下辺にも針金で固定し、４枚を上下辺の両辺で一つに固定しぶら下げる
結果：&lt;strong&gt;失敗&lt;/strong&gt; 結局空気は抜けず、複数の像ができてしまう。また、上下辺を固定したことで巻き取ることができな行くなった。&lt;/li&gt;
&lt;li&gt;角材でフレームを作り４枚を障子紙のように固定する
&lt;strong&gt;失敗&lt;/strong&gt; 切り出し、ピンと張ったフィルムをフレームに画鋲で固定することを４回繰り返したが、フィルムに直に画鋲を打ってしまうと、３０分ぐらい経つとフィルムが伸びてシワだらけで、映像に綺麗に映らない。(フィルムの間に空気はほぼ入らなくなったので像の問題はこの方法で解決)&lt;/li&gt;
&lt;li&gt;3.のようにフレームに貼る前にフィルムの４辺に養生テープを貼り伸びないようにした
&lt;strong&gt;成功&lt;/strong&gt; 3. のように時間がたってもフィルムが伸びることもなく成功した。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/82d2082a5f82424ff2187b7c5317713a/a9e43/20170722003710.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFTFysG80g//8QAGhABAAIDAQAAAAAAAAAAAAAAAgASAQMEEf/aAAgBAQABBQJHxVmsGr5FK5KHNY//xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAwEBPwFX/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BV//EABoQAAMBAAMAAAAAAAAAAAAAAAABERIQIaH/2gAIAQEABj8Ca47LpMjhd+H/xAAcEAACAgIDAAAAAAAAAAAAAAAAAREhQXEQMWH/2gAIAQEAAT8h804sVJvYn2T2PCQha5wP/9oADAMBAAIAAwAAABAYD//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCxh//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEUH/2gAIAQIBAT8QE7Yv/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARIUExUZH/2gAIAQEAAT8QVHLeeJ7grNxas2DFgu5z5BkCqpISJZo4tPYSRW6LJ//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;null&quot;
        title=&quot;null&quot;
        src=&quot;/static/82d2082a5f82424ff2187b7c5317713a/1c72d/20170722003710.jpg&quot;
        srcset=&quot;/static/82d2082a5f82424ff2187b7c5317713a/a80bd/20170722003710.jpg 148w,
/static/82d2082a5f82424ff2187b7c5317713a/1c91a/20170722003710.jpg 295w,
/static/82d2082a5f82424ff2187b7c5317713a/1c72d/20170722003710.jpg 590w,
/static/82d2082a5f82424ff2187b7c5317713a/a8a14/20170722003710.jpg 885w,
/static/82d2082a5f82424ff2187b7c5317713a/a9e43/20170722003710.jpg 964w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;今回のスクリーンは縦 210cm 横 3m15cm の大きさなので、キャラクタを等身大投影しても結構余裕がありました。&lt;/p&gt;
&lt;p&gt;でも、貼ってから 4 日経つとやはり伸びてくるらしく実際のライブ時にはシワができていたので、改善の余地あり。&lt;/p&gt;
&lt;h3&gt;反省&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;フィルムは薄いとすぐにシワになるのでできるだけ厚い 0.1mm の物を使った方が楽(高いけど)&lt;/li&gt;
&lt;li&gt;１パターン作るには３人ぐらいいないと難しく、作り終えるまでに４時間ぐらいかかったので、かなり大変&lt;/li&gt;
&lt;li&gt;フレームには倉庫に転がっていた角材を使ったため、しっかりと固定ができず持ち上げたら角材が割れてしまったので、ちゃんと強度を考えるべきだった&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;機材について&lt;/h2&gt;
&lt;h3&gt;機材一覧&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Macbook Air 2015 動画再生用&lt;/li&gt;
&lt;li&gt;VDMX5 動画再生ソフト&lt;/li&gt;
&lt;li&gt;EPSON EB-G5350 プロジェクター&lt;/li&gt;
&lt;li&gt;スピーカー SX300 を 2 発、RLX118 を 2 発&lt;/li&gt;
&lt;li&gt;音響セット(後述)&lt;/li&gt;
&lt;li&gt;照明セット(後述)&lt;/li&gt;
&lt;li&gt;フォグマシン スモーク演出用機材&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;映像&lt;/h3&gt;
&lt;p&gt;映像の再生環境で大事なのが矩形調整ができること、映像専用のソフトを使った方が楽なので、今回は VJ ソフトの[&lt;a href=&quot;http://vidvox.net/:title=VDMX5&quot;&gt;http://vidvox.net/:title=VDMX5&lt;/a&gt;]の無償版を使用した。無償版ということもあり設定などを保存することができないが、ポリッド投影するだけならば保存ば必要ないし、再生時間の制限もないので無償版で十分。&lt;/p&gt;
&lt;p&gt;実際にスクリーンに投影してみると画面で見るより青っぽくなる印象があるので、これも VDMX5 内で調整した。&lt;/p&gt;
&lt;p&gt;プロジェクターは EPSON の EB-G5350 を 1 台使用、ビジネス用プロジェクターということもあり、5000lm ぐらいある、ただし焦点距離が大きいのでスクリーンとの距離が 5 メートルぐらい必要でした。&lt;/p&gt;
&lt;h3&gt;音響&lt;/h3&gt;
&lt;p&gt;今回、バンドさんをお呼びして演奏をして下さった為、音響のセットはバンド向けにセッティングされていたので、それを利用して、PC からの音声を再生しました。&lt;/p&gt;
&lt;p&gt;スピーカーは SX300 を 2 発、ELX-180 を 2 発。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e396f3c1eb90479062c072d7095999c9/2bef9/20170801175852.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.72972972972974%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAARlAAAEZQAGA43XUAAABtElEQVQoz5WSW08TQRTH9zvywhfhkUcNL4ZXfSEREhJEkwpoiohVbkltYcGS2laqTQu2Tbrdbbd7v/w8A7YpxpLwn5w52cnkf5k9Wr1e56bZxGg00E9P+bi/j+/7PBapLLVrrzY3yWWzRIUCiwsLzM3PY/b7j6Kahvbt4oJf4k7BaLXonp9PriVSkar0Tj8JQ6xul45h4NRqhNfX2K7L0B5QT0v0+I02zT6SC2Y+T2BZhKaJLz2RnkpXZ56uMyyX6Xke3tkZ/skxlusxNAd8dw4pBXtoqVJP72zHSUJP4rYPDgiurgjbbSLlpFIhvrwkEGfT8Bst+gOTgWFiHb3n586T+w7HUFGdIMCTiL6IONIDEbUd5967BbKalLmhKnueavH5/wkVbNvGGY3wJZ4r3ZO3siT2Ld3fRHolz7H+haPCJ7K1bSgVZhOG4kqVGiFXyOI4nozTmHB3d483mS3ebu3w4fArVH/MJgwksiJIkmQi8O982p0OtsyuWywyeicOM5nZhFEUTVyqUt9KZNrhSS7H67U1MuvrfN7YkL8azyZ8CGPXL1dXebq0xLPlZV6srNye/QEABEH0nh7EsAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20170801175852&quot;
        title=&quot;20170801175852&quot;
        src=&quot;/static/e396f3c1eb90479062c072d7095999c9/fcda8/20170801175852.png&quot;
        srcset=&quot;/static/e396f3c1eb90479062c072d7095999c9/12f09/20170801175852.png 148w,
/static/e396f3c1eb90479062c072d7095999c9/e4a3f/20170801175852.png 295w,
/static/e396f3c1eb90479062c072d7095999c9/fcda8/20170801175852.png 590w,
/static/e396f3c1eb90479062c072d7095999c9/efc66/20170801175852.png 885w,
/static/e396f3c1eb90479062c072d7095999c9/2bef9/20170801175852.png 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;照明&lt;/h3&gt;
&lt;p&gt;今回はスクリーンを中央に設置したため、両サイドに照明を配置した。&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/72e01/20170801181200.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.08108108108109%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQX/xAAWAQEBAQAAAAAAAAAAAAAAAAADAQL/2gAMAwEAAhADEAAAAeTlJw0FNr//xAAaEAACAgMAAAAAAAAAAAAAAAAAARIhEBEi/9oACAEBAAEFAoVCuRG3j//EABYRAQEBAAAAAAAAAAAAAAAAAAAREv/aAAgBAwEBPwGtP//EABcRAQADAAAAAAAAAAAAAAAAAAAREmH/2gAIAQIBAT8BlbH/xAAXEAADAQAAAAAAAAAAAAAAAAABECAx/9oACAEBAAY/Alpj/8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERMUFRcf/aAAgBAQABPyGG0cNLpOdPDLH2D0//2gAMAwEAAgADAAAAEAAf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAwEBPxATpAzhf//EABcRAQEBAQAAAAAAAAAAAAAAAAEAIVH/2gAIAQIBAT8QNQeL/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBYXGR/9oACAEBAAE/EGqCEqyut2DF4u/ZkzOO2jUabLZ23NxauJ4D5P/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20170801181200&quot;
        title=&quot;20170801181200&quot;
        src=&quot;/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/1c72d/20170801181200.jpg&quot;
        srcset=&quot;/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/a80bd/20170801181200.jpg 148w,
/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/1c91a/20170801181200.jpg 295w,
/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/1c72d/20170801181200.jpg 590w,
/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/a8a14/20170801181200.jpg 885w,
/static/7de4fc5bf979d3b3b65cc1ddcd36da1a/72e01/20170801181200.jpg 1024w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;今回照明で悩んだのはスモークを炊くか炊かないか、スモークを焚いた方が演出照明は綺麗に見せられるのですが、スモークを炊くと照明が空気中で乱反射するためスクリーンにも光が当たってしまい、映像とのリアリティが無くなるのが悩みどころでした。また、プロジェクターの光の筋も見えてしまうのでどうしようかという感じでした。
結果としては炊きました。スクリーンとプロジェクターの間には炊かずに、客席の方に炊きました。時間が経つにつれて空気に馴染んでくれるので、丁度いい感じに薄く炊けました。&lt;/p&gt;
&lt;p&gt;今回使用した照明機材は&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;フレネル 1000w (ゼラ 72) 青地用&lt;/li&gt;
&lt;li&gt;フレネル 500w 目潰し用&lt;/li&gt;
&lt;li&gt;パー缶 PAR64&lt;/li&gt;
&lt;li&gt;ムービングヘッド vizi led spot (American DJ)&lt;/li&gt;
&lt;li&gt;マジックボール ノーブランド トモカ電気で購入&lt;/li&gt;
&lt;li&gt;エリプソイダルスポット Source4 ETC 星柄のゴボ使用&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;本番&lt;/h2&gt;
&lt;p&gt;当日は、お客さんが 100 人以上来場されたようで、色々なご感想をいただきました。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;楽曲を客の投票とかで募集してほしい。&lt;/li&gt;
&lt;li&gt;バンドやダンスとの同期も見てみたい。&lt;/li&gt;
&lt;li&gt;もっとスクリーン大きい方がいいかも。&lt;/li&gt;
&lt;li&gt;客席で、後ろの方に行くと音が悪い。　など&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;でした、機材トラブルなんかもあり申し訳なかったです。&lt;/p&gt;
&lt;p&gt;でも、&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;またやってほしい&lt;/li&gt;
&lt;li&gt;運営に参加したい&lt;/li&gt;
&lt;li&gt;初めて軽音楽部のバンドを生で見た など&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;嬉しい意見もありました。このイベントでバンドにも興味が湧いて下さった意見が特に嬉しかったです。&lt;/p&gt;
&lt;p&gt;ざっとまとめた内容ではこんな感じです。この記事では僕が関わった内容しか書かれていないので、別記事で他の運営スタッフから聞いた話をまとめられたらいいなって思います。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Docker volumeを調べたメモ]]></title><description><![CDATA[完全にメモ書きになってるので Evernote にでも書けよって感じ。 Docker…]]></description><link>https://blog.magcho.com/docker-volumeを調べたメモ/</link><guid isPermaLink="false">https://blog.magcho.com/docker-volumeを調べたメモ/</guid><pubDate>Fri, 06 Jan 2017 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;完全にメモ書きになってるので Evernote にでも書けよって感じ。&lt;/p&gt;
&lt;p&gt;Docker はコンテナ型仮想化システムで、必要な時に必要なだけコンテナを作り、終わったら捨てる。いわば使い捨てだ。でも、消えて欲しくないデータを扱う事もあるだろう。そんな話。&lt;/p&gt;
&lt;p&gt;自分はインフラエンジニアではないし、Docker でホストの環境弄らずに開発環境作りたかったから始めたっていう理由&lt;/p&gt;
&lt;p&gt;Docker コンテナは使い捨てるもの → 残したいファイルはコンテの外に保存しておこうっていう考えらしい。&lt;/p&gt;
&lt;h2&gt;Docker の volume にも色々ある&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;docker run の-v オプション
&lt;code class=&quot;language-text&quot;&gt;$ Docker run -v /hoge centos:latest&lt;/code&gt;
centos の latest(最新版)を起動するコマンドである。この時-v オプションを使ってコンテナ内に/hoge という名前のシンボリックリングを作成し、フォルダの実体は/var/lib/docker/volumes/{ランダムな英数字}/_data/にある。このフォルダは docker がコンテナと連動させて管理しているため、docker コンテナを消せばこのフォルダも消えます。
** 説明のため、コマンドは一部省略しています **&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;この時、内部では 1. ホストに実体のフォルダを作る 2. イメージからコンテナをつくり動かす 3. ホストのフォルダへのリンクをコンテナに作る(上書く)&lt;/p&gt;
&lt;p&gt;ってイメージらしい。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ホストのフォルダとコンテナのフォルダを同期する&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ docker run -v {ホストのフォルダ(実体)}:{コンテナ内のリンク名} centos:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;このコマンドでホストのフォルダへのシンボリックリンクをコンテナ作成時に貼る。こうすれば、コンテナの設定を変えてリビルドしてもファイルは消えずに残る。
また、ホストにファイルがあるのでホストでエディターを開き、コンテナで開発環境を揃え実行できるので環境のバージョンを変えるのもイメージを差し替えるだけだし、ソースをホスト側で git 管理する事もできる。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;後記&lt;/h2&gt;
&lt;p&gt;dockerfile や docker-compose にも同様の機能があるので、もう少し検証したい&lt;/p&gt;</content:encoded></item><item><title><![CDATA[DMX512のプロトコルをまとめる]]></title><description><![CDATA[DMX512-A 仕様 シールド付きツイストペアケーブルを使用すること RS-485 では 1500m までの通信が保証されているが、RS-485 の仕様の中でケーブルの長さを伸ばすと通信速度が下がるとされているので、DMX512-A の通信速度 250kbps…]]></description><link>https://blog.magcho.com/dmx512のプロトコルをまとめる/</link><guid isPermaLink="false">https://blog.magcho.com/dmx512のプロトコルをまとめる/</guid><pubDate>Tue, 03 Jan 2017 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;DMX512-A 仕様&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;シールド付きツイストペアケーブルを使用すること&lt;/li&gt;
&lt;li&gt;RS-485 では 1500m までの通信が保証されているが、RS-485 の仕様の中でケーブルの長さを伸ばすと通信速度が下がるとされているので、DMX512-A の通信速度 250kbps が保証されるのはケーブル長 400m までとされている。&lt;/li&gt;
&lt;li&gt;RS-485 の仕様では 1Master で 32Slave までとされている&lt;/li&gt;
&lt;li&gt;DMX512-A のボーレートは 250kpbs なので、1bit あたり 4μsec (※1)a&lt;/li&gt;
&lt;li&gt;端末にはターミネータ(終端抵抗)をつける DMX512-A では基本的に 120Ω となっている(100-120)と幅を効かせて定義もされている。&lt;/li&gt;
&lt;li&gt;仕様上では１パケット長が最小で 22.7msec になり、リフレッシュレートは最大で 44Hz になる&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;※1: 仕様では基本 250kbps としているが 245 ≤ n ≤ 255kbps まで認めているので、1bit は 3.92 ≤ n ≤ 4.08µsec までと幅がある。&lt;/p&gt;
&lt;h2&gt;パケット仕様&lt;/h2&gt;
&lt;p&gt;パケットは以下のフレームで構成されている。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.iar.unicamp.br/lab/luz/ld/C%EAnica/Manuais/dmx_usit.pdf&quot;&gt;http://www.iar.unicamp.br/lab/luz/ld/C%EAnica/Manuais/dmx_usit.pdf&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/da18cd1aee5d84d72886837c4ef62261/e4a12/20180102234649.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.891891891891895%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAARlAAAEZQAGA43XUAAABBklEQVQoz2WS6W6DMBCE8/6P10jAjyBECPcd7nOrb1WjprU02rU9zIxtbs+nL67rim3b8nW/SxAE8ng8dM1xHLEsS+F5njDO8/yH4zi0Mm7yM4ZhkGVZPrCuq+z7rti2TcZx/ADf9H2vQFQFjUPXdTLPs0zTpGT6tm21GlEA11TAPsZXQhabplEhUtV1rc6AvizLKwk8eowwJQT78C5B3IqiUBKbSZIooii6YOZhGKoo8yzLtMZxrILv91uTqyDuCFZVJXmeK8kI/+7TNFUuFRAEcDoq96xH5qgcBZfX63W5+76vYG6SwuFPMMZU7pB1tK5X5g5Ii/jfhzJ75oEMh0SsMcwrfwN/32Yw0ST3QQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180102234649&quot;
        title=&quot;20180102234649&quot;
        src=&quot;/static/da18cd1aee5d84d72886837c4ef62261/fcda8/20180102234649.png&quot;
        srcset=&quot;/static/da18cd1aee5d84d72886837c4ef62261/12f09/20180102234649.png 148w,
/static/da18cd1aee5d84d72886837c4ef62261/e4a3f/20180102234649.png 295w,
/static/da18cd1aee5d84d72886837c4ef62261/fcda8/20180102234649.png 590w,
/static/da18cd1aee5d84d72886837c4ef62261/efc66/20180102234649.png 885w,
/static/da18cd1aee5d84d72886837c4ef62261/e4a12/20180102234649.png 963w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 444px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bbe8603ae7793d7fd8792bb5624d287f/9b7bd/20180102234658.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 110.8108108108108%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAARlAAAEZQAGA43XUAAACmklEQVQ4y51Ui3aiUBDr//+bYhFBHgKCtb54CWof6mwyVra7Kt2z13MFBGImycyTYH18fMjxeGyPXOfz+WZff+9aT/xKk6k4jiPj8Vim0+ndF3l9Op3+AL4HroDHz09pmp00dS2WZYkN8DRNFdwaWuL5vpy+vdzFUgEPh73sdtyNPD+b4oLpZDIR23bEMAZiDocShRGubVkuVz8zbJpGmt2Foev5kkCC5XIpeZ7Ler2WzWajez6fS1lVNxrfAO4Btt3WUhSFsgjBLp4m8j9LAd/e3mS/3wN0K57narmBH8gntD3TCHyu7oObmvOobAXcsVyWja0Mo1B8GGGNRnqkllEUSxD4ej/Pi27Aut5is+RSngcDmaUzGeHFft9AlFx1fjIJZAhzmAD+8SO3Ww13KLmEhgRkyWEUqSl5kUtZFtilrFYrPVKKToYXDQ/QsFJDqOMCLnetR1lUQAJtUXKFSDCDnufJbPaiD1wN+A7U1YatKXXdaOkDBDsIAlksFtqKljVS7SiB7dgoufqZYZZtlB0BTXMonusqqAumExx7vR5Y+9oxvV5f3t/f7w6QFpCis/WYw75hIIM++jjRNqTLBE2SFAZdzOnSVQGrqtQoFHDVMPoKEn71Ls85JFg2248NQPf5fIZrkmB11ygp4Gaz1tarcXOA2FxCHGh8UjDjOcF9lM3zEQIfx1M1MIV5Y2QziuPfgHmWtf/Sh0Y+XiIr0zRbt/9ltSXn+QWQ9C1rCEAfLCMwsdRp2xkjnwFMMbWS1pCvgXtrCsRudOJs1eH566syZB6ZTwafm+3592C4C7haLbWPCejChBfMPc5ExibLcnWWo42SXE14FG4FLIq8nTZhGGrPvoJlDKFTDAqW7YwdZZ0kiRpyegD4C5qBkOz2mnP6AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;20180102234658&quot;
        title=&quot;20180102234658&quot;
        src=&quot;/static/bbe8603ae7793d7fd8792bb5624d287f/9b7bd/20180102234658.png&quot;
        srcset=&quot;/static/bbe8603ae7793d7fd8792bb5624d287f/12f09/20180102234658.png 148w,
/static/bbe8603ae7793d7fd8792bb5624d287f/e4a3f/20180102234658.png 295w,
/static/bbe8603ae7793d7fd8792bb5624d287f/9b7bd/20180102234658.png 444w&quot;
        sizes=&quot;(max-width: 444px) 100vw, 444px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;No.&lt;/th&gt;
&lt;th&gt;Frame&lt;/th&gt;
&lt;th&gt;Time&lt;/th&gt;
&lt;th&gt;Level&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;“SPACE” for Break&lt;/td&gt;
&lt;td&gt;88µsec &amp;#x3C; 1sec ※1&lt;/td&gt;
&lt;td&gt;LOW&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;“MARK” After Break (MAB)&lt;/td&gt;
&lt;td&gt;8µsec≤n&amp;#x3C;1sec&lt;/td&gt;
&lt;td&gt;HIGH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;START Bit&lt;/td&gt;
&lt;td&gt;1bit (4µsec)&lt;/td&gt;
&lt;td&gt;LOW&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;SLOT nnn Data&lt;/td&gt;
&lt;td&gt;8bit (32µsec)&lt;/td&gt;
&lt;td&gt;(0~512 SLOT)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;STOP Bit&lt;/td&gt;
&lt;td&gt;2bit (8µsec)&lt;/td&gt;
&lt;td&gt;HIGH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;“MARK” Time Between slots&lt;/td&gt;
&lt;td&gt;0sec≤n&amp;#x3C;1sec&lt;/td&gt;
&lt;td&gt;HIGH&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;“MARK” Before Break (MBB)&lt;/td&gt;
&lt;td&gt;0sec≤n&amp;#x3C;1sec&lt;/td&gt;
&lt;td&gt;HIGH&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;3~6 を 513 回繰り返します。&lt;/p&gt;
&lt;p&gt;※1:仕様では 88µsec 以上としか書かれていないが、パケット全体を 1sec 以内に収めることが書かれているので、事実上制限があることになりそう？&lt;/p&gt;
&lt;p&gt;この調子で１パケットで 513 SLOT の Data を送信します、この Data を仕様内では SLOT と呼び、最初の 0SLOT は START CODE で 1SLOT が DMX の 1ch,2SLOT が 2ch…&lt;/p&gt;
&lt;h2&gt;START CODE&lt;/h2&gt;
&lt;p&gt;DMX512-A では調光信号の他、イロイロな信号を流せるようになった、この時にこの Start bit に仕様で定義されているコードを送信することで受信側はなんの信号か判断できるようになっているがこのコードをちゃんと識別しれくれない機器もある。RDM 信号流したら安物ムービングがピクピク動くからなんだと思ったら受け取った信号を全て調光信号として受け取る仕様らしく何しても動くやつとかある。
パケットの 0 SLOT に以下の通りのコードを送信すればいいらしい。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;NAME&lt;/th&gt;
&lt;th&gt;CODE&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Lighting Data&lt;/td&gt;
&lt;td&gt;0x00 (0000 0000)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Network Test&lt;/td&gt;
&lt;td&gt;0x55 (0101 0101)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Text Packet&lt;/td&gt;
&lt;td&gt;0x17 (0001 0111)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Remote Device Management&lt;/td&gt;
&lt;td&gt;0xCC (1100 1100)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;System Information Packet&lt;/td&gt;
&lt;td&gt;0xCF (1100 1111)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Dimmer Curve Select&lt;/td&gt;
&lt;td&gt;0xFF (1111 1111)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</content:encoded></item><item><title><![CDATA[MBAのSerriaをクリーンインストールした時の手順メモ]]></title><description><![CDATA[自分用のメモ記事なので、参考程度にどうぞ。 環境 MacBookAir macOS Sierra 10.12.2 homebrew 1.1.5 homebrew-cask 1.1.5 mas 1.3.1 mackup 0.8.1…]]></description><link>https://blog.magcho.com/mbaのserriaをクリーンインストールした時の手順メモ/</link><guid isPermaLink="false">https://blog.magcho.com/mbaのserriaをクリーンインストールした時の手順メモ/</guid><pubDate>Fri, 30 Dec 2016 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;自分用のメモ記事なので、参考程度にどうぞ。&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;環境&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;MacBookAir macOS Sierra 10.12.2&lt;/li&gt;
&lt;li&gt;homebrew 1.1.5&lt;/li&gt;
&lt;li&gt;homebrew-cask 1.1.5&lt;/li&gt;
&lt;li&gt;mas 1.3.1&lt;/li&gt;
&lt;li&gt;mackup 0.8.15&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;準備編&lt;/h2&gt;
&lt;p&gt;１. 必要なファイルを外部のストレージにコピー&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;home ディレクトリをそのままコピーしてしまえばある程度は安心&lt;/li&gt;
&lt;li&gt;プッシュしていない Git プロジェクトはプロジェクトごとコピーしておけばブランチ構造ごとコピーできる&lt;/li&gt;
&lt;li&gt;VirtualBox のエクスポートツールでバックアップしてもいいし、面倒ならフォルダごとコピーして*.vbox ファイルをあとでインポートすれば OK&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;２. Dropbox をインストールし同期できるように設定しておく&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;インストール済みならばそれで OK&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;３. アプリの設定ファイルなどをバックアップ&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew install mackup
$ mackup backup&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;エクスポートしたファイル群は Dropbox の共有フォルダにあるので、同期しておく&lt;/li&gt;
&lt;li&gt;/Users/{ユーザー名}/Dropbox/Mackup が作られる&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;４. homebrwe, homebrew cask でコマンドでインストールしたアプリの一覧を取得する&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd ~/Dropbox/mac_backup
$ brew list &amp;gt;&amp;gt; brew_list.txt
$ brew cask list &amp;gt;&amp;gt; brew_cask_list.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Docker は別で再インストールしたほうがいい(Docker tool box)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;５. AppStore でからインストールしたアプリの一覧を取得する&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd ~/Dropbox/mac_backup
$ brew install mas
$ mas list &amp;gt;&amp;gt; mas_list.txt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;６. インストール一覧からシェルスクリプトを作る&lt;/p&gt;
&lt;p&gt;{% gist 5023c8d38d325b6578112807c1fd46b2 %}&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/5023c8d38d325b6578112807c1fd46b2&quot;&gt;mac を引っ越す時にアプリを一括インストールするスクリプト&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;リストア編&lt;/h2&gt;
&lt;p&gt;１. xcode を appstore からインストール&lt;/p&gt;
&lt;p&gt;２. xcode を起動し xcode comand line tool をインストール&lt;/p&gt;
&lt;p&gt;３. Homebrew をインストール&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ /usr/bin/ruby -e &amp;quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;４. 1password をインストールする&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew cask install 1passwrod&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;cask は[brew cask]とコマンドを打つと気を利かせて homebrew がインストールしてくれるので、自分でやる必要はない&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;自分は iPhone とも同期しているので icloud 同期で設定&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;５. Dropbox をインストールしファイルを同期する&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew cask install dropbox&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;６. mackup をインストールし、復元&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew install mackup
$ mackup restore&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;７. 準備編(上記)で作ったシェルスクリプトを実行して brew と cask 系を一括インストール&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd /Users/{ユーザー名}/Dropbox/mac_backup
$ sudo sh brew-install-list.sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;８. atom エディタのアドオンと設定を復元&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ apm install atom-settings
[atom内のコマンドで（cmd+shift+p)] -&amp;gt; [sync-settings:restore]とタイプしEnter&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;apm コマンドが使えない場合は一度 atom を起動し [Atom] -&gt; [Install Shell Commands]を押し apm が使えるようにする。&lt;/li&gt;
&lt;li&gt;復元中に、gist のリストとパッケージの最新バージョンが違ったりすると警告が出るので、各自判断で手動ならインストールできます。&lt;/li&gt;
&lt;li&gt;Settings &gt; Packages を見ると atom の再起動が必要なパッケージはダウンロードされた時点で一時停止しているので、インストールを押してやれば OK です。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;９. Git 系のセットアップ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;git は sourcetree 内蔵ではなく、自分で入れたものを使っているので brew でインストール後 Sourcetree の設定でシステムの Git に切り替えます&lt;/li&gt;
&lt;li&gt;Github と Bitbucket でログインする。２段階認証にどちらも対応してるのでアクセストークンをあれこれする必要はなく、ID と PW でログインして、携帯などで 6 桁の数字を確認して２段階認証しておきましょう&lt;/li&gt;
&lt;li&gt;Ouath か Basic で認証したり SSH キーを認証したりしておく。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;後記&lt;/h2&gt;
&lt;p&gt;アプリのインストール管理は brew-file とやらでできるらしいので、もっと早く知りたかった。それと、1password って appstore からだと 7,800 円するけど、cask なら試用版をメール認証なしでインストールできるっていう発見。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Homebrew Caskで特定のアプリがインストールできなくなった話]]></title><description><![CDATA[状況説明 かなり前から homebrew cask を使うと。 こんなのが出てきていた。「cask…]]></description><link>https://blog.magcho.com/homebrew-caskで特定のアプリがインストールできなくなった話/</link><guid isPermaLink="false">https://blog.magcho.com/homebrew-caskで特定のアプリがインストールできなくなった話/</guid><pubDate>Sat, 03 Dec 2016 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;状況説明&lt;/h2&gt;
&lt;p&gt;かなり前から homebrew cask を使うと。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew cask list
Warning: The default Caskroom location has moved to /usr/local/Caskroom.

Please migrate your Casks to the new location and delete /opt/homebrew-cask/Caskroom,
or if you would like to keep your Caskroom at /opt/homebrew-cask/Caskroom, add the
following to your HOMEBREW_CASK_OPTS:

  --caskroom=/opt/homebrew-cask/Caskroom

For more details on each of those options, see https://github.com/caskroom/homebrew-cask/issues/21913.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;こんなのが出てきていた。「cask のバージョンアップでアプリが配置されるディレクトリの場所が変わったから前の場所に置いてたアプリ新しいとこに移動してくれ」っていう話だった気がする、筆者は&lt;s&gt;面倒だから&lt;/s&gt;移動しなくても使えるからやっていなかったが、docker がうまくインストールできないので今更対応した。
やることは簡単、コンソールに書いてある&lt;a href=&quot;https://github.com/caskroom/homebrew-cask/issues/21913&quot;&gt;URL&lt;/a&gt;に書いている通りに進めるだけだが、しかし今回 Thunderbird が再インストールに失敗した。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew cask install thunderbird-ja
==&amp;gt; Downloading https://download.mozilla.org/?product=thunderbird-45.4.0&amp;amp;os=osx&amp;amp;
Already downloaded: /Users/{username}/Library/Caches/Homebrew/Cask/thunderbird-ja--45.4.0.0&amp;amp;os=osx&amp;amp;lang=ja-JP-mac
==&amp;gt; Verifying checksum for Cask thunderbird-ja
fatal error&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;エラー吐いてインストールが止まってしまう。&lt;/p&gt;
&lt;h2&gt;対応&lt;/h2&gt;
&lt;p&gt;上のコンソールで&lt;code class=&quot;language-text&quot;&gt;Already download&lt;/code&gt;ってなってるから以前ダウンロードしてあるインストーラを使おうとしているのだが&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ cd /Users/{username}/Library/Caches/Homebrew/Cask/
No such file or directory&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;となる。ディレクトリ自体が無いので、移動時にどっかいった可能性が高い。そこで新しいファイルをダウンロードすればいいと思い&lt;code class=&quot;language-text&quot;&gt;$ brew cask install --force thunderbird-ja&lt;/code&gt;としたもののやはり&lt;code class=&quot;language-text&quot;&gt;Already download&lt;/code&gt;となりダウンロードしてくれない。そこで最新バージョンではなく Beta を一旦インストールする。そしてキャッシュを消し、最新バージョンへアップグレードする。とうまくいった。
事前に cask versions がインストールしてある場合は２つ目の$から始めてもらえばいいかと。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;$ brew tap caskroom/versions
==&amp;gt; Tapping caskroom/versions
Cloning into &amp;#39;/usr/local/Homebrew/Library/Taps/caskroom/homebrew-versions&amp;#39;...
remote: Counting objects: 209, done.
remote: Compressing objects: 100% (207/207), done.
remote: Total 209 (delta 22), reused 15 (delta 0), pack-reused 0
Receiving objects: 100% (209/209), 76.51 KiB | 0 bytes/s, done.
Resolving deltas: 100% (22/22), done.
Checking connectivity... done.
Tapped 0 formulae (226 files, 276.3K)

$ brew cask install Thunderbird-beta
==&amp;gt; Downloading https://ftp.mozilla.org/pub/thunderbird/releases/50.0b2/mac/en-U
==&amp;gt; Verifying checksum for Cask thunderbird-beta
==&amp;gt; Moving App &amp;#39;Thunderbird.app&amp;#39; to &amp;#39;/Applications/Thunderbird.app&amp;#39;
🍺  thunderbird-beta was successfully installed!

$ brew cask uninstall thunderbird-beta
==&amp;gt; Removing App: &amp;#39;/Applications/Thunderbird.app&amp;#39;

$ brew cask cleanup
==&amp;gt; Removing cached downloads
/Users/{username}/Library/Caches/Homebrew/Cask/thunderbird-beta--50.0b2.dmg
==&amp;gt; This operation has freed approximately 77.8M of disk space.

$ brew cask install thunderbird
==&amp;gt; Downloading https://ftp.mozilla.org/pub/thunderbird/releases/45.5.1/mac/ja-J
==&amp;gt; Verifying checksum for Cask thunderbird
==&amp;gt; Moving App &amp;#39;Thunderbird.app&amp;#39; to &amp;#39;/Applications/Thunderbird.app&amp;#39;
🍺  thunderbird was successfully installed!&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;まとめ&lt;/h2&gt;
&lt;p&gt;brew cask のキャッシュ周りのことを理解しないで使っているので本当はもっといい解決策があるかもしれないが、今回はこれで収まったのでよしとする。
homebrew はオープンソースプロジェクトなので Github でどんなことやってるかは確認できるが、仕様変更なんかがあった時にエラー吐いてググって変更あったんだーってなることが多いので、もっと自己防衛のためにもアンテナ張ってなきゃな〜って思った。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[AWSの学割は高校生に優しくない]]></title><description><![CDATA[事の発端 学校で課題研究の授業があって数人でグループを組んで自然言語処理の研究をしていたところ、VPS が必要になってどうしようと思ってたら Github education の中に AWS…]]></description><link>https://blog.magcho.com/awsの学割は高校生に優しくない/</link><guid isPermaLink="false">https://blog.magcho.com/awsの学割は高校生に優しくない/</guid><pubDate>Sat, 20 Aug 2016 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;事の発端&lt;/h2&gt;
&lt;p&gt;学校で課題研究の授業があって数人でグループを組んで自然言語処理の研究をしていたところ、VPS が必要になってどうしようと思ってたら Github education の中に AWS あったなーと思ってセットアップしてたらクレジットカード番号必須で詰んだ。
そんなこんなして、解決できたのでここにメモしておく。&lt;/p&gt;
&lt;h2&gt;高校生とクレカ&lt;/h2&gt;
&lt;p&gt;基本的に高校生はクレジットカードが作れない。クレジットカード会社の規定なのだからしょうがない。なら代わりになるものを使えばいいじゃないという考え。&lt;/p&gt;
&lt;h3&gt;デビッドカードを作る&lt;/h3&gt;
&lt;p&gt;日本の銀行などでは１５歳以上（中学生を除く）でデビッドカードが作れる場合がある、このカードがあればクレジットカード同様に AWS にも登録できる。
クレジットカードと比べると利用できる金額など制限が多かったりしてちょっとしたネットショップとか登録だけなら十分かと&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;メリット&lt;/li&gt;
&lt;li&gt;高校生でも分割払いが利用できる場合もある。&lt;/li&gt;
&lt;li&gt;デメリット&lt;/li&gt;
&lt;li&gt;銀行のカードというだけあって銀行口座の開設が必要。（すでに持っている場合は不要かも）&lt;/li&gt;
&lt;li&gt;入会料・年会費などが発生する場合もある&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;WebMoney Card を作る。&lt;/h3&gt;
&lt;p&gt;WebMoney Card はゲームとかする人なら見たことあるかも、コンビニなどでチャージや購入ができるプリペイドカードです。
クレジットじゃないじゃないかとか思うかもしれないが、このカード実は MasterCard として利用できるのだ。私はこれで AWS などのサービスに登録をした、しかもチャージなしで。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;メリット&lt;/li&gt;
&lt;li&gt;年齢制限なし&lt;/li&gt;
&lt;li&gt;入会費・年会費必要なし&lt;/li&gt;
&lt;li&gt;チャージするのでお金が財布から消えていくので使った感がある。&lt;/li&gt;
&lt;li&gt;デメリット&lt;/li&gt;
&lt;li&gt;クレジットカードではないので分割払いができない場合が多い。&lt;/li&gt;
&lt;li&gt;利用できる金額枠が少ない。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;自分の場合は高校を卒業するまでの仮として使いたいだけだったので Webmoney カードを作った。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[安価でDMX機器をPCでコントロールしたかった]]></title><description><![CDATA[DMX 機器を何種類か導入したはいいものの、卓がなかったり、単純にオペレータが不足してたりするので、PC で一括制御したくなったので作った。 ネットを検索していると Arudino やラズパイを使い PC から DMX 信号を出力しているものをいくつか見つけたが、たかが DMX…]]></description><link>https://blog.magcho.com/安価でdmx機器をpcでコントロールしたかった/</link><guid isPermaLink="false">https://blog.magcho.com/安価でdmx機器をpcでコントロールしたかった/</guid><pubDate>Sat, 20 Aug 2016 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;DMX 機器を何種類か導入したはいいものの、卓がなかったり、単純にオペレータが不足してたりするので、PC で一括制御したくなったので作った。&lt;/p&gt;
&lt;p&gt;ネットを検索していると Arudino やラズパイを使い PC から DMX 信号を出力しているものをいくつか見つけたが、たかが DMX にはオーバースペックだなぁとか、思ってたら、安上がりの記事を見つけたので実際に作ってみる。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stevenbreuls.com/2013/05/diy-usb-dmx-dongle-interface-for-under-10/&quot;&gt;https://stevenbreuls.com/2013/05/diy-usb-dmx-dongle-interface-for-under-10/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;この記事にしたがって作っていけば困ることはなかった。何個か作っているうちに一番手頃に手に入ると思った材料を紹介します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.amazon.co.jp/dp/B01D140BAU&quot;&gt;https://www.amazon.co.jp/dp/B01D140BAU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;USBA-B オスオス (ダイソーで購入)&lt;/li&gt;
&lt;li&gt;500 円コインケース(ダイソーで購入)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Amazon で購入したシリアルコンバーターですが、中国から直送されるため注文から 1~2 週間かかり、関税通過のために真っ黄色のプチプチ付き封筒で届きます。
これを使えば、元の記事にあるように IC の足を結線しなくても問題なく動作しました。触ってないのにたまに LED パーが一瞬だけついたりしてたので、末端抵抗をつけたら大丈夫になりました。&lt;/p&gt;</content:encoded></item></channel></rss>